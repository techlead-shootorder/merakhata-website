"use strict";(self.webpackChunkbedesk=self.webpackChunkbedesk||[]).push([[677],{58341:function(t,e,i){i.d(e,{HS:function(){return I},oH:function(){return F},qn:function(){return S},qH:function(){return A},Hi:function(){return L}});var n=i(36461),s=i(37716),o=i(72458),a=i(39490),r=i(38583),c=i(46237),l=i(79765),h=i(66682),d=i(15257),u=i(46782),p=i(39761),g=i(19238),m=i(38345),f=i(98295),b=i(80521),v=i(70946),x=i(3679);const _=["*"],w=new s.OlP("MatChipRemove"),y=new s.OlP("MatChipAvatar"),C=new s.OlP("MatChipTrailingIcon");class Z{constructor(t){this._elementRef=t}}const k=(0,o.sb)((0,o.pj)((0,o.Kr)(Z),"primary"),-1);let I=(()=>{class t extends k{constructor(t,e,i,n,a,r,c,h){super(t),this._elementRef=t,this._ngZone=e,this._changeDetectorRef=a,this._hasFocus=!1,this.chipListSelectable=!0,this._chipListMultiple=!1,this._chipListDisabled=!1,this._selected=!1,this._selectable=!0,this._disabled=!1,this._removable=!0,this._onFocus=new l.xQ,this._onBlur=new l.xQ,this.selectionChange=new s.vpe,this.destroyed=new s.vpe,this.removed=new s.vpe,this._addHostClassName(),this._chipRippleTarget=r.createElement("div"),this._chipRippleTarget.classList.add("mat-chip-ripple"),this._elementRef.nativeElement.appendChild(this._chipRippleTarget),this._chipRipple=new o.IR(this,e,this._chipRippleTarget,i),this._chipRipple.setupTriggerEvents(t),this.rippleConfig=n||{},this._animationsDisabled="NoopAnimations"===c,this.tabIndex=null!=h&&parseInt(h)||-1}get rippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||!!this.rippleConfig.disabled}get selected(){return this._selected}set selected(t){const e=(0,a.Ig)(t);e!==this._selected&&(this._selected=e,this._dispatchSelectionChange())}get value(){return void 0!==this._value?this._value:this._elementRef.nativeElement.textContent}set value(t){this._value=t}get selectable(){return this._selectable&&this.chipListSelectable}set selectable(t){this._selectable=(0,a.Ig)(t)}get disabled(){return this._chipListDisabled||this._disabled}set disabled(t){this._disabled=(0,a.Ig)(t)}get removable(){return this._removable}set removable(t){this._removable=(0,a.Ig)(t)}get ariaSelected(){return this.selectable&&(this._chipListMultiple||this.selected)?this.selected.toString():null}_addHostClassName(){const t="mat-basic-chip",e=this._elementRef.nativeElement;e.hasAttribute(t)||e.tagName.toLowerCase()===t?e.classList.add(t):e.classList.add("mat-standard-chip")}ngOnDestroy(){this.destroyed.emit({chip:this}),this._chipRipple._removeTriggerEvents()}select(){this._selected||(this._selected=!0,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}deselect(){this._selected&&(this._selected=!1,this._dispatchSelectionChange(),this._changeDetectorRef.markForCheck())}selectViaInteraction(){this._selected||(this._selected=!0,this._dispatchSelectionChange(!0),this._changeDetectorRef.markForCheck())}toggleSelected(t=!1){return this._selected=!this.selected,this._dispatchSelectionChange(t),this._changeDetectorRef.markForCheck(),this.selected}focus(){this._hasFocus||(this._elementRef.nativeElement.focus(),this._onFocus.next({chip:this})),this._hasFocus=!0}remove(){this.removable&&this.removed.emit({chip:this})}_handleClick(t){this.disabled?t.preventDefault():t.stopPropagation()}_handleKeydown(t){if(!this.disabled)switch(t.keyCode){case n.yY:case n.ZH:this.remove(),t.preventDefault();break;case n.L_:this.selectable&&this.toggleSelected(!0),t.preventDefault()}}_blur(){this._ngZone.onStable.pipe((0,d.q)(1)).subscribe(()=>{this._ngZone.run(()=>{this._hasFocus=!1,this._onBlur.next({chip:this})})})}_dispatchSelectionChange(t=!1){this.selectionChange.emit({source:this,isUserInput:t,selected:this._selected})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.R0b),s.Y36(b.t4),s.Y36(o.Y2,8),s.Y36(s.sBO),s.Y36(r.K0),s.Y36(c.Qb,8),s.$8M("tabindex"))},t.\u0275dir=s.lG2({type:t,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(t,e,i){if(1&t&&(s.Suo(i,y,5),s.Suo(i,C,5),s.Suo(i,w,5)),2&t){let t;s.iGM(t=s.CRH())&&(e.avatar=t.first),s.iGM(t=s.CRH())&&(e.trailingIcon=t.first),s.iGM(t=s.CRH())&&(e.removeIcon=t.first)}},hostAttrs:["role","option",1,"mat-chip","mat-focus-indicator"],hostVars:14,hostBindings:function(t,e){1&t&&s.NdJ("click",function(t){return e._handleClick(t)})("keydown",function(t){return e._handleKeydown(t)})("focus",function(){return e.focus()})("blur",function(){return e._blur()}),2&t&&(s.uIk("tabindex",e.disabled?null:e.tabIndex)("disabled",e.disabled||null)("aria-disabled",e.disabled.toString())("aria-selected",e.ariaSelected),s.ekj("mat-chip-selected",e.selected)("mat-chip-with-avatar",e.avatar)("mat-chip-with-trailing-icon",e.trailingIcon||e.removeIcon)("mat-chip-disabled",e.disabled)("_mat-animation-noopable",e._animationsDisabled))},inputs:{color:"color",disableRipple:"disableRipple",tabIndex:"tabIndex",selected:"selected",value:"value",selectable:"selectable",disabled:"disabled",removable:"removable"},outputs:{selectionChange:"selectionChange",destroyed:"destroyed",removed:"removed"},exportAs:["matChip"],features:[s.qOj]}),t})(),A=(()=>{class t{constructor(t,e){this._parentChip=t,"BUTTON"===e.nativeElement.nodeName&&e.nativeElement.setAttribute("type","button")}_handleClick(t){const e=this._parentChip;e.removable&&!e.disabled&&e.remove(),t.stopPropagation()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(I),s.Y36(s.SBq))},t.\u0275dir=s.lG2({type:t,selectors:[["","matChipRemove",""]],hostAttrs:[1,"mat-chip-remove","mat-chip-trailing-icon"],hostBindings:function(t,e){1&t&&s.NdJ("click",function(t){return e._handleClick(t)})},features:[s._Bn([{provide:w,useExisting:t}])]}),t})();const T=new s.OlP("mat-chips-default-options");class P{constructor(t,e,i,n){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=i,this.ngControl=n}}const M=(0,o.FD)(P);let O=0;class q{constructor(t,e){this.source=t,this.value=e}}let S=(()=>{class t extends M{constructor(t,e,i,n,o,a,r){super(a,n,o,r),this._elementRef=t,this._changeDetectorRef=e,this._dir=i,this.ngControl=r,this.controlType="mat-chip-list",this._lastDestroyedChipIndex=null,this._destroyed=new l.xQ,this._uid="mat-chip-list-"+O++,this._tabIndex=0,this._userTabIndex=null,this._onTouched=()=>{},this._onChange=()=>{},this._multiple=!1,this._compareWith=(t,e)=>t===e,this._required=!1,this._disabled=!1,this.ariaOrientation="horizontal",this._selectable=!0,this.change=new s.vpe,this.valueChange=new s.vpe,this.ngControl&&(this.ngControl.valueAccessor=this)}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get role(){return this.empty?null:"listbox"}get multiple(){return this._multiple}set multiple(t){this._multiple=(0,a.Ig)(t),this._syncChipsState()}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this.writeValue(t),this._value=t}get id(){return this._chipInput?this._chipInput.id:this._uid}get required(){return this._required}set required(t){this._required=(0,a.Ig)(t),this.stateChanges.next()}get placeholder(){return this._chipInput?this._chipInput.placeholder:this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get focused(){return this._chipInput&&this._chipInput.focused||this._hasFocusedChip()}get empty(){return(!this._chipInput||this._chipInput.empty)&&(!this.chips||0===this.chips.length)}get shouldLabelFloat(){return!this.empty||this.focused}get disabled(){return this.ngControl?!!this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=(0,a.Ig)(t),this._syncChipsState()}get selectable(){return this._selectable}set selectable(t){this._selectable=(0,a.Ig)(t),this.chips&&this.chips.forEach(t=>t.chipListSelectable=this._selectable)}set tabIndex(t){this._userTabIndex=t,this._tabIndex=t}get chipSelectionChanges(){return(0,h.T)(...this.chips.map(t=>t.selectionChange))}get chipFocusChanges(){return(0,h.T)(...this.chips.map(t=>t._onFocus))}get chipBlurChanges(){return(0,h.T)(...this.chips.map(t=>t._onBlur))}get chipRemoveChanges(){return(0,h.T)(...this.chips.map(t=>t.destroyed))}ngAfterContentInit(){this._keyManager=new g.Em(this.chips).withWrap().withVerticalOrientation().withHomeAndEnd().withHorizontalOrientation(this._dir?this._dir.value:"ltr"),this._dir&&this._dir.change.pipe((0,u.R)(this._destroyed)).subscribe(t=>this._keyManager.withHorizontalOrientation(t)),this._keyManager.tabOut.pipe((0,u.R)(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.chips.changes.pipe((0,p.O)(null),(0,u.R)(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>{this._syncChipsState()}),this._resetChips(),this._initializeSelection(),this._updateTabIndex(),this._updateFocusForDestroyedChips(),this.stateChanges.next()})}ngOnInit(){this._selectionModel=new m.Ov(this.multiple,void 0,!1),this.stateChanges.next()}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==this._disabled&&(this.disabled=!!this.ngControl.disabled))}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete(),this.stateChanges.complete(),this._dropSubscriptions()}registerInput(t){this._chipInput=t,this._elementRef.nativeElement.setAttribute("data-mat-chip-input",t.id)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}writeValue(t){this.chips&&this._setSelectionByValue(t,!1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this.stateChanges.next()}onContainerClick(t){this._originatesFromChip(t)||this.focus()}focus(t){this.disabled||this._chipInput&&this._chipInput.focused||(this.chips.length>0?(this._keyManager.setFirstItemActive(),this.stateChanges.next()):(this._focusInput(t),this.stateChanges.next()))}_focusInput(t){this._chipInput&&this._chipInput.focus(t)}_keydown(t){const e=t.target;t.keyCode===n.ZH&&this._isInputEmpty(e)?(this._keyManager.setLastItemActive(),t.preventDefault()):e&&e.classList.contains("mat-chip")&&(this._keyManager.onKeydown(t),this.stateChanges.next())}_updateTabIndex(){this._tabIndex=this._userTabIndex||(0===this.chips.length?-1:0)}_updateFocusForDestroyedChips(){if(null!=this._lastDestroyedChipIndex)if(this.chips.length){const t=Math.min(this._lastDestroyedChipIndex,this.chips.length-1);this._keyManager.setActiveItem(t)}else this.focus();this._lastDestroyedChipIndex=null}_isValidIndex(t){return t>=0&&t<this.chips.length}_isInputEmpty(t){return!(!t||"input"!==t.nodeName.toLowerCase()||t.value)}_setSelectionByValue(t,e=!0){if(this._clearSelection(),this.chips.forEach(t=>t.deselect()),Array.isArray(t))t.forEach(t=>this._selectValue(t,e)),this._sortValues();else{const i=this._selectValue(t,e);i&&e&&this._keyManager.setActiveItem(i)}}_selectValue(t,e=!0){const i=this.chips.find(e=>null!=e.value&&this._compareWith(e.value,t));return i&&(e?i.selectViaInteraction():i.select(),this._selectionModel.select(i)),i}_initializeSelection(){Promise.resolve().then(()=>{(this.ngControl||this._value)&&(this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value,!1),this.stateChanges.next())})}_clearSelection(t){this._selectionModel.clear(),this.chips.forEach(e=>{e!==t&&e.deselect()}),this.stateChanges.next()}_sortValues(){this._multiple&&(this._selectionModel.clear(),this.chips.forEach(t=>{t.selected&&this._selectionModel.select(t)}),this.stateChanges.next())}_propagateChanges(t){let e=null;e=Array.isArray(this.selected)?this.selected.map(t=>t.value):this.selected?this.selected.value:t,this._value=e,this.change.emit(new q(this,e)),this.valueChange.emit(e),this._onChange(e),this._changeDetectorRef.markForCheck()}_blur(){this._hasFocusedChip()||this._keyManager.setActiveItem(-1),this.disabled||(this._chipInput?setTimeout(()=>{this.focused||this._markAsTouched()}):this._markAsTouched())}_markAsTouched(){this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next()}_allowFocusEscape(){-1!==this._tabIndex&&(this._tabIndex=-1,setTimeout(()=>{this._tabIndex=this._userTabIndex||0,this._changeDetectorRef.markForCheck()}))}_resetChips(){this._dropSubscriptions(),this._listenToChipsFocus(),this._listenToChipsSelection(),this._listenToChipsRemoved()}_dropSubscriptions(){this._chipFocusSubscription&&(this._chipFocusSubscription.unsubscribe(),this._chipFocusSubscription=null),this._chipBlurSubscription&&(this._chipBlurSubscription.unsubscribe(),this._chipBlurSubscription=null),this._chipSelectionSubscription&&(this._chipSelectionSubscription.unsubscribe(),this._chipSelectionSubscription=null),this._chipRemoveSubscription&&(this._chipRemoveSubscription.unsubscribe(),this._chipRemoveSubscription=null)}_listenToChipsSelection(){this._chipSelectionSubscription=this.chipSelectionChanges.subscribe(t=>{t.source.selected?this._selectionModel.select(t.source):this._selectionModel.deselect(t.source),this.multiple||this.chips.forEach(t=>{!this._selectionModel.isSelected(t)&&t.selected&&t.deselect()}),t.isUserInput&&this._propagateChanges()})}_listenToChipsFocus(){this._chipFocusSubscription=this.chipFocusChanges.subscribe(t=>{let e=this.chips.toArray().indexOf(t.chip);this._isValidIndex(e)&&this._keyManager.updateActiveItem(e),this.stateChanges.next()}),this._chipBlurSubscription=this.chipBlurChanges.subscribe(()=>{this._blur(),this.stateChanges.next()})}_listenToChipsRemoved(){this._chipRemoveSubscription=this.chipRemoveChanges.subscribe(t=>{const e=t.chip,i=this.chips.toArray().indexOf(t.chip);this._isValidIndex(i)&&e._hasFocus&&(this._lastDestroyedChipIndex=i)})}_originatesFromChip(t){let e=t.target;for(;e&&e!==this._elementRef.nativeElement;){if(e.classList.contains("mat-chip"))return!0;e=e.parentElement}return!1}_hasFocusedChip(){return this.chips&&this.chips.some(t=>t._hasFocus)}_syncChipsState(){this.chips&&this.chips.forEach(t=>{t._chipListDisabled=this._disabled,t._chipListMultiple=this.multiple})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(s.sBO),s.Y36(v.Is,8),s.Y36(x.F,8),s.Y36(x.sg,8),s.Y36(o.rD),s.Y36(x.a5,10))},t.\u0275cmp=s.Xpm({type:t,selectors:[["mat-chip-list"]],contentQueries:function(t,e,i){if(1&t&&s.Suo(i,I,5),2&t){let t;s.iGM(t=s.CRH())&&(e.chips=t)}},hostAttrs:[1,"mat-chip-list"],hostVars:15,hostBindings:function(t,e){1&t&&s.NdJ("focus",function(){return e.focus()})("blur",function(){return e._blur()})("keydown",function(t){return e._keydown(t)}),2&t&&(s.Ikx("id",e._uid),s.uIk("tabindex",e.disabled?null:e._tabIndex)("aria-describedby",e._ariaDescribedby||null)("aria-required",e.role?e.required:null)("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-multiselectable",e.multiple)("role",e.role)("aria-orientation",e.ariaOrientation),s.ekj("mat-chip-list-disabled",e.disabled)("mat-chip-list-invalid",e.errorState)("mat-chip-list-required",e.required))},inputs:{ariaOrientation:["aria-orientation","ariaOrientation"],multiple:"multiple",compareWith:"compareWith",value:"value",required:"required",placeholder:"placeholder",disabled:"disabled",selectable:"selectable",tabIndex:"tabIndex",errorStateMatcher:"errorStateMatcher"},outputs:{change:"change",valueChange:"valueChange"},exportAs:["matChipList"],features:[s._Bn([{provide:f.Eo,useExisting:t}]),s.qOj],ngContentSelectors:_,decls:2,vars:0,consts:[[1,"mat-chip-list-wrapper"]],template:function(t,e){1&t&&(s.F$t(),s.TgZ(0,"div",0),s.Hsn(1),s.qZA())},styles:['.mat-chip{position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;transform:translateZ(0);border:none;-webkit-appearance:none;-moz-appearance:none}.mat-standard-chip{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px}._mat-animation-noopable.mat-standard-chip{transition:none;animation:none}.mat-standard-chip .mat-chip-remove.mat-icon{width:18px;height:18px}.mat-standard-chip::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;opacity:0;content:"";pointer-events:none;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-standard-chip:hover::after{opacity:.12}.mat-standard-chip:focus{outline:none}.mat-standard-chip:focus::after{opacity:.16}.cdk-high-contrast-active .mat-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-standard-chip:focus{outline:dotted 2px}.mat-standard-chip.mat-chip-disabled::after{opacity:0}.mat-standard-chip.mat-chip-disabled .mat-chip-remove,.mat-standard-chip.mat-chip-disabled .mat-chip-trailing-icon{cursor:default}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar,.mat-standard-chip.mat-chip-with-avatar{padding-top:0;padding-bottom:0}.mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-right:8px;padding-left:0}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon.mat-chip-with-avatar{padding-left:8px;padding-right:0}.mat-standard-chip.mat-chip-with-trailing-icon{padding-top:7px;padding-bottom:7px;padding-right:8px;padding-left:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-trailing-icon{padding-left:8px;padding-right:12px}.mat-standard-chip.mat-chip-with-avatar{padding-left:0;padding-right:12px}[dir=rtl] .mat-standard-chip.mat-chip-with-avatar{padding-right:0;padding-left:12px}.mat-standard-chip .mat-chip-avatar{width:24px;height:24px;margin-right:8px;margin-left:4px}[dir=rtl] .mat-standard-chip .mat-chip-avatar{margin-left:8px;margin-right:4px}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{width:18px;height:18px;cursor:pointer}.mat-standard-chip .mat-chip-remove,.mat-standard-chip .mat-chip-trailing-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-standard-chip .mat-chip-remove,[dir=rtl] .mat-standard-chip .mat-chip-trailing-icon{margin-right:8px;margin-left:0}.mat-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit;overflow:hidden}.mat-chip-list-wrapper{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;margin:-4px}.mat-chip-list-wrapper input.mat-input-element,.mat-chip-list-wrapper .mat-standard-chip{margin:4px}.mat-chip-list-stacked .mat-chip-list-wrapper{flex-direction:column;align-items:flex-start}.mat-chip-list-stacked .mat-chip-list-wrapper .mat-standard-chip{width:100%}.mat-chip-avatar{border-radius:50%;justify-content:center;align-items:center;display:flex;overflow:hidden;object-fit:cover}input.mat-chip-input{width:150px;margin:4px;flex:1 0 150px}\n'],encapsulation:2,changeDetection:0}),t})(),E=0,F=(()=>{class t{constructor(t,e){this._elementRef=t,this._defaultOptions=e,this.focused=!1,this._addOnBlur=!1,this.separatorKeyCodes=this._defaultOptions.separatorKeyCodes,this.chipEnd=new s.vpe,this.placeholder="",this.id="mat-chip-list-input-"+E++,this._disabled=!1,this._inputElement=this._elementRef.nativeElement}set chipList(t){t&&(this._chipList=t,this._chipList.registerInput(this))}get addOnBlur(){return this._addOnBlur}set addOnBlur(t){this._addOnBlur=(0,a.Ig)(t)}get disabled(){return this._disabled||this._chipList&&this._chipList.disabled}set disabled(t){this._disabled=(0,a.Ig)(t)}get empty(){return!this._inputElement.value}ngOnChanges(){this._chipList.stateChanges.next()}_keydown(t){t&&t.keyCode===n.Mf&&!(0,n.Vb)(t,"shiftKey")&&this._chipList._allowFocusEscape(),this._emitChipEnd(t)}_blur(){this.addOnBlur&&this._emitChipEnd(),this.focused=!1,this._chipList.focused||this._chipList._blur(),this._chipList.stateChanges.next()}_focus(){this.focused=!0,this._chipList.stateChanges.next()}_emitChipEnd(t){!this._inputElement.value&&!!t&&this._chipList._keydown(t),(!t||this._isSeparatorKey(t))&&(this.chipEnd.emit({input:this._inputElement,value:this._inputElement.value}),t&&t.preventDefault())}_onInput(){this._chipList.stateChanges.next()}focus(t){this._inputElement.focus(t)}_isSeparatorKey(t){return!(0,n.Vb)(t)&&new Set(this.separatorKeyCodes).has(t.keyCode)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.SBq),s.Y36(T))},t.\u0275dir=s.lG2({type:t,selectors:[["input","matChipInputFor",""]],hostAttrs:[1,"mat-chip-input","mat-input-element"],hostVars:5,hostBindings:function(t,e){1&t&&s.NdJ("keydown",function(t){return e._keydown(t)})("blur",function(){return e._blur()})("focus",function(){return e._focus()})("input",function(){return e._onInput()}),2&t&&(s.Ikx("id",e.id),s.uIk("disabled",e.disabled||null)("placeholder",e.placeholder||null)("aria-invalid",e._chipList&&e._chipList.ngControl?e._chipList.ngControl.invalid:null)("aria-required",e._chipList&&e._chipList.required||null))},inputs:{separatorKeyCodes:["matChipInputSeparatorKeyCodes","separatorKeyCodes"],placeholder:"placeholder",id:"id",chipList:["matChipInputFor","chipList"],addOnBlur:["matChipInputAddOnBlur","addOnBlur"],disabled:"disabled"},outputs:{chipEnd:"matChipInputTokenEnd"},exportAs:["matChipInput","matChipInputFor"],features:[s.TTD]}),t})();const U={separatorKeyCodes:[n.K5]};let L=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[o.rD,{provide:T,useValue:U}],imports:[[o.BQ]]}),t})()},91241:function(t,e,i){i.d(e,{G:function(){return q}});var n=i(37716),s=i(72100),o=i(63412),a=i(67310),r=i(37989),c=i(34673),l=i(38583),h=i(51095),d=i(76627);function u(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"button",3),n.NdJ("click",function(){return n.CHM(t),n.oxw().closed.emit(!0)}),n._UZ(1,"mat-icon",4),n.qZA()}}function p(t,e){if(1&t){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",9),n.TgZ(2,"button",10),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).previewFiles.showPrevious()}),n._UZ(3,"mat-icon",11),n.qZA(),n.TgZ(4,"span",12),n._uU(5),n.qZA(),n.TgZ(6,"button",13),n.NdJ("click",function(){return n.CHM(t),n.oxw(2).previewFiles.showNext()}),n._UZ(7,"mat-icon",14),n.qZA(),n.qZA(),n.BQk()}if(2&t){const t=e.ngIf;n.xp6(2),n.Q6J("disabled",!t.havePrevious),n.xp6(3),n.AsE("",t.pointer+1," of ",t.total,""),n.xp6(1),n.Q6J("disabled",!t.haveNext)}}function g(t,e){if(1&t){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",5),n._uU(2),n.qZA(),n.YNc(3,p,8,4,"ng-container",1),n.ALo(4,"async"),n.TgZ(5,"div",6),n.TgZ(6,"button",7),n.NdJ("click",function(){return n.CHM(t),n.oxw().downloadFiles()}),n._UZ(7,"mat-icon",8),n.qZA(),n.Hsn(8),n.qZA(),n.BQk()}if(2&t){const t=e.ngIf,i=n.oxw();n.xp6(2),n.hij(" ",t.entry.name," "),n.xp6(1),n.Q6J("ngIf",n.lcZ(4,3,i.previewFiles.pagination())),n.xp6(3),n.Q6J("disabled",i.disableDownload)}}function m(t,e){if(1&t&&n._UZ(0,"img",17),2&t){const t=n.oxw(2);n.Q6J("src",t.settings.getBaseUrl(!0)+t.settings.get("branding.logo_light"),n.LSH)}}function f(t,e){if(1&t&&(n.TgZ(0,"a",15),n.YNc(1,m,1,1,"img",16),n.qZA()),2&t){const t=n.oxw();n.xp6(1),n.Q6J("ngIf",t.showLogo&&t.settings.get("branding.logo_light"))}}const b=["*"];let v=(()=>{class t{constructor(t,e){this.previewFiles=t,this.settings=e,this.showLogo=!1,this.disableDownload=!1,this.showCloseButton=!1,this.closed=new n.vpe}downloadFiles(){this.previewFiles.download.next()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(r.T),n.Y36(c.Z))},t.\u0275cmp=n.Xpm({type:t,selectors:[["file-preview-toolbar"]],inputs:{showLogo:"showLogo",disableDownload:"disableDownload",showCloseButton:"showCloseButton"},outputs:{closed:"closed"},ngContentSelectors:b,decls:4,vars:5,consts:[["mat-icon-button","","class","back-button",3,"click",4,"ngIf"],[4,"ngIf"],["routerLink","/drive","class","logo",4,"ngIf"],["mat-icon-button","",1,"back-button",3,"click"],["svgIcon","arrow-back"],[1,"entry-name"],[1,"actions"],["mat-icon-button","",3,"disabled","click"],["svgIcon","file-download"],[1,"navigation"],["mat-icon-button","",1,"previous",3,"disabled","click"],["svgIcon","keyboard-arrow-left"],[1,"meta"],["mat-icon-button","",1,"next",3,"disabled","click"],["svgIcon","keyboard-arrow-right"],["routerLink","/drive",1,"logo"],[3,"src",4,"ngIf"],[3,"src"]],template:function(t,e){1&t&&(n.F$t(),n.YNc(0,u,2,0,"button",0),n.YNc(1,g,9,5,"ng-container",1),n.ALo(2,"async"),n.YNc(3,f,2,1,"a",2)),2&t&&(n.Q6J("ngIf",e.showCloseButton),n.xp6(1),n.Q6J("ngIf",n.lcZ(2,3,e.previewFiles.pagination())),n.xp6(2),n.Q6J("ngIf",e.showLogo&&e.settings.has("branding.logo_light")))},directives:[l.O5,h.lW,d.Hw],pipes:[l.Ov],styles:["file-preview-toolbar{position:fixed;top:0;left:0;display:flex;width:100%;align-items:center;color:var(--be-accent-contrast);height:60px;padding:0 15px;background:linear-gradient(to bottom,rgba(0,0,0,.65) 0%,transparent 100%);z-index:10}@media only screen and (max-width: 550px){file-preview-toolbar{padding:0 5px}}file-preview-toolbar .entry-name{display:block;margin-right:25px;margin-left:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media only screen and (min-width: 550px){file-preview-toolbar .entry-name{max-width:calc(50% - 77.5px)}}file-preview-toolbar .entry-name file-icon{display:inline-block;vertical-align:bottom;margin-right:5px}@media only screen and (min-width: 550px){file-preview-toolbar .navigation{position:absolute;left:50%;top:50%;margin-right:-50%;transform:translate(-50%,-50%)}}@media only screen and (max-width: 550px){file-preview-toolbar .navigation{position:fixed;bottom:10px;left:5px}}file-preview-toolbar .actions{margin-left:auto;white-space:nowrap}file-preview-toolbar .actions button,file-preview-toolbar .actions a{margin:0 5px}file-preview-toolbar .close-button{margin-right:25px}file-preview-toolbar .logo{position:fixed;bottom:15px;right:15px;opacity:.2;width:150px;height:auto}file-preview-toolbar .logo img{width:100%;height:auto}file-preview-toolbar .mat-icon-button[disabled][disabled]{color:#737373}\n"],encapsulation:2,changeDetection:0}),t})();var x=i(87636);function _(t,e){}function w(t,e){if(1&t){const t=n.EpF();n.ynx(0),n.YNc(1,_,0,0,"ng-template",1),n.NdJ("attached",function(e){return n.CHM(t),n.oxw().listenForDownloadClick(e)}),n.BQk()}if(2&t){const t=e.ngIf;n.xp6(1),n.Q6J("cdkPortalOutlet",t)}}let y=(()=>{class t{constructor(t){this.previewFiles=t,this.disableDownload=!1}ngOnChanges(t){this.previewFiles.set(this.files,this.activeFile)}ngOnDestroy(){this.previewFiles.destroy(),this.downloadSub&&this.downloadSub.unsubscribe()}listenForDownloadClick(t){this.downloadSub&&this.downloadSub.unsubscribe(),this.disableDownload||(this.downloadSub=t.instance.download.subscribe(()=>{this.previewFiles.download.next()}))}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(r.T))},t.\u0275cmp=n.Xpm({type:t,selectors:[["preview-container"]],inputs:{files:"files",activeFile:"activeFile",disableDownload:"disableDownload"},features:[n.TTD],decls:2,vars:3,consts:[[4,"ngIf"],[3,"cdkPortalOutlet","attached"]],template:function(t,e){1&t&&(n.YNc(0,w,2,1,"ng-container",0),n.ALo(1,"async")),2&t&&n.Q6J("ngIf",n.lcZ(1,1,e.previewFiles.getPortal()))},directives:[l.O5,x.Pl],pipes:[l.Ov],styles:["[_nghost-%COMP%]{display:flex;width:100%;min-height:100%;align-items:center;justify-content:center;position:relative;overflow:hidden}  .file-preview-wrapper{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto}"],changeDetection:0}),t})();const C=["previewContainer"],Z=["moreOptionsButton"];let k=(()=>{class t{constructor(t,e,i,n,s){this.el=t,this.overlayRef=e,this.previewFiles=i,this.settings=n,this.data=s,this.entries=[],this.entries=s.entries}ngOnInit(){this.data.ticketEntry&&this.previewFiles.setPreviewUriTransformer(this.urlTransformer.bind(this))}ngAfterViewInit(){this.bindToDownload(),this.previewContainer.nativeElement.addEventListener("click",t=>{t.target.closest(".preview-object")||this.overlayRef.close()})}ngOnDestroy(){this.downloadSub.unsubscribe()}closeOverlay(){this.overlayRef.close()}bindToDownload(){this.downloadSub=this.previewFiles.download.subscribe(()=>{const t=this.previewFiles.getAllEntries();this.downloadFile(t)})}downloadFile(t){const e=t.map(t=>t.hash).join(",");let i=`${this.settings.getBaseUrl()}/secure/uploads/download?hashes=${e}`;this.data.ticketEntry&&(i+="&ticketEntry=true"),(0,o.k)(i)}urlTransformer(t){return`${t.url}?ticketEntry=true`}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(n.SBq),n.Y36(a.L),n.Y36(r.T),n.Y36(c.Z),n.Y36(s.p))},t.\u0275cmp=n.Xpm({type:t,selectors:[["file-preview-overlay"]],viewQuery:function(t,e){if(1&t&&(n.Gf(C,7,n.SBq),n.Gf(Z,5,n.SBq)),2&t){let t;n.iGM(t=n.CRH())&&(e.previewContainer=t.first),n.iGM(t=n.CRH())&&(e.optionsButton=t.first)}},decls:3,vars:2,consts:[[3,"showCloseButton","closed"],[3,"files"],["previewContainer",""]],template:function(t,e){1&t&&(n.TgZ(0,"file-preview-toolbar",0),n.NdJ("closed",function(){return e.closeOverlay()}),n.qZA(),n._UZ(1,"preview-container",1,2)),2&t&&(n.Q6J("showCloseButton",!0),n.xp6(1),n.Q6J("files",e.entries))},directives:[v,y],styles:["[_nghost-%COMP%]{display:block;width:100vw;height:100vh;background-color:rgba(0,0,0,.902);color:var(--be-accent-contrast);overflow:auto;position:relative}preview-container[_ngcontent-%COMP%]{margin:60px 0;min-height:calc(100% - 120px)}"],changeDetection:0}),t})(),I=(()=>{class t{constructor(){this.iconsMap={text:"insert-drive-file",audio:"volume-up",video:"videocam",document:"assignment",image:"image"}}getFileType(t){return t.split("/")[0]}getIconName(t){const e=this.getFileType(t);return this.iconsMap[e]||this.iconsMap.text}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=i(7964),T=i(9141),P=i(52644);function M(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"button",6),n.NdJ("click",function(e){n.CHM(t);const i=n.oxw().$implicit;return n.oxw().detachEntry(i),e.stopPropagation()}),n._UZ(1,"mat-icon",7),n.qZA()}}function O(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"div",1),n.NdJ("click",function(){const e=n.CHM(t).$implicit;return n.oxw().showPreviewOverlay(e)}),n._UZ(1,"mat-icon",2),n.TgZ(2,"div",3),n._uU(3),n.qZA(),n.TgZ(4,"div",4),n._uU(5),n.ALo(6,"formattedFileSize"),n.qZA(),n.YNc(7,M,2,0,"button",5),n.qZA()}if(2&t){const t=e.$implicit,i=n.oxw();n.xp6(1),n.Q6J("svgIcon",i.mime.getIconName(t.mime))("ngClass",i.mime.getIconName(t.mime)),n.xp6(2),n.Oqu(t.name),n.xp6(2),n.Oqu(n.lcZ(6,5,t.file_size)),n.xp6(2),n.Q6J("ngIf",i.cancelButtonVisible)}}let q=(()=>{class t{constructor(t,e,i){this.mime=t,this.overlay=e,this.uploadQueue=i,this.cancelButtonVisible=!0,this.detached=new n.vpe}detachEntry(t){const e=this.attachments.findIndex(e=>e.id===t.id);e>-1&&(this.attachments.splice(e,1),this.detached.emit(t))}showPreviewOverlay(t){this.overlay.open(k,{position:"center",origin:"global",data:{entries:[t],ticketEntry:!0}})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(I),n.Y36(A.T),n.Y36(T.A))},t.\u0275cmp=n.Xpm({type:t,selectors:[["reply-attachment-list"]],inputs:{attachments:"attachments",cancelButtonVisible:"cancelButtonVisible"},outputs:{detached:"detached"},decls:1,vars:1,consts:[["class","attachments-list-item",3,"click",4,"ngFor","ngForOf"],[1,"attachments-list-item",3,"click"],[1,"attachment-info","type-icon",3,"svgIcon","ngClass"],[1,"attachment-info","name"],[1,"attachment-info","size"],["class","remove-attachment","type","button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-icon-button","",1,"remove-attachment",3,"click"],["svgIcon","close"]],template:function(t,e){1&t&&n.YNc(0,O,8,7,"div",0),2&t&&n.Q6J("ngForOf",e.attachments)},directives:[l.sg,d.Hw,l.mk,l.O5,h.lW],pipes:[P.y],styles:["reply-attachment-list{display:flex;flex-wrap:wrap;color:var(--be-secondary-text)}reply-attachment-list .attachments-list-item{border:1px solid var(--be-divider-default);margin:0 10px 10px 0;position:relative;height:45px;line-height:45px;border-radius:3px;flex:0 1 auto;min-width:200px;padding:0 8px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}reply-attachment-list .attachments-list-item .attachment-info{display:inline-block;vertical-align:middle}reply-attachment-list .attachments-list-item .attachment-info svg{vertical-align:top}reply-attachment-list .attachments-list-item .attachment-info.name{max-width:115px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:500}reply-attachment-list .attachments-list-item .attachment-info.type-icon{margin-right:3px}reply-attachment-list .attachments-list-item .attachment-info.type-icon.image{color:#db4437}reply-attachment-list .attachments-list-item .attachment-info.type-icon.volume-up{color:#db4437}reply-attachment-list .attachments-list-item .attachment-info.type-icon.videocam{color:#db4437}reply-attachment-list .attachments-list-item .attachment-info.type-icon.insert-drive-file{color:#4285f4}reply-attachment-list .attachments-list-item .attachment-info.type-icon.assignment{color:#0f9d58}reply-attachment-list .attachments-list-item .size{font-size:1.1rem;margin:0 10px 0 5px}\n"],encapsulation:2,changeDetection:0}),t})()},87738:function(t,e,i){i.d(e,{G:function(){return u}});var n=i(38583),s=i(58341),o=i(76627),a=i(3679),r=i(49866),c=i(21554),l=i(51095),h=i(72458),d=i(37716);let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[n.ez,s.Hi,c.Bb,a.UX,r.N,l.ot,o.Ps,h.si]]}),t})()},84889:function(t,e,i){function n(t){const e=Object.assign({},t);return Object.keys(e).forEach(t=>{(null==e[t]||""===e[t])&&delete e[t]}),e}i.d(e,{N:function(){return n}})},6253:function(t,e,i){i.d(e,{B:function(){return d}});var n=i(38583),s=i(49866),o=i(3679),a=i(76627),r=i(51095),c=i(22238),l=i(43389),h=i(37716);let d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[n.ez,s.N,o.UX,a.Ps,r.ot,c.Is,l.p]]}),t})()},32141:function(t,e,i){i.d(e,{V:function(){return m}});var n=i(3679),s=i(45435),o=i(88002),a=i(37716),r=i(65987),c=i(38583),l=i(51095),h=i(76627),d=i(15515),u=i(63297);function p(t,e){if(1&t&&(a.TgZ(0,"div",6),a.TgZ(1,"div",7),a._uU(2,"Items per page"),a.qZA(),a.TgZ(3,"div",8),a.TgZ(4,"select",9),a.TgZ(5,"option",10),a._uU(6,"10"),a.qZA(),a.TgZ(7,"option",10),a._uU(8,"15"),a.qZA(),a.TgZ(9,"option",10),a._uU(10,"20"),a.qZA(),a.TgZ(11,"option",10),a._uU(12,"50"),a.qZA(),a.TgZ(13,"option",10),a._uU(14,"100"),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){const t=a.oxw();a.xp6(4),a.Q6J("formControl",t.perPageControl),a.xp6(1),a.Q6J("ngValue",10),a.xp6(2),a.Q6J("ngValue",15),a.xp6(2),a.Q6J("ngValue",20),a.xp6(2),a.Q6J("ngValue",50),a.xp6(2),a.Q6J("ngValue",100)}}function g(t,e){if(1&t&&(a.TgZ(0,"div",11),a._uU(1),a.ALo(2,"trans"),a.ALo(3,"number"),a.qZA()),2&t){const t=a.oxw();a.xp6(1),a.HOy(" ",t.from," - ",t.to," ",a.lcZ(2,4,"of")," ",a.lcZ(3,6,t.totalRecords)," ")}}let m=(()=>{class t{constructor(t,e){this.datable=t,this.cd=e,this.hidePerPage=!1,this.perPageControl=new n.NI(15)}ngOnInit(){this.changeRef=this.datable.paginator.response$.pipe((0,s.h)(t=>!!(null==t?void 0:t.pagination)),(0,o.U)(t=>t.pagination)).subscribe(t=>{this.totalRecords=t.total,this.to=Math.min(t.per_page*t.current_page,this.totalRecords),this.from=Math.max(this.to-t.per_page,1),this.havePrevious=this.datable.paginator.canLoadPrevPage(),this.haveNext=this.datable.paginator.canLoadNextPage(),this.perPageControl.setValue(parseInt(""+t.per_page),{emitEvent:!1}),this.cd.markForCheck()}),this.perPageControl.valueChanges.subscribe(t=>{this.datable.paginator.changePerPage(t)})}ngOnDestroy(){this.changeRef.unsubscribe(),this.datable.destroy()}previousPage(){this.datable.paginator.previousPage()}nextPage(){this.datable.paginator.nextPage()}}return t.\u0275fac=function(e){return new(e||t)(a.Y36(r.x),a.Y36(a.sBO))},t.\u0275cmp=a.Xpm({type:t,selectors:[["datatable-footer"]],inputs:{hidePerPage:"hidePerPage"},decls:9,vars:8,consts:[["class","page-size",4,"ngIf"],[1,"range-actions"],["class","range-label",4,"ngIf"],["type","button","mat-icon-button","",1,"range-button",3,"disabled","click"],["svgIcon","chevron-left"],["svgIcon","chevron-right"],[1,"page-size"],["trans","",1,"page-size-label"],[1,"input-container"],[1,"page-size-input",3,"formControl"],[3,"ngValue"],[1,"range-label"]],template:function(t,e){1&t&&(a.YNc(0,p,15,6,"div",0),a.TgZ(1,"div",1),a.YNc(2,g,4,8,"div",2),a.TgZ(3,"button",3),a.NdJ("click",function(){return e.previousPage()}),a.ALo(4,"async"),a._UZ(5,"mat-icon",4),a.qZA(),a.TgZ(6,"button",3),a.NdJ("click",function(){return e.nextPage()}),a.ALo(7,"async"),a._UZ(8,"mat-icon",5),a.qZA(),a.qZA()),2&t&&(a.Q6J("ngIf",!e.hidePerPage),a.xp6(2),a.Q6J("ngIf",e.from&&e.to&&e.totalRecords),a.xp6(1),a.Q6J("disabled",!e.havePrevious||a.lcZ(4,4,e.datable.paginator.loading$)),a.xp6(3),a.Q6J("disabled",!e.haveNext||a.lcZ(7,6,e.datable.paginator.loading$)))},directives:[c.O5,l.lW,h.Hw,d.P,n.EJ,n.JJ,n.oH,n.YN,n.Kr],pipes:[c.Ov,u.R,c.JJ],styles:["[_nghost-%COMP%]{display:flex;padding:0 8px;align-items:center;justify-content:flex-end;flex-wrap:wrap-reverse;width:100%;height:56px}.page-size[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:8px}.page-size-label[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--be-secondary-text);margin:0 4px}.input-container[_ngcontent-%COMP%]{width:auto}.page-size-input[_ngcontent-%COMP%]{width:60px;height:33px;padding:4px;margin:0 4px}.range-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.range-label[_ngcontent-%COMP%]{color:var(--be-secondary-text);margin:0 32px 0 24px;font-size:1.2rem}.range-button[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.range-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:28px;height:28px;line-height:28px}"],changeDetection:0}),t})()},58193:function(t,e,i){i.d(e,{x:function(){return b}});var n=i(38583),s=i(76627),o=i(49866),a=i(7539),r=i(3679),c=i(51095),l=i(58341),h=i(12178),d=i(87738),u=i(95217),p=i(98097),g=i(6253),m=i(24668),f=i(37716);let b=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[n.ez,o.N,r.UX,r.u5,d.G,u.u,p.X,g.B,m.Bz,c.ot,s.Ps,a.p9,l.Hi,h.Cv],a.p9]}),t})()},65987:function(t,e,i){i.d(e,{x:function(){return I}});var n=i(26215),s=i(90739),o=i(61927),a=i(88371),r=i(54395),c=i(88002),l=i(59328),h=i(45435),d=i(93342),u=i(84889),p=i(8208);const g={title:"Delete :resource",body:"Are you sure you want to delete selected :resource?",ok:"Delete"};var m=i(80970),f=i(39490);function b(t,e){const i=m.pick(e,t);if((0,f.t6)(i)){const t=Number(i);return t<9007199254740991?t:i}return i}function v(t,e){return t.filter(t=>function(t,e){const i="string"==typeof t?t:x(t),n=e.trim().toLowerCase();return-1!==i.indexOf(n)}(t,e))}function x(t){return Object.keys(t).reduce((e,i)=>e+(t[i]&&"object"==typeof t[i]?x(t[i]):t[i])+"\u25ec","").toLowerCase()}var _=i(3679),w=i(37716),y=i(15381),C=i(24668),Z=i(90299),k=i(90962);let I=(()=>{class t{constructor(t,e,i,s){this.modal=t,this.router=e,this.http=i,this.localStorage=s,this.sort$=new n.X({}),this.filters$=new n.X({}),this.searchControl=new _.NI,this.searchTerm$=new n.X(null),this.staticParams$=new n.X({}),this.paginator=new a.D(this.router,this.http,this.localStorage),this.ignoreNextParamChange=!1,this.originalData$=new n.X([]),this.data$=new n.X([]),this.selectedRows$=new n.X([])}get data(){return this.data$.value}set data(t){const e=[...t];this.originalData$.next(e),this.data$.next(e),this.ignoreNextParamChange=!0,this.reset()}init(t={}){if(this.config=t,this.staticParams$.next(Object.assign(Object.assign({},this.staticParams$.value),t.staticParams)),t.uri?this.connectToPaginator():t.initialData&&(this.data=t.initialData),t.uri){const t=this.router.routerState.root.snapshot.queryParams,e=t.query;this.searchControl.setValue(e),this.searchTerm$.next(e),this.sort$.next({orderBy:t.orderBy,orderDir:t.orderDir})}return this.searchControlSub=this.searchControl.valueChanges.pipe((0,r.b)(300)).subscribe(t=>{this.searchTerm$.next(t)}),this.mainSub=(0,s.aj)([this.sort$,this.filters$,this.searchTerm$.pipe((0,c.U)(t=>({query:t}))),this.staticParams$]).pipe((0,r.b)(0,o.Z),(0,c.U)(t=>Object.assign({},...t))).subscribe(t=>{if(this.ignoreNextParamChange)return this.ignoreNextParamChange=!1;t=(0,u.N)(t),Object.entries(t).forEach(([e,i])=>{"object"==typeof i&&i.id&&(t[`${e}Id`]=i.id,delete t[e])}),this.config.uri?this.paginator.paginate(t,this.config.uri,this.config.initialData):Object.keys(t).length&&this.data.length&&this.applyLocalTransforms(t)}),this}connectToPaginator(){this.paginatorSub=this.paginator.response$.pipe((0,l.G)()).subscribe(([t,e])=>{var i;const n=this.config.infiniteScroll&&(null===(i=null==t?void 0:t.pagination)||void 0===i?void 0:i.current_page)!==e.pagination.current_page?[...this.data$.value,...e.pagination.data]:e.pagination.data;this.data$.next(n)})}applyLocalTransforms(t){let e=[...this.originalData$.value];t.query&&(e=v(e,t.query)),t.orderBy&&t.orderDir&&(e=function(t,e,i){return t.sort((t,n)=>{let s=b(t,e),o=b(n,e);const a=typeof s,r=typeof o;a!==r&&("number"===a&&(s+=""),"number"===r&&(o+=""));let c=0;return null!=s&&null!=o?s>o?c=1:s<o&&(c=-1):null!=s?c=1:null!=o&&(c=-1),c*("asc"===i?1:-1)})}(e,t.orderBy,t.orderDir)),this.data$.next(e)}addFilter(t,e){this.filters$.next(Object.assign(Object.assign({},this.filters$.value),{[t]:e}))}removeFilter(t){const e=Object.assign({},this.filters$.value);delete e[t],this.filters$.next(e)}reset(t=null){this.filters$.next({}),this.sort$.next({}),this.selectedRows$.next([]),t&&this.staticParams$.next(t)}openCrupdateResourceModal(t,e,i){return this.modal.open(t,e,i).beforeClosed().pipe((0,h.h)(t=>!!t),(0,d.b)(()=>this.reset()))}confirmResourceDeletion(t){const e=Object.assign(Object.assign({},g),{replacements:{resource:t}});return this.modal.open(p.z,e).afterClosed().pipe((0,h.h)(t=>t))}getCurrentParams(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.sort$.value),this.filters$.value),this.staticParams$.value),this.paginator.params)}destroy(){var t,e,i;null===(t=this.paginatorSub)||void 0===t||t.unsubscribe(),null===(e=this.mainSub)||void 0===e||e.unsubscribe(),null===(i=this.searchControlSub)||void 0===i||i.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(w.LFG(y.u),w.LFG(C.F0),w.LFG(Z.r),w.LFG(k.m))},t.\u0275prov=w.Yz7({token:t,factory:t.\u0275fac}),t})()},44291:function(t,e,i){i.d(e,{f:function(){return Z},o:function(){return k}});var n=i(37716),s=i(26215),o=i(9778),a=i(38583),r=i(19056);function c(t,e){1&t&&n._UZ(0,"default-preview",2)}function l(t,e){if(1&t&&(n.TgZ(0,"div",3),n.TgZ(1,"pre"),n._uU(2),n.ALo(3,"async"),n.qZA(),n.qZA()),2&t){const t=n.oxw();n.xp6(2),n.Oqu(n.lcZ(3,1,t.content$))}}let h=(()=>{class t extends o.f{constructor(){super(...arguments),this.content$=new s.X(""),this.fileTooLarge$=new s.X(!1)}ngOnInit(){this.file.file_size>5242880?this.fileTooLarge$.next(!0):this.loadFileContents()}loadFileContents(){this.getContents().subscribe(t=>{this.content$.next(t)})}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=n.n5z(t)))(i||t)}}(),t.\u0275cmp=n.Xpm({type:t,selectors:[["text-preview"]],features:[n.qOj],decls:4,vars:4,consts:[["message","This file is too large to preview.",4,"ngIf","ngIfElse"],["textPreview",""],["message","This file is too large to preview."],[1,"text-wrapper","preview-object"]],template:function(t,e){if(1&t&&(n.YNc(0,c,1,0,"default-preview",0),n.ALo(1,"async"),n.YNc(2,l,4,3,"ng-template",null,1,n.W1O)),2&t){const t=n.MAs(3);n.Q6J("ngIf",n.lcZ(1,2,e.fileTooLarge$))("ngIfElse",t)}},directives:[a.O5,r.u],pipes:[a.Ov],styles:["[_nghost-%COMP%]{display:block;width:80%;min-height:80%}@media only screen and (max-width: 768px){[_nghost-%COMP%]{width:90%}}.text-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;background-color:var(--be-background);box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px rgba(0,0,0,.141),0 1px 8px rgba(0,0,0,.122);border-radius:4px;color:var(--be-text);word-wrap:break-word;padding:20px;overflow:auto}pre[_ngcontent-%COMP%]{display:block;white-space:pre-wrap;word-wrap:break-word;margin:0;font-size:1.4rem;font-family:inherit}default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),t})();const d=["playerEl"];function u(t,e){1&t&&n._UZ(0,"default-preview")}let p=(()=>{class t extends o.f{constructor(){super(...arguments),this.invalidMedia=!1}ngOnInit(){if(this.invalidMedia=!this.canPlayVideo(),!this.invalidMedia){const t=document.createElement("source");t.src=this.getSrc(),t.type=this.file.mime,this.player().appendChild(t),this.player().play()}}canPlayVideo(){return!!this.player().canPlayType(this.file.mime)}player(){return this.playerEl.nativeElement}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=n.n5z(t)))(i||t)}}(),t.\u0275cmp=n.Xpm({type:t,selectors:[["audio-preview"]],viewQuery:function(t,e){if(1&t&&n.Gf(d,7),2&t){let t;n.iGM(t=n.CRH())&&(e.playerEl=t.first)}},features:[n.qOj],decls:3,vars:3,consts:[["controls","controls","controlsList","nodownload noremoteplayback",1,"preview-object"],["playerEl",""],[4,"ngIf"]],template:function(t,e){1&t&&(n._UZ(0,"audio",0,1),n.YNc(2,u,1,0,"default-preview",2)),2&t&&(n.ekj("hidden",e.invalidMedia),n.xp6(2),n.Q6J("ngIf",e.invalidMedia))},directives:[a.O5,r.u],styles:["[_nghost-%COMP%]{display:block;max-width:80%;height:auto;margin-bottom:40px}@media only screen and (max-width: 768px){[_nghost-%COMP%]{width:90%}}audio[_ngcontent-%COMP%]{display:block;max-width:100%;margin:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px rgba(0,0,0,.141),0 1px 8px rgba(0,0,0,.122);position:absolute;top:0;left:0;right:0;bottom:0;max-height:60px}default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),t})();function g(t,e){1&t&&n._UZ(0,"default-preview")}let m=(()=>{class t extends p{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=n.n5z(t)))(i||t)}}(),t.\u0275cmp=n.Xpm({type:t,selectors:[["video-preview"]],features:[n.qOj],decls:3,vars:3,consts:[["controls","controls","type","video/mp4","controlsList","nodownload noremoteplayback","playsinline","",1,"preview-object"],["playerEl",""],[4,"ngIf"]],template:function(t,e){1&t&&(n._UZ(0,"video",0,1),n.YNc(2,g,1,0,"default-preview",2)),2&t&&(n.ekj("hidden",e.invalidMedia),n.xp6(2),n.Q6J("ngIf",e.invalidMedia))},directives:[a.O5,r.u],styles:["[_nghost-%COMP%]{display:block;max-width:100%;max-height:100%;height:auto;margin-bottom:40px}@media only screen and (max-width: 768px){[_nghost-%COMP%]{width:90%}}video[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;height:auto;margin:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px rgba(0,0,0,.141),0 1px 8px rgba(0,0,0,.122);position:absolute;top:0;left:0;right:0;bottom:0}default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}"],changeDetection:0}),t})(),f=(()=>{class t extends o.f{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=n.n5z(t)))(i||t)}}(),t.\u0275cmp=n.Xpm({type:t,selectors:[["image-preview"]],features:[n.qOj],decls:1,vars:1,consts:[[1,"preview-object",3,"src"]],template:function(t,e){1&t&&n._UZ(0,"img",0),2&t&&n.Q6J("src",e.getSafeSrc(),n.LSH)},styles:["[_nghost-%COMP%]{display:block;max-width:100%;max-height:100%;height:auto;margin-bottom:40px}@media only screen and (max-width: 768px){[_nghost-%COMP%]{width:90%}}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;height:auto;margin:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px rgba(0,0,0,.141),0 1px 8px rgba(0,0,0,.122);position:absolute;top:0;left:0;right:0;bottom:0;background-color:var(--be-background)}"],changeDetection:0}),t})(),b=(()=>{class t extends o.f{constructor(){super(...arguments),this.className="preview-object"}getSrc(){return super.getSrc()+"#toolbar=0"}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=n.n5z(t)))(i||t)}}(),t.\u0275cmp=n.Xpm({type:t,selectors:[["pdf-preview"]],hostVars:2,hostBindings:function(t,e){2&t&&n.Tol(e.className)},features:[n.qOj],decls:1,vars:1,consts:[[3,"src"]],template:function(t,e){1&t&&n._UZ(0,"iframe",0),2&t&&n.Q6J("src",e.getSafeSrc(),n.uOi)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}object[_ngcontent-%COMP%], iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:none}"],changeDetection:0}),t})();var v=i(24890),x=i(20616);const _=["iframe"];function w(t,e){if(1&t){const t=n.EpF();n.ynx(0),n._UZ(1,"iframe",3,4),n.TgZ(3,"div",5),n.NdJ("click",function(){return n.CHM(t),n.oxw().openInNewWindow()}),n.qZA(),n.BQk()}}function y(t,e){1&t&&n._UZ(0,"default-preview")}let C=(()=>{class t extends o.f{constructor(){super(...arguments),this.loading$=new s.X(!0),this.showDefaultPreview$=new s.X(!1)}ngAfterViewInit(){if(this.file.file_size>25e6)return this.showDefaultPreview();this.iframe.nativeElement.onload=()=>{clearTimeout(this.timeoutRef),this.stopLoading()},this.getIframeSrc().then(t=>{this.iframe.nativeElement.src=t}).catch(()=>{this.showDefaultPreview()}),this.timeoutRef=setTimeout(()=>{this.showDefaultPreview()},5e3)}stopLoading(){this.loading$.next(!1)}showDefaultPreview(){this.stopLoading(),this.showDefaultPreview$.next(!0)}openInNewWindow(){window.open(window.location.href,"_blank")}getIframeSrc(){return new Promise((t,e)=>{let i=this.getSrc();-1===i.indexOf("shareable_link")?this.http.post(`uploads/${this.file.id}/add-preview-token`).subscribe(e=>{i+=`?preview_token=${e.preview_token}`,t(this.getFullPreviewUrl(i))},()=>e):t(this.getFullPreviewUrl(i))})}getFullPreviewUrl(t){return t=(0,v.s)(t)?t:this.settings.getBaseUrl()+"/"+t,"https://view.officeapps.live.com/op/embed.aspx?src="+encodeURIComponent(t)}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=n.n5z(t)))(i||t)}}(),t.\u0275cmp=n.Xpm({type:t,selectors:[["google-docs-viewer"]],viewQuery:function(t,e){if(1&t&&n.Gf(_,5),2&t){let t;n.iGM(t=n.CRH())&&(e.iframe=t.first)}},features:[n.qOj],decls:6,vars:7,consts:[[4,"ngIf","ngIfElse"],["defaultPreview",""],[1,"overlay",3,"isVisible"],[1,"preview-object"],["iframe",""],[1,"pop-out-block","office-block",3,"click"]],template:function(t,e){if(1&t&&(n.YNc(0,w,4,0,"ng-container",0),n.ALo(1,"async"),n.YNc(2,y,1,0,"ng-template",null,1,n.W1O),n._UZ(4,"loading-indicator",2),n.ALo(5,"async")),2&t){const t=n.MAs(3);n.Q6J("ngIf",!n.lcZ(1,3,e.showDefaultPreview$))("ngIfElse",t),n.xp6(4),n.Q6J("isVisible",n.lcZ(5,5,e.loading$))}},directives:[a.O5,x.Q,r.u],pipes:[a.Ov],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:none}loading-indicator.overlay[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:transparent}default-preview[_ngcontent-%COMP%]{margin:auto;position:absolute;top:0;left:0;right:0;bottom:0}.pop-out-block[_ngcontent-%COMP%]{position:absolute;right:12px;cursor:pointer}.office-block[_ngcontent-%COMP%]{width:25px;height:25px;bottom:0}.gdocs-block[_ngcontent-%COMP%]{width:40px;height:40px;top:12px}"],changeDetection:0}),t})();const Z=new n.OlP("AVAILABLE_PREVIEWS");let k=(()=>{class t{constructor(){this.text=h,this.video=m,this.audio=p,this.image=f,this.pdf=b,this.spreadsheet=C,this.powerPoint=C,this.word=C,this["text/rtf"]=r.u}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t})()},9778:function(t,e,i){i.d(e,{f:function(){return h}});var n=i(37716),s=i(74537),o=i(93961),a=i(34673),r=i(90299),c=i(39075),l=i(24688);let h=(()=>{class t{constructor(t,e,i,s,o,a){this.file=t,this.transformer=e,this.settings=i,this.http=s,this.sanitizer=o,this.currentUser=a,this.filePreviewWrapper=!0,this.download=new n.vpe}getSrc(){return this.transformer(this.file)}getSafeSrc(){return this.sanitizer.bypassSecurityTrustResourceUrl(this.getSrc())}getContents(){return this.http.get(this.getSrc(),null,{responseType:"text"})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(s.w),n.Y36(o.n),n.Y36(a.Z),n.Y36(r.r),n.Y36(c.H7),n.Y36(l.I))},t.\u0275dir=n.lG2({type:t,hostVars:2,hostBindings:function(t,e){2&t&&n.ekj("file-preview-wrapper",e.filePreviewWrapper)}}),t})()},74537:function(t,e,i){i.d(e,{w:function(){return n}});const n=new(i(37716).OlP)("CURRENT_PREVIEW_FILE")},19056:function(t,e,i){i.d(e,{u:function(){return h}});var n=i(9778),s=i(37716),o=i(38583),a=i(51095),r=i(15515),c=i(63297);function l(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",3),s.NdJ("click",function(){return s.CHM(t),s.oxw().download.emit()}),s._uU(1,"Download"),s.qZA()}}let h=(()=>{class t extends n.f{getMessage(){return this.message||"No file preview available."}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(t)))(i||t)}}(),t.\u0275cmp=s.Xpm({type:t,selectors:[["default-preview"]],inputs:{message:"message"},features:[s.qOj],decls:5,vars:4,consts:[[1,"panel","preview-object"],[1,"message"],["mat-raised-button","","color","accent","trans","",3,"click",4,"ngIf"],["mat-raised-button","","color","accent","trans","",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s._uU(2),s.ALo(3,"trans"),s.qZA(),s.YNc(4,l,2,0,"button",2),s.qZA()),2&t&&(s.xp6(2),s.Oqu(s.lcZ(3,2,e.getMessage())),s.xp6(2),s.Q6J("ngIf",e.download.observers.length))},directives:[o.O5,a.lW,r.P],pipes:[c.R],styles:["[_nghost-%COMP%]{display:block;max-width:380px;max-height:150px}.panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:var(--be-background);color:var(--be-text);border-radius:4px;width:100%;height:100%;margin:auto;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px rgba(0,0,0,.141),0 1px 8px rgba(0,0,0,.122)}.message[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:15px}.mat-raised-button[_ngcontent-%COMP%]{display:block}"],changeDetection:0}),t})()},37989:function(t,e,i){i.d(e,{T:function(){return u}});var n=i(26215),s=i(79765),o=i(44291),a=i(87636),r=i(74537),c=i(19056),l=i(45435),h=i(93961),d=i(37716);let u=(()=>{class t{constructor(t,e){this.availablePreviews=t,this.injector=e,this.files=[],this.portal=new n.X(null),this.meta=new n.X({}),this.previewUriTransformer=null,this.download=new s.xQ}pagination(){return this.meta.pipe((0,l.h)(t=>t&&!!t.entry))}getCurrent(){return this.meta.value.entry}getAllEntries(){return this.files}getPortal(){return this.portal.asObservable()}showNext(){!this.meta.value.haveNext||(this.updateMeta("next"),this.updatePortal())}showPrevious(){!this.meta.value.havePrevious||(this.updateMeta("previous"),this.updatePortal())}updateMeta(t){let e=0;if("string"==typeof t){const i=this.meta.value.pointer;e="next"===t?i+1:i-1}else"number"==typeof t&&(e=t);this.meta.next({pointer:e,entry:this.files[e],total:this.files.length,haveNext:e+1<this.files.length,havePrevious:e-1>-1})}updatePortal(){const t=this.getCurrent();this.portal.next(new a.C5(this.availablePreviews[null==t?void 0:t.mime]||this.availablePreviews[null==t?void 0:t.type]||c.u,null,this.createInjector()))}set(t,e){!t||0===t.length||(this.files=t.filter(t=>"folder"!==t.type),this.updateMeta(e),this.updatePortal())}createInjector(){const t=new WeakMap;return t.set(r.w,this.getCurrent()),this.previewUriTransformer&&t.set(h.n,this.previewUriTransformer),new a.nK(this.injector,t)}destroy(){this.meta.next({}),this.files=null,this.portal.next(null)}setPreviewUriTransformer(t){this.previewUriTransformer=t}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(o.f),d.LFG(d.zs3))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},93961:function(t,e,i){i.d(e,{n:function(){return n}});const n=new(i(37716).OlP)("PREVIEW_URL_TRANSFORMER",{factory:()=>t=>t.url,providedIn:"root"})},82192:function(t,e,i){i.d(e,{d:function(){return R}});var n=i(64762),s=i(37716),o=i(34673),a=i(35402),r=i(96605),c=i(19244);let l=(()=>{class t{constructor(t,e,i,n,s){this.settings=t,this.zone=e,this.lazyLoader=i,this.breakpoints=n,this.i18n=s,this.makeBootstrapPromise()}reset(){!this.editorIsReady()||(this.tinymceInstance.setContent(""),this.tinymceInstance.undoManager.clear())}focus(){this.waitForEditor().then(()=>{this.tinymceInstance.focus(!1)})}hasUndo(){return this.editorIsReady()&&this.tinymceInstance.undoManager.hasUndo()}hasRedo(){return this.editorIsReady()&&this.tinymceInstance.undoManager.hasRedo()}queryCommandState(t){return this.editorIsReady()&&this.tinymceInstance.queryCommandState(t)}execCommand(t,e=null){this.waitForEditor().then(()=>{this.zone.run(()=>{this.tinymceInstance.execCommand(t,!1,e)})})}getContents(t){return this.editorIsReady()?this.tinymceInstance.getContent(t):""}setContents(t){this.waitForEditor().then(()=>{!this.tinymceInstance.undoManager||(this.tinymceInstance.undoManager.transact(()=>{this.tinymceInstance.setContent(t)}),this.tinymceInstance.selection.setCursorLocation(),this.tinymceInstance.nodeChanged(),this.tinymceInstance.execCommand("mceResize"))})}insertContents(t){this.waitForEditor().then(()=>{this.tinymceInstance.execCommand("mceInsertContent",!1,t),setTimeout(()=>this.tinymceInstance.selection.collapse())})}insertImage(t){this.waitForEditor().then(()=>{this.insertContents('<img src="'+t+'"/>'),setTimeout(()=>this.execCommand("mceAutoResize"),500)})}waitForEditor(){return this.tinymceInstance?new Promise(t=>t(this.tinymceInstance)):this.bootstrapPromise?this.bootstrapPromise:void 0}setConfig(t){this.config=t,this.loadTinymce().then(()=>{this.initTinymce()})}editorIsReady(){return!this.bootstrapPromise&&!!this.tinymceInstance&&!!this.tinymceInstance.undoManager}loadTinymce(){return this.lazyLoader.loadAsset("js/tinymce/tinymce.min.js",{type:"js"})}initTinymce(){const t={target:this.config.textAreaEl.nativeElement,plugins:["link","codesample","paste","autoresize"],branding:!1,browser_spellcheck:!0,max_height:this.config.maxHeight,min_height:this.config.minHeight,autoresize_on_init:!1,paste_as_text:!0,elementpath:!1,statusbar:!1,entity_encoding:"raw",menubar:!1,toolbar:!1,convert_urls:!1,forced_root_block:!1,document_base_url:document.baseURI,element_format:"html",body_class:"editor-body",content_style:'html {font-size: 62.5%;}\n.editor-body {font-size: 1.4rem;font-family: "Roboto", "Helvetica Neue", sans-serif;color: rgba(0, 0, 0, .87);}\nimg {max-width: 100%}\ncode[class*=language-], pre[class*=language-] {font-size: inherit;} .mce-preview-object {border: none;}',content_css:["https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic"],default_link_target:"_blank",link_assume_external_targets:!0,target_list:!1,link_title:!1,image_dimensions:!1,image_description:!1,setup:t=>{this.tinymceInstance=t,t.on("change",()=>this.config.onChange.emit(t.getContent())),t.on("click",()=>{this.zone.run(()=>{})})},init_instance_callback:t=>{this.bootstrapPromise=!1,this.bootstrapPromiseResolve(this.tinymceInstance);const e=()=>{this.zone.run(()=>{this.config.onChange.emit(t.getContent()),this.config.onCtrlEnter.emit()})};t.shortcuts.add("ctrl+13","desc",e),window.navigator.platform.toLowerCase().includes("mac")&&t.shortcuts.add("meta+13","desc",e)}};if(this.config.showAdvancedControls&&(t.plugins=t.plugins.concat(["media","hr","visualblocks","visualchars","wordcount"]),t.forced_root_block="p",t.statusbar=!0,t.autoresize_on_init=!0,t.extended_valid_elements="svg[*],use[*],iframe[src|frameborder|width|height|allow=*|allowfullscreen],script[src]",t.elementpath=!0,t.content_css.push(this.settings.getAssetUrl()+"css/advanced-editor-styles.css"),t.target_list=[{title:this.i18n.t("Current window"),value:""},{title:this.i18n.t("New Window"),value:"_blank"}],t.codesample_languages=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"Shell",value:"shell-session"},{text:"Bash",value:"bash"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}]),"auto"===this.config.minHeight){const e=this.config.editorEl.nativeElement.parentElement.offsetHeight-74-4;t.min_height=e,t.max_height=e}tinymce.init(t)}destroyEditor(){try{this.tinymceInstance&&this.tinymceInstance.remove(),this.tinymceInstance=null,this.makeBootstrapPromise()}catch(t){}}makeBootstrapPromise(){this.bootstrapPromise=new Promise(t=>this.bootstrapPromiseResolve=t)}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(o.Z),s.LFG(s.R0b),s.LFG(a.j),s.LFG(r.S),s.LFG(c.Z))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var h=i(56313),d=i(9141),u=i(53534),p=i(75978),g=i(13913),m=i(3679),f=i(54395),b=i(48976),v=i(24688),x=i(7964),_=i(18715),w=i(68756),y=i(16850),C=i(82655);let Z=(()=>{class t extends _.c{constructor(){super(...arguments),this.DEFAULT_MAX_SIZE_MB=3}initValidations(){const t=[new w.p({maxSize:(0,y.F)(this.DEFAULT_MAX_SIZE_MB,"MB")},this.i18n),new C.p({types:["image"]},this.i18n)];this.validations.push(...t)}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=s.n5z(t)))(i||t)}}(),t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var k=i(38583),I=i(11436),A=i(76627),T=i(33935),P=i(15515),M=i(63297);const O=["visualArea"],q=["sourceArea"];function S(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",3),s.TgZ(1,"button",4),s.NdJ("click",function(){return s.CHM(t),s.oxw().openFileUploadDialog()}),s.ALo(2,"trans"),s._UZ(3,"mat-icon",19),s.qZA(),s.qZA()}2&t&&(s.xp6(1),s.Q6J("matTooltip",s.lcZ(2,1,"Add Attachment")))}function E(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",3),s.TgZ(1,"button",4),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("codesample")}),s.ALo(2,"trans"),s._UZ(3,"mat-icon",20),s.qZA(),s.qZA()}2&t&&(s.xp6(1),s.Q6J("matTooltip",s.lcZ(2,1,"Insert Code Sample")))}function F(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",23),s.NdJ("click",function(){return s.CHM(t),s.oxw(2).openInsertImageModal()}),s.ALo(1,"trans"),s._UZ(2,"mat-icon",24),s.qZA()}2&t&&s.Q6J("matTooltip",s.lcZ(1,1,"Insert Image"))}function U(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",3),s.TgZ(1,"button",4),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("mceLink")}),s.ALo(2,"trans"),s._UZ(3,"mat-icon",21),s.qZA(),s.YNc(4,F,3,3,"button",22),s.qZA()}if(2&t){const t=s.oxw();s.xp6(1),s.ekj("active",t.queryCommandState("link")),s.Q6J("matTooltip",s.lcZ(2,4,"Insert Link")),s.xp6(3),s.Q6J("ngIf",t.currentUser.hasPermission("files.create"))}}function L(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",1),s.TgZ(1,"div",3),s.TgZ(2,"button",25),s.TgZ(3,"span",26),s._uU(4,"Insert"),s.qZA(),s._UZ(5,"mat-icon",27),s.qZA(),s.TgZ(6,"mat-menu",null,28),s.TgZ(8,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("InsertHorizontalRule")}),s._UZ(9,"mat-icon",30),s.TgZ(10,"span",26),s._uU(11,"Horizontal Line"),s.qZA(),s.qZA(),s.TgZ(12,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("mceLink")}),s._UZ(13,"mat-icon",21),s.TgZ(14,"span",26),s._uU(15,"Link"),s.qZA(),s.qZA(),s.TgZ(16,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("mceMedia")}),s._UZ(17,"mat-icon",31),s.TgZ(18,"span",26),s._uU(19,"Media"),s.qZA(),s.qZA(),s.TgZ(20,"div",32),s.NdJ("click",function(){return s.CHM(t),s.oxw().insertInfoContainer("important")}),s._UZ(21,"mat-icon",33),s.TgZ(22,"span",26),s._uU(23,"Important"),s.qZA(),s.qZA(),s.TgZ(24,"div",32),s.NdJ("click",function(){return s.CHM(t),s.oxw().insertInfoContainer("warning")}),s._UZ(25,"mat-icon",34),s.TgZ(26,"span",26),s._uU(27,"Warning"),s.qZA(),s.qZA(),s.TgZ(28,"div",32),s.NdJ("click",function(){return s.CHM(t),s.oxw().insertInfoContainer("note")}),s._UZ(29,"mat-icon",35),s.TgZ(30,"span",26),s._uU(31,"Note"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(32,"div",3),s.TgZ(33,"button",36),s.TgZ(34,"span",26),s._uU(35,"Format"),s.qZA(),s._UZ(36,"mat-icon",27),s.qZA(),s.TgZ(37,"mat-menu",37,38),s.TgZ(39,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("FormatBlock","h1")}),s.TgZ(40,"div",39),s._uU(41,"Heading 1"),s.qZA(),s.TgZ(42,"div",40),s._uU(43,"Alt+Shift+1"),s.qZA(),s.qZA(),s.TgZ(44,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("FormatBlock","h2")}),s.TgZ(45,"div",39),s._uU(46,"Heading 2"),s.qZA(),s.TgZ(47,"div",40),s._uU(48,"Alt+Shift+2"),s.qZA(),s.qZA(),s.TgZ(49,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("FormatBlock","h3")}),s.TgZ(50,"div",39),s._uU(51,"Heading 3"),s.qZA(),s.TgZ(52,"div",40),s._uU(53,"Alt+Shift+3"),s.qZA(),s.qZA(),s.TgZ(54,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("FormatBlock","h4")}),s.TgZ(55,"div",39),s._uU(56,"Heading 4"),s.qZA(),s.TgZ(57,"div",40),s._uU(58,"Alt+Shift+4"),s.qZA(),s.qZA(),s.TgZ(59,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("FormatBlock","code")}),s.TgZ(60,"div",39),s._uU(61,"Code"),s.qZA(),s.qZA(),s.TgZ(62,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("strikethrough")}),s.TgZ(63,"div",39),s._uU(64,"Strikethrough"),s.qZA(),s.qZA(),s.TgZ(65,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("superscript")}),s.TgZ(66,"div",39),s._uU(67,"Superscript"),s.qZA(),s.qZA(),s.TgZ(68,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("subscript")}),s.TgZ(69,"div",39),s._uU(70,"Subscript"),s.qZA(),s.qZA(),s.TgZ(71,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("mceBlockQuote")}),s.TgZ(72,"div",39),s._uU(73,"Blockquote"),s.qZA(),s.qZA(),s.TgZ(74,"div",29),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("FormatBlock","p")}),s.TgZ(75,"div",39),s._uU(76,"Paragraph"),s.qZA(),s.TgZ(77,"div",40),s._uU(78,"Ctrl+Shift+7"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(79,"div",3),s.TgZ(80,"button",41,42),s.TgZ(82,"span",26),s._uU(83,"Color"),s.qZA(),s._UZ(84,"mat-icon",27),s.qZA(),s.TgZ(85,"mat-menu",43,44),s.TgZ(87,"div",45),s.NdJ("click",function(){s.CHM(t);const e=s.MAs(81);return s.oxw().showColorPicker("ForeColor",e)}),s._UZ(88,"mat-icon",46),s.TgZ(89,"span",26),s._uU(90,"Text Color"),s.qZA(),s.qZA(),s.TgZ(91,"div",47),s.NdJ("click",function(){s.CHM(t);const e=s.MAs(81);return s.oxw().showColorPicker("HiliteColor",e)}),s._UZ(92,"mat-icon",48),s.TgZ(93,"span",26),s._uU(94,"Background Color"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(95,"div",3),s.TgZ(96,"button",4),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("justifyLeft")}),s.ALo(97,"trans"),s._UZ(98,"mat-icon",49),s.qZA(),s.TgZ(99,"button",4),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("justifyCenter")}),s.ALo(100,"trans"),s._UZ(101,"mat-icon",50),s.qZA(),s.TgZ(102,"button",4),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("justifyRight")}),s.ALo(103,"trans"),s._UZ(104,"mat-icon",51),s.qZA(),s.qZA(),s.TgZ(105,"div",3),s.TgZ(106,"button",4),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("Outdent")}),s.ALo(107,"trans"),s._UZ(108,"mat-icon",52),s.qZA(),s.TgZ(109,"button",4),s.NdJ("click",function(){return s.CHM(t),s.oxw().execCommand("Indent")}),s.ALo(110,"trans"),s._UZ(111,"mat-icon",53),s.qZA(),s.qZA(),s.TgZ(112,"div",54),s.TgZ(113,"button",55),s.NdJ("click",function(){return s.CHM(t),s.oxw().showVisualEditor()}),s._uU(114,"Visual "),s.qZA(),s.TgZ(115,"button",56),s.NdJ("click",function(){return s.CHM(t),s.oxw().showSourceEditor()}),s._uU(116,"Source "),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.MAs(7),e=s.MAs(38),i=s.MAs(86),n=s.oxw();s.xp6(2),s.Q6J("matMenuTriggerFor",t),s.xp6(31),s.Q6J("matMenuTriggerFor",e),s.xp6(47),s.Q6J("matMenuTriggerFor",i),s.xp6(16),s.ekj("active",n.queryCommandState("justifyLeft")),s.Q6J("matTooltip",s.lcZ(97,18,"Align Left")),s.xp6(3),s.ekj("active",n.queryCommandState("justifyCenter")),s.Q6J("matTooltip",s.lcZ(100,20,"Center")),s.xp6(3),s.ekj("active",n.queryCommandState("justifyRight")),s.Q6J("matTooltip",s.lcZ(103,22,"Align Right")),s.xp6(4),s.Q6J("matTooltip",s.lcZ(107,24,"Decrease Indent")),s.xp6(3),s.Q6J("matTooltip",s.lcZ(110,26,"Increase Indent")),s.xp6(4),s.ekj("active","visual"===n.activeEditor),s.xp6(2),s.ekj("active","source"===n.activeEditor)}}const J=[[["","customButtons",""]],[["","header",""]],[["","footer",""]]],N=["[customButtons]","[header]","[footer]"];let R=(()=>{class t{constructor(t,e,i,n,o,a,r,c){this.editor=t,this.currentUser=e,this.uploadQueue=i,this.settings=n,this.renderer=o,this.el=a,this.overlayPanel=r,this.imageValidator=c,this.sourceAreaControl=new m.NI,this.activeEditor="visual",this.showAdvancedControls=!1,this.basic=!1,this.minHeight=183,this.maxHeight=530,this.onChange=new s.vpe,this.onCtrlEnter=new s.vpe,this.onFileUpload=new s.vpe}ngAfterViewInit(){this.bootTextEditor()}ngOnDestroy(){this.destroyEditor()}reset(){this.editor.reset()}focus(){this.editor.focus()}hasUndo(){return this.editor.hasUndo()}hasRedo(){return this.editor.hasRedo()}queryCommandState(t){return this.editor.queryCommandState(t)}execCommand(t,e=null){this.editor.execCommand(t,e)}insertInfoContainer(t){this.insertContents(`<div class="widget widget-${t}"><div class="title">${(0,g.z)(t)}:</div><br></div><br>`)}showColorPicker(t,e){return(0,n.mG)(this,void 0,void 0,function*(){const{BeColorPickerModule:n}=yield i.e(427).then(i.bind(i,75427));this.overlayPanel.open(n.components.panel,{origin:new s.SBq(e),position:p.x}).valueChanged().pipe((0,f.b)(50)).subscribe(e=>{this.execCommand(t,e)})})}showVisualEditor(){!this.editor.tinymceInstance.contentAreaContainer||"visual"===this.activeEditor||(this.activeEditor="visual",this.renderer.setStyle(this.editor.tinymceInstance.contentAreaContainer,"display","block"),this.renderer.setStyle(this.sourceTextArea.nativeElement,"display","none"),this.editor.focus())}showSourceEditor(){!this.editor.tinymceInstance.contentAreaContainer||"source"===this.activeEditor||(this.activeEditor="source",this.renderer.setStyle(this.sourceTextArea.nativeElement,"height",this.editor.tinymceInstance.contentAreaContainer.offsetHeight+"px"),this.renderer.setStyle(this.sourceTextArea.nativeElement,"display","block"),this.renderer.setStyle(this.editor.tinymceInstance.contentAreaContainer,"display","none"),this.sourceAreaControl.setValue(this.editor.getContents({source_view:!0})))}openFileUploadDialog(){(0,h.r)({multiple:!0}).then(t=>{this.onFileUpload.emit(t)})}openInsertImageModal(){const t={uri:b.C.Image,validator:this.imageValidator,httpParams:{diskPrefix:this.inlineUploadPrefix}};(0,h.r)({types:[u.j.image]}).then(e=>{this.uploadQueue.start(e,t).subscribe(t=>{this.insertImage(t.fileEntry.url)})})}getContents(){return this.editor.getContents()}setContents(t){this.editor.setContents(t)}insertContents(t){this.editor.insertContents(t)}insertImage(t){this.editor.insertImage(t)}insertLink(t){this.insertContents(`<a href="${t.href}" target="${t.target||"self"}">${t.text}</a>`)}destroyEditor(){this.editor.destroyEditor()}bootTextEditor(){this.editor.setConfig({textAreaEl:this.visualTextArea,editorEl:this.el,minHeight:this.minHeight,maxHeight:this.maxHeight,onChange:this.onChange,onCtrlEnter:this.onCtrlEnter,showAdvancedControls:this.showAdvancedControls})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(l),s.Y36(v.I),s.Y36(d.A),s.Y36(o.Z),s.Y36(s.Qsj),s.Y36(s.SBq),s.Y36(x.T),s.Y36(Z))},t.\u0275cmp=s.Xpm({type:t,selectors:[["text-editor"]],viewQuery:function(t,e){if(1&t&&(s.Gf(O,7),s.Gf(q,7)),2&t){let t;s.iGM(t=s.CRH())&&(e.visualTextArea=t.first),s.iGM(t=s.CRH())&&(e.sourceTextArea=t.first)}},inputs:{showAdvancedControls:"showAdvancedControls",basic:"basic",minHeight:"minHeight",maxHeight:"maxHeight",inlineUploadPrefix:"inlineUploadPrefix"},outputs:{onChange:"onChange",onCtrlEnter:"onCtrlEnter",onFileUpload:"onFileUpload"},features:[s._Bn([d.A,l])],ngContentSelectors:N,decls:41,vars:47,consts:[[1,"editor-header"],[1,"toolbar-row"],["class","header-actions",4,"ngIf"],[1,"header-actions"],["type","button",1,"no-style","editor-button",3,"matTooltip","click"],["svgIcon","undo"],["svgIcon","redo"],["svgIcon","format-bold"],["svgIcon","format-italic"],["svgIcon","format-underlined"],["svgIcon","format-list-bulleted"],["svgIcon","format-list-numbered"],[1,"header-actions","last"],["svgIcon","format-clear"],["class","toolbar-row",4,"ngIf"],["rows","8",1,"source-textarea",2,"display","none",3,"formControl","blur"],["sourceArea",""],["rows","8",1,"visual-textarea"],["visualArea",""],["svgIcon","attachment"],["svgIcon","code"],["svgIcon","link"],["type","button","class","no-style editor-button image-modal-button",3,"matTooltip","click",4,"ngIf"],["type","button",1,"no-style","editor-button","image-modal-button",3,"matTooltip","click"],["svgIcon","image"],["type","button",1,"no-style","editor-button","text-button","insert-button",3,"matMenuTriggerFor"],["trans",""],["svgIcon","arrow-drop-down",1,"caret"],["insertMenu",""],["mat-menu-item","",3,"click"],["svgIcon","remove"],["svgIcon","videocam"],["mat-menu-item","","trans","",3,"click"],["svgIcon","star"],["svgIcon","warning"],["svgIcon","note"],["type","button",1,"no-style","editor-button","text-button","format-button",3,"matMenuTriggerFor"],[1,"format-menu","menu-with-alt-text"],["formatMenu",""],["trans","",1,"text"],[1,"alt-text"],["type","button",1,"no-style","editor-button","text-button","color-button",3,"matMenuTriggerFor"],["colorPickerOrigin",""],[1,"color-dropdown"],["colorMenu",""],["mat-menu-item","",1,"text-color-item",3,"click"],["svgIcon","format-color-text"],["mat-menu-item","",1,"bg-color-item",3,"click"],["svgIcon","format-color-fill"],["svgIcon","format-align-left"],["svgIcon","format-align-center"],["svgIcon","format-align-right"],["svgIcon","format-indent-decrease"],["svgIcon","format-indent-increase"],[1,"header-actions","editor-toggle-buttons"],["type","button","trans","",1,"no-style","editor-button","visual-mode-button",3,"click"],["type","button","trans","",1,"no-style","editor-button","source-mode-button",3,"click"]],template:function(t,e){1&t&&(s.F$t(J),s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.YNc(2,S,4,3,"div",2),s.YNc(3,E,4,3,"div",2),s.TgZ(4,"div",3),s.TgZ(5,"button",4),s.NdJ("click",function(){return e.execCommand("undo")}),s.ALo(6,"trans"),s._UZ(7,"mat-icon",5),s.qZA(),s.TgZ(8,"button",4),s.NdJ("click",function(){return e.execCommand("redo")}),s.ALo(9,"trans"),s._UZ(10,"mat-icon",6),s.qZA(),s.qZA(),s.TgZ(11,"div",3),s.TgZ(12,"button",4),s.NdJ("click",function(){return e.execCommand("bold")}),s.ALo(13,"trans"),s._UZ(14,"mat-icon",7),s.qZA(),s.TgZ(15,"button",4),s.NdJ("click",function(){return e.execCommand("italic")}),s.ALo(16,"trans"),s._UZ(17,"mat-icon",8),s.qZA(),s.TgZ(18,"button",4),s.NdJ("click",function(){return e.execCommand("underline")}),s.ALo(19,"trans"),s._UZ(20,"mat-icon",9),s.qZA(),s.qZA(),s.TgZ(21,"div",3),s.TgZ(22,"button",4),s.NdJ("click",function(){return e.execCommand("insertunorderedlist")}),s.ALo(23,"trans"),s._UZ(24,"mat-icon",10),s.qZA(),s.TgZ(25,"button",4),s.NdJ("click",function(){return e.execCommand("insertorderedlist")}),s.ALo(26,"trans"),s._UZ(27,"mat-icon",11),s.qZA(),s.qZA(),s.YNc(28,U,5,6,"div",2),s.Hsn(29),s.TgZ(30,"div",12),s.TgZ(31,"button",4),s.NdJ("click",function(){return e.execCommand("removeformat")}),s.ALo(32,"trans"),s._UZ(33,"mat-icon",13),s.qZA(),s.qZA(),s.Hsn(34,1),s.qZA(),s.YNc(35,L,117,28,"div",14),s.qZA(),s.TgZ(36,"textarea",15,16),s.NdJ("blur",function(){return e.setContents(e.sourceAreaControl.value)}),s.qZA(),s._UZ(38,"textarea",17,18),s.Hsn(40,2)),2&t&&(s.xp6(2),s.Q6J("ngIf",e.inlineUploadPrefix&&e.currentUser.hasPermission("files.create")&&e.onFileUpload.observers.length),s.xp6(1),s.Q6J("ngIf",!e.basic),s.xp6(2),s.ekj("disabled",!e.hasUndo()),s.Q6J("matTooltip",s.lcZ(6,31,"Undo")),s.xp6(3),s.ekj("disabled",!e.hasRedo()),s.Q6J("matTooltip",s.lcZ(9,33,"Redo")),s.xp6(4),s.ekj("active",e.queryCommandState("bold")),s.Q6J("matTooltip",s.lcZ(13,35,"Bold")),s.xp6(3),s.ekj("active",e.queryCommandState("italic")),s.Q6J("matTooltip",s.lcZ(16,37,"Italic")),s.xp6(3),s.ekj("active",e.queryCommandState("underline")),s.Q6J("matTooltip",s.lcZ(19,39,"Underline")),s.xp6(4),s.ekj("active",e.queryCommandState("unorderedlist")),s.Q6J("matTooltip",s.lcZ(23,41,"Unordered List")),s.xp6(3),s.ekj("active",e.queryCommandState("orderedlist")),s.Q6J("matTooltip",s.lcZ(26,43,"Ordered List")),s.xp6(3),s.Q6J("ngIf",!e.basic),s.xp6(3),s.Q6J("matTooltip",s.lcZ(32,45,"Remove Formatting")),s.xp6(4),s.Q6J("ngIf",e.showAdvancedControls),s.xp6(1),s.Udp("min-height",e.minHeight),s.Q6J("formControl",e.sourceAreaControl),s.xp6(2),s.Udp("min-height",e.minHeight))},directives:[k.O5,I.gM,A.Hw,m.Fj,m.JJ,m.oH,T.p6,P.P,T.VK,T.OP],pipes:[M.R],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:218px;max-height:600px;position:relative;border:1px solid var(--be-divider-default);border-radius:4px;overflow:hidden}[_nghost-%COMP%]     .editor-button{color:#788593;padding:7px;width:36px;height:36px}[_nghost-%COMP%]     .editor-button .mat-icon{height:22px;width:22px}[_nghost-%COMP%]     .editor-button .caret{display:inline-block;width:20px;height:20px;vertical-align:middle}[_nghost-%COMP%]     .editor-button.text-button{display:block;font-weight:300;font-size:1.5rem;width:auto}[_nghost-%COMP%]     .editor-button.disabled{opacity:.4}[_nghost-%COMP%]     .editor-button.active{background-color:rgba(0,0,0,.039)}[_nghost-%COMP%]     .editor-button.success{color:var(--be-accent-default)}[_nghost-%COMP%]     .editor-button:hover{background-color:rgba(0,0,0,.039)}[_nghost-%COMP%]     .editor-footer{position:relative;height:37px;flex-shrink:0;background-color:var(--be-background-alternative);border-top:1px solid var(--be-divider-default)}textarea[_ngcontent-%COMP%]{border:none;outline:none;resize:none;padding:15px}.editor-header[_ngcontent-%COMP%]{clear:both;flex:0 0 37px;background-color:var(--be-background-alternative)}.toolbar-row[_ngcontent-%COMP%]{display:flex;height:37px;border-bottom:1px solid var(--be-divider-default);overflow:hidden}  .header-actions{display:inline-block;border-right:1px solid var(--be-divider-default);height:100%;padding:0 4px}  .header-actions.right{margin-left:auto;margin-right:7px}  .header-actions.last{border-right:none}.editor-toggle-buttons[_ngcontent-%COMP%]{border-right:none;margin-left:auto;padding:0;display:flex}.editor-toggle-buttons[_ngcontent-%COMP%]   .editor-button[_ngcontent-%COMP%]{width:auto}@media only screen and (max-width: 768px){.toolbar-row[_ngcontent-%COMP%]{overflow-x:auto}}"],changeDetection:0}),t})()},52644:function(t,e,i){i.d(e,{y:function(){return o}});var n=i(1796),s=i(37716);let o=(()=>{class t{transform(t=0,e){return isNaN(parseFloat(String(t)))||!isFinite(t)?"-":(0,n.H)(t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Yjl({name:"formattedFileSize",type:t,pure:!0}),t})()},48976:function(t,e,i){i.d(e,{C:function(){return n}});var n=(()=>((n||(n={})).Image="uploads/images",n))()},48350:function(t,e,i){i.d(e,{o:function(){return p}});var n=i(61927),s=i(77393),o=i(33637);const a={leading:!0,trailing:!1};class r{constructor(t,e,i,n){this.duration=t,this.scheduler=e,this.leading=i,this.trailing=n}call(t,e){return e.subscribe(new c(t,this.duration,this.scheduler,this.leading,this.trailing))}}class c extends s.L{constructor(t,e,i,n,s){super(t),this.duration=e,this.scheduler=i,this.leading=n,this.trailing=s,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function l(t){const{subscriber:e}=t;e.clearThrottle()}var h=i(37716),d=i(9141),u=i(12178);let p=(()=>{class t{constructor(t,e,i){this.el=t,this.uploadQueue=e,this.cd=i,this.hidden=!0,this.subscription=this.uploadQueue.totalProgress().pipe(function(t,e=o.P,i=a){return n=>n.lift(new r(t,e,i.leading,i.trailing))}(260,n.Z,{leading:!0,trailing:!0})).subscribe(t=>{this.progress=t,this.hidden=100===t||0===this.uploadQueue.count$.value.pending,this.cd.markForCheck()})}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(h.SBq),h.Y36(d.A),h.Y36(h.sBO))},t.\u0275cmp=h.Xpm({type:t,selectors:[["upload-progress-bar"]],hostVars:2,hostBindings:function(t,e){2&t&&h.ekj("hidden",e.hidden)},decls:1,vars:1,consts:[["mode","determinate","color","accent",3,"value"]],template:function(t,e){1&t&&h._UZ(0,"mat-progress-bar",0),2&t&&h.Q6J("value",e.progress)},directives:[u.pW],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),t})()},9141:function(t,e,i){i.d(e,{A:function(){return M}});var n=i(79765),s=i(26215),o=i(82298),a=i(58480);class r{constructor(t,e){this.canceled$=new n.xQ,this.processing$=new s.X(!1),this.uploadedResponse$=new o.t(1),this.progress$=new s.X({percentage:0}),this.error$=new s.X(null),this.customData={},this.uploadedFile=t,this.id=e||(0,a.O)()}get completed(){return!this.processing$.value&&100===this.progress$.value.percentage}get inProgress(){return!this.error$.value&&!this.completed}cancel(){this.canceled$.next(!0),this.finalize()}complete(){this.setProgress({percentage:100,eta:null}),this.finalize()}finalize(){this.uploadedResponse$.complete(),this.canceled$.complete(),this.progress$.complete()}finishProcessing(){this.processing$.next(!1),this.processing$.complete()}addError(t){this.error$.next(t)}setProgress(t){this.progress$.next(Object.assign(Object.assign({},this.progress$.value),t))}}var c=i(94402),l=i(40205),h=i(59193),d=i(19773),u=i(5304),p=i(46782),g=i(88002),m=i(45435),f=i(66421),b=i(81769),v=i(37716),x=i(97312),_=i(18715),w=i(68756),y=i(26232);class C extends y.y{constructor(t,e){super(),this.params=t,this.i18n=e,this.errorMessage=this.i18n.t("Only these file types are allowed: :extensions",{extensions:this.params.extensions.join(", ")})}fails(t){return!this.params.extensions.some(e=>e.toLowerCase()===t.extension.toLowerCase())}}class Z extends y.y{constructor(t,e){super(),this.params=t,this.i18n=e,this.errorMessage=this.i18n.t("These file types are not allowed: :extensions",{extensions:this.params.extensions.join(", ")})}fails(t){return this.params.extensions.some(e=>e===t.extension)}}var k=i(16850);let I=(()=>{class t extends _.c{constructor(){super(...arguments),this.DEFAULT_MAX_FILE_SIZE_MB=8,this.showToast=!0}initValidations(){this.validations.push(new w.p({maxSize:this.getMaxFileSize()},this.i18n));const t=this.getAllowedExtensions(),e=this.getBlockedExtensions();t&&t.length&&this.validations.push(new C({extensions:t},this.i18n)),e&&e.length&&this.validations.push(new Z({extensions:e},this.i18n))}getMaxFileSize(){return this.settings.get("uploads.max_size",(0,k.F)(this.DEFAULT_MAX_FILE_SIZE_MB,"MB"))}getAllowedExtensions(){return this.settings.getJson("uploads.allowed_extensions")}getBlockedExtensions(){return this.settings.getJson("uploads.blocked_extensions")}}return t.\u0275fac=function(){let e;return function(i){return(e||(e=v.n5z(t)))(i||t)}}(),t.\u0275prov=v.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var A=i(35718),T=i(24688),P=i(34673);let M=(()=>{class t{constructor(t,e,i,a,r){this.api=t,this.defaultValidator=e,this.toast=i,this.currentUser=a,this.settings=r,this.uploads$=new s.X([]),this.totalProgress$=new o.t(1),this.uploadsAdded$=new n.xQ,this.count$=new s.X({pending:0,completed:0})}isEmpty(){return!this.uploads$.value.length}getAllCompleted(){return this.uploads$.value.filter(t=>t.completed).map(t=>t.fileEntry)}updateTotalProgress(){const t=this.uploads$.value.map(t=>t.progress$.value.percentage||0);this.totalProgress$.next(t.reduce((t,e)=>t+e,0)/t.length)}totalProgress(){return this.totalProgress$.asObservable()}start(t,e={}){const i=e.validator||this.defaultValidator;let n=[];if(Array.isArray(t))n=this.transformUploads(t,i),this.uploads$.next(this.uploads$.value.concat(n)),this.uploadsAdded$.next(n);else{const e=this.uploads$.value.map(e=>{if(t[e.id]){const s=this.transformUploads([t[e.id]],i,e.id)[0];return n.push(s),s}return e});this.uploads$.next(e)}return this.updateCount(),(0,c.D)(n.filter(t=>!t.error$.value)).pipe((0,d.zg)(t=>this.api.upload(t.uploadedFile,e).pipe((0,u.K)(n=>(this.handleUploadFailure(n,t,i),e.bubbleError?(0,l._)(n):h.E)),(0,p.R)(t.canceled$),(0,g.U)(i=>(this.handleUploadEvent(i,t,e.willProcessFiles),i.name===f.b.COMPLETED&&(i.body.queueItemId=t.id),i))),1),(0,m.h)(t=>t.name===f.b.COMPLETED),(0,g.U)(t=>t.body))}updateProgress(t,e){const i=this.find(t);!i||(i.setProgress({eta:e.eta,speed:e.speed,percentage:e.progress,totalBytes:e.totalBytes,completedBytes:e.completedBytes}),this.updateTotalProgress())}completeUpload(t,e){const i=this.find(t);!i||(i.uploadedResponse$.next(e),i.fileEntry=e.fileEntry,i.complete(),this.updateTotalProgress())}errorUpload(t,e){this.find(t).addError(e)}reset(){this.uploads$.value.forEach(t=>t.cancel()),this.uploads$.next([])}remove(t){const e=this.uploads$.value.findIndex(e=>e.id===t),i=this.uploads$.value[e];i.completed?i.finalize():i.cancel(),this.uploads$.value.splice(e,1),this.uploads$.next(this.uploads$.value)}find(t){return this.uploads$.value.find(e=>e.id===t)}transformUploads(t,e,i){return t.map(t=>{const n=new r(t,i);if(e){const i=e.validate(t);i.failed&&n.addError(i.errorMessage)}return n})}handleUploadEvent(t,e,i=!1){t.name===f.b.PROGRESS?(100===t.progress&&(t=Object.assign(Object.assign({},t),{progress:99}),i&&e.processing$.next(!0)),this.updateProgress(e.id,t)):t.name===f.b.COMPLETED&&(this.completeUpload(e.id,t.body),this.updateCount())}handleUploadFailure(t,e,i){var n;let s=null===(n=null==t?void 0:t.errors)||void 0===n?void 0:n.file,o=null;s||(s=b.v.DefaultUpload,o=this.currentUser.isAdmin()&&!this.settings.get("site.hide_docs_buttons")),this.errorUpload(e.id,s),this.updateCount(),this.updateTotalProgress(),i.showToast&&this.toast.open(s,{action:o?"Learn More":null}).onAction().subscribe(()=>{window.open(b.h)})}updateCount(){const t=this.uploads$.value.filter(t=>t.inProgress).length;this.count$.next({pending:t,completed:this.uploads$.value.length-t})}}return t.\u0275fac=function(e){return new(e||t)(v.LFG(x.f),v.LFG(I),v.LFG(A.F),v.LFG(T.I),v.LFG(P.Z))},t.\u0275prov=v.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},66705:function(t,e,i){i.d(e,{z:function(){return c}});var n=i(38583),s=i(51095),o=i(76627),a=i(12178),r=i(37716);let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[n.ez,s.ot,a.Cv,o.Ps]]}),t})()},63412:function(t,e,i){function n(t,e){const i=document.createElement("a");i.href=t,e&&(i.download=e),document.body.appendChild(i),i.click(),document.body.removeChild(i)}i.d(e,{k:function(){return n}})}}]);