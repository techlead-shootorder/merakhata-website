!function(){"use strict";function t(e,n){return(t=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(e,n)}function e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,o=a(t);if(e){var r=a(this).constructor;i=Reflect.construct(o,arguments,r)}else i=o.apply(this,arguments);return n(this,i)}}function n(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}(self.webpackChunkbedesk=self.webpackChunkbedesk||[]).push([[116],{45116:function(n,a,o){o.r(a),o.d(a,{HcManageModule:function(){return we}});var c,s=o(38583),u=o(3679),g=o(24668),d=o(22238),p=o(37716),h=o(15515),f=o(51095),m=o(76627),b=((c=function(){function t(e,n){r(this,t),this.dialogRef=e,this.data=n,this.model={}}return l(t,[{key:"close",value:function(){this.dialogRef.close()}}]),t}()).\u0275fac=function(t){return new(t||c)(p.Y36(d.so),p.Y36(d.WI))},c.\u0275cmp=p.Xpm({type:c,selectors:[["article-settings-modal"]],decls:28,vars:1,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","article-slug","trans",""],["type","text","id","article-slug","formControlName","slug"],["for","article-description","trans",""],["name","article-description","id","article-description","rows","7","formControlName","description"],["trans",""],["for","article-position","trans",""],["type","number","id","article-position","name","article-position","formControlName","position","min","0"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button"]],template:function(t,e){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"h2",1),p._uU(2,"Article Settings"),p.qZA(),p.TgZ(3,"button",2),p.NdJ("click",function(){return e.close()}),p._UZ(4,"mat-icon",3),p.qZA(),p.qZA(),p.TgZ(5,"form",4),p.NdJ("ngSubmit",function(){return e.close()}),p.TgZ(6,"mat-dialog-content",5),p.TgZ(7,"div",6),p.TgZ(8,"label",7),p._uU(9,"Slug"),p.qZA(),p._UZ(10,"input",8),p.qZA(),p.TgZ(11,"div",6),p.TgZ(12,"label",9),p._uU(13,"Description"),p.qZA(),p._UZ(14,"textarea",10),p.TgZ(15,"p",11),p._uU(16,"This will appear when searching the help center. Excerpt from article will be used otherwise."),p.qZA(),p.qZA(),p.TgZ(17,"div",6),p.TgZ(18,"label",12),p._uU(19,"Position"),p.qZA(),p._UZ(20,"input",13),p.TgZ(21,"p",11),p._uU(22,"Order for article on help center homepage. Lower position will be first."),p.qZA(),p.qZA(),p.qZA(),p.TgZ(23,"mat-dialog-actions"),p.TgZ(24,"button",14),p.NdJ("click",function(){return e.close()}),p._uU(25,"Cancel"),p.qZA(),p.TgZ(26,"button",15),p._uU(27,"Confirm"),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(5),p.Q6J("formGroup",e.data.form))},directives:[d.uh,h.P,f.lW,m.Hw,u.JL,u.sg,d.xY,u.Fj,u.JJ,u.u,u.wV,u.qQ,d.H8],encapsulation:2}),c);function v(t,e){if(!t||!e)return!1;e=e.toLowerCase(),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++)if(t[n].toLowerCase().indexOf(e)>-1)return!0;return!1}var y=function(){function t(){r(this,t)}return l(t,[{key:"filter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;if(!t)return e.slice();for(var n=[],a=0;a<e.length;a++){var i=Object.assign({},e[a]);v(e[a].name,t)?n.push(i):(i.children=i.children.filter(function(e){return v(e.name,t)}),i.children.length&&n.push(i))}return n}}]),t}(),x=o(75811),Z=o(93342),k=o(18819),_=o(54395),A=o(87519),C=o(79053),T=o(11436),w=o(7539),q=o(63297);function J(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"div",15),p.TgZ(1,"mat-checkbox",13),p.NdJ("change",function(){var t=p.CHM(n).$implicit;return p.oxw(2).toggle(t)}),p._uU(2),p.qZA(),p.qZA()}if(2&t){var a=e.$implicit,i=e.index,o=p.oxw().index,r=p.oxw();p.xp6(1),p.Q6J("id",o+""+i)("checked",r.categoryIsSelected(a.id)),p.xp6(1),p.Oqu(a.name)}}function O(t,e){if(1&t){var n=p.EpF();p.ynx(0),p.TgZ(1,"div",12),p.TgZ(2,"mat-checkbox",13),p.NdJ("change",function(){var t=p.CHM(n).$implicit;return p.oxw().toggle(t)}),p._uU(3),p.qZA(),p.qZA(),p.YNc(4,J,3,3,"div",14),p.BQk()}if(2&t){var a=e.$implicit,i=e.index,o=p.oxw();p.xp6(2),p.Q6J("id",i)("checked",o.categoryIsSelected(a.id)),p.xp6(1),p.Oqu(a.name),p.xp6(1),p.Q6J("ngForOf",a.children)}}function U(t,e){1&t&&(p.TgZ(0,"div",16),p._uU(1," No Results Found. "),p.qZA())}var M=["*"],I=function(){var t=function(){function t(e,n){r(this,t),this.api=e,this.route=n,this.searchControl=new u.NI,this.selectedCategories=[],this.filteredCategories=[],this.allCategories=[]}return l(t,[{key:"ngOnInit",value:function(){this.bindSearchQuery(),this.allCategories.length||this.refresh()}},{key:"writeValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.route.snapshot.queryParams.categories;!t.length&&(null==e?void 0:e.length)&&(t=e.split(",").map(function(t){return parseInt(t)})),this.selectedCategories=t}},{key:"registerOnChange",value:function(t){this.propagateChange=t}},{key:"registerOnTouched",value:function(){}},{key:"refresh",value:function(){var t=this,e=this.api.getCategories().pipe((0,Z.b)(function(e){t.filteredCategories=e.pagination.data,t.allCategories=e.pagination.data}),(0,k.B)());return e.subscribe(),e}},{key:"categoryIsSelected",value:function(t){return this.selectedCategories.indexOf(t)>-1}},{key:"childIsSelected",value:function(t){if(!t.children.length)return!1;for(var e=0;e<t.children.length;e++)if(this.categoryIsSelected(t.children[e].id))return!0}},{key:"toggle",value:function(t,e){var n=this.selectedCategories.indexOf(t.id);n>-1?this.selectedCategories.splice(n,1):this.selectedCategories.push(t.id),e&&!this.categoryIsSelected(e)&&this.selectedCategories.push(e),this.deselectChildren(t),this.propagateChange(this.selectedCategories)}},{key:"deselectAll",value:function(){this.selectedCategories=[],this.propagateChange(this.selectedCategories)}},{key:"deselectChildren",value:function(t){var e=this;!t.children||t.children.forEach(function(t){var n=e.selectedCategories.indexOf(t.id);n>-1&&e.selectedCategories.splice(n,1)})}},{key:"bindSearchQuery",value:function(){var t=this;this.searchControl.valueChanges.pipe((0,_.b)(400),(0,A.x)()).subscribe(function(e){t.filteredCategories=(new y).filter(e,t.allCategories),t.scrollbar.update()})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.Y36(C.G),p.Y36(g.gz))},t.\u0275cmp=p.Xpm({type:t,selectors:[["categories-manager"]],viewQuery:function(t,e){var n;(1&t&&p.Gf(x.j,7),2&t)&&(p.iGM(n=p.CRH())&&(e.scrollbar=n.first))},features:[p._Bn([{provide:u.JU,useExisting:t,multi:!0}])],ngContentSelectors:M,decls:15,vars:6,consts:[[1,"panel"],[1,"panel-header"],["trans",""],["mat-icon-button","",1,"clear-all-button",3,"matTooltip","click"],["svgIcon","clear-all"],[1,"panel-body"],[1,"input-container"],["type","text","id","categories-manager-search","placeholder","Search...","trans-placeholder","",3,"formControl"],["svgIcon","search"],[1,"categories"],[4,"ngFor","ngForOf"],["class","no-results","trans","",4,"ngIf"],[1,"category","parent-category"],[3,"id","checked","change"],["class","category child-category",4,"ngFor","ngForOf"],[1,"category","child-category"],["trans","",1,"no-results"]],template:function(t,e){1&t&&(p.F$t(),p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"span",2),p._uU(3,"Categories"),p.qZA(),p.TgZ(4,"button",3),p.NdJ("click",function(){return e.deselectAll()}),p.ALo(5,"trans"),p._UZ(6,"mat-icon",4),p.qZA(),p.qZA(),p.TgZ(7,"div",5),p.TgZ(8,"div",6),p._UZ(9,"input",7),p._UZ(10,"mat-icon",8),p.qZA(),p.TgZ(11,"section",9),p.YNc(12,O,5,4,"ng-container",10),p.YNc(13,U,2,0,"div",11),p.qZA(),p.Hsn(14),p.qZA(),p.qZA()),2&t&&(p.xp6(4),p.Q6J("matTooltip",p.lcZ(5,4,"Clear All")),p.xp6(5),p.Q6J("formControl",e.searchControl),p.xp6(3),p.Q6J("ngForOf",e.filteredCategories),p.xp6(1),p.Q6J("ngIf",!e.filteredCategories.length&&e.searchControl.value))},directives:[h.P,f.lW,T.gM,m.Hw,u.Fj,u.JJ,u.oH,s.sg,s.O5,w.oG],pipes:[q.R],styles:["categories-manager{display:block}categories-manager .input-container{margin-bottom:10px;position:relative}categories-manager .input-container input{padding-left:33px}categories-manager .input-container .mat-icon{position:absolute;top:12px;left:7px;color:var(--be-secondary-text)}categories-manager .categories{max-height:250px;overflow:auto;padding:10px;border:1px solid var(--be-divider-default)}categories-manager .categories .category{margin-bottom:8px;overflow:hidden;text-overflow:ellipsis}categories-manager .categories .child-category{margin-left:20px}categories-manager .categories .parent-category label{font-weight:500}categories-manager .categories .no-results{font-style:italic;font-size:1.3rem}\n"],encapsulation:2}),t}(),N=o(51765),Q=function(){var t=function(){function t(e,n){r(this,t),this.dialogRef=e,this.data=n,this.hydrate()}return l(t,[{key:"close",value:function(){this.dialogRef.close()}},{key:"hydrate",value:function(){this.article=this.data.article}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.Y36(d.so),p.Y36(d.WI))},t.\u0275cmp=p.Xpm({type:t,selectors:[["article-modal"]],decls:4,vars:1,consts:[["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[3,"article"]],template:function(t,e){1&t&&(p.TgZ(0,"mat-dialog-content"),p.TgZ(1,"button",0),p.NdJ("click",function(){return e.close()}),p._UZ(2,"mat-icon",1),p.qZA(),p._UZ(3,"article",2),p.qZA()),2&t&&(p.xp6(3),p.Q6J("article",e.article))},directives:[d.xY,f.lW,m.Hw,N.t],styles:[".article-modal-container{width:80%;height:calc(100% - 50px)}.article-modal-container .mat-dialog-content,.article-modal-container .mat-dialog-container{height:100%;max-height:100%}.article-modal-container .close-button{position:absolute;top:0;right:20px}\n"],encapsulation:2}),t}(),L=o(56313),P=o(53534),Y=o(9141),D=o(81378),F=o(35718),S=o(45396);function G(t,e){1&t&&(p.TgZ(0,"span",26),p._uU(1,"Update Category"),p.qZA())}function R(t,e){1&t&&(p.TgZ(0,"span",26),p._uU(1,"New Category"),p.qZA())}function E(t,e){if(1&t&&(p.TgZ(0,"div",29),p._uU(1),p.qZA()),2&t){var n=p.oxw();p.xp6(1),p.Oqu(n.errors.name)}}function V(t,e){if(1&t&&(p.TgZ(0,"div",30),p._uU(1),p.qZA()),2&t){var n=p.oxw();p.xp6(1),p.Oqu(n.errors.image)}}function j(t,e){if(1&t&&(p.TgZ(0,"option",31),p._uU(1),p.qZA()),2&t){var n=e.$implicit;p.Q6J("value",n.id),p.xp6(1),p.Oqu(n.name)}}function H(t,e){if(1&t&&(p.TgZ(0,"div",32),p._uU(1),p.qZA()),2&t){var n=p.oxw();p.xp6(1),p.Oqu(n.errors.parent_id)}}function B(t,e){if(1&t&&(p.TgZ(0,"div",33),p._uU(1),p.qZA()),2&t){var n=p.oxw();p.xp6(1),p.Oqu(n.errors.description)}}function z(t,e){1&t&&(p.TgZ(0,"span",26),p._uU(1,"Update"),p.qZA())}function $(t,e){1&t&&(p.TgZ(0,"span",26),p._uU(1,"Create"),p.qZA())}var W=function(){var t=function(){function t(e,n,a,i,o,c){r(this,t),this.dialogRef=e,this.data=n,this.api=a,this.imageValidator=i,this.uploadQueue=o,this.toast=c,this.categories=[],this.model={},this.updating=!1,this.errors={},this.hydrate()}return l(t,[{key:"close",value:function(t){this.dialogRef.close(t)}},{key:"confirm",value:function(){var t=this;this.api.createOrUpdateCategory(this.getPayload()).subscribe(function(e){t.toast.open(t.model.id?"Updated category.":"Created category."),t.close(e.category)},function(e){return t.errors=e.errors})}},{key:"hydrate",value:function(){this.fetchCategories(this.data.category),this.data.category&&(this.updating=!0,this.model=this.data.category),this.data.parentId&&(this.model.parent_id=this.data.parentId)}},{key:"getPayload",value:function(){return{id:this.model.id,name:this.model.name,image:this.model.image,description:this.model.description,parent_id:this.model.parent_id||null,hidden:this.model.hidden}}},{key:"fetchCategories",value:function(t){var e=this;this.api.getCategories().subscribe(function(n){e.categories=n.pagination.data.filter(function(e){return!t||t.id!==e.id})})}},{key:"openInsertImageDialog",value:function(){var t=this,e={uri:"uploads/images",httpParams:{diskPrefix:"category"},validator:this.imageValidator};(0,L.r)({types:[P.j.image],multiple:!1}).then(function(n){!n||t.uploadQueue.start(n,e).subscribe(function(e){t.model.image=e.fileEntry.url})})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.Y36(d.so),p.Y36(d.WI),p.Y36(C.G),p.Y36(D.m),p.Y36(Y.A),p.Y36(F.F))},t.\u0275cmp=p.Xpm({type:t,selectors:[["category-modal"]],features:[p._Bn([Y.A])],decls:46,vars:18,consts:[[1,"modal-header"],["mat-dialog-title",""],["trans","",4,"ngIf"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","name","name",3,"ngModel","ngModelChange"],["class","error name-error",4,"ngIf"],["for","image","trans",""],[1,"input-with-action","action-left"],["mat-flat-button","","color","accent","type","button",1,"addon",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","id","image","name","image",3,"ngModel","ngModelChange"],["class","error image-error",4,"ngIf"],["type","text","id","parent_id","name","parent_id",3,"ngModel","ngModelChange"],["trans","",3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["class","error parent-error",4,"ngIf"],["for","description","trans",""],["type","text","id","description","name","description","rows","4",3,"ngModel","ngModelChange"],["class","error description-error",4,"ngIf"],[1,"setting-toggle-container"],["name","hidden","id","hidden","trans","",3,"ngModel","ngModelChange"],["trans",""],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"submit-button"],[1,"error","name-error"],[1,"error","image-error"],[3,"value"],[1,"error","parent-error"],[1,"error","description-error"]],template:function(t,e){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"h2",1),p.YNc(2,G,2,0,"span",2),p.YNc(3,R,2,0,"span",2),p.qZA(),p.TgZ(4,"button",3),p.NdJ("click",function(){return e.close()}),p._UZ(5,"mat-icon",4),p.qZA(),p.qZA(),p.TgZ(6,"form",5),p.NdJ("ngSubmit",function(){return e.confirm()}),p.TgZ(7,"mat-dialog-content",6),p.TgZ(8,"div",7),p.TgZ(9,"label",8),p._uU(10,"Name"),p.qZA(),p.TgZ(11,"input",9),p.NdJ("ngModelChange",function(t){return e.model.name=t}),p.qZA(),p.YNc(12,E,2,1,"div",10),p.qZA(),p.TgZ(13,"div",7),p.TgZ(14,"label",11),p._uU(15,"Image"),p.qZA(),p.TgZ(16,"div",12),p.TgZ(17,"button",13),p.NdJ("click",function(){return e.openInsertImageDialog()}),p.ALo(18,"trans"),p._UZ(19,"mat-icon",14),p.qZA(),p.TgZ(20,"input",15),p.NdJ("ngModelChange",function(t){return e.model.image=t}),p.qZA(),p.qZA(),p.YNc(21,V,2,1,"div",16),p.qZA(),p.TgZ(22,"div",7),p.TgZ(23,"label",8),p._uU(24,"Parent Category"),p.qZA(),p.TgZ(25,"select",17),p.NdJ("ngModelChange",function(t){return e.model.parent_id=t}),p.TgZ(26,"option",18),p._uU(27,"No Parent Category"),p.qZA(),p.YNc(28,j,2,2,"option",19),p.qZA(),p.YNc(29,H,2,1,"div",20),p.qZA(),p.TgZ(30,"div",7),p.TgZ(31,"label",21),p._uU(32,"Description"),p.qZA(),p.TgZ(33,"textarea",22),p.NdJ("ngModelChange",function(t){return e.model.description=t}),p.qZA(),p.YNc(34,B,2,1,"div",23),p.qZA(),p.TgZ(35,"div",24),p.TgZ(36,"mat-slide-toggle",25),p.NdJ("ngModelChange",function(t){return e.model.hidden=t}),p._uU(37,"Hidden"),p.qZA(),p.TgZ(38,"p",26),p._uU(39,"Whether this category should be displayed in help center."),p.qZA(),p.qZA(),p.qZA(),p.TgZ(40,"mat-dialog-actions"),p.TgZ(41,"button",27),p.NdJ("click",function(){return e.close()}),p._uU(42,"Cancel"),p.qZA(),p.TgZ(43,"button",28),p.YNc(44,z,2,0,"span",2),p.YNc(45,$,2,0,"span",2),p.qZA(),p.qZA(),p.qZA()),2&t&&(p.xp6(2),p.Q6J("ngIf",e.updating),p.xp6(1),p.Q6J("ngIf",!e.updating),p.xp6(8),p.Q6J("ngModel",e.model.name),p.xp6(1),p.Q6J("ngIf",e.errors.name),p.xp6(5),p.Q6J("matTooltip",p.lcZ(18,16,"Upload image")),p.xp6(3),p.Q6J("ngModel",e.model.image),p.xp6(1),p.Q6J("ngIf",e.errors.image),p.xp6(4),p.Q6J("ngModel",e.model.parent_id),p.xp6(1),p.Q6J("ngValue",null),p.xp6(2),p.Q6J("ngForOf",e.categories),p.xp6(1),p.Q6J("ngIf",e.errors.parent_id),p.xp6(4),p.Q6J("ngModel",e.model.description),p.xp6(1),p.Q6J("ngIf",e.errors.description),p.xp6(2),p.Q6J("ngModel",e.model.hidden),p.xp6(8),p.Q6J("ngIf",e.updating),p.xp6(1),p.Q6J("ngIf",!e.updating))},directives:[d.uh,s.O5,f.lW,m.Hw,u.JL,u.F,d.xY,h.P,u.Fj,u.JJ,u.On,T.gM,u.EJ,u.YN,u.Kr,s.sg,S.Rr,d.H8],pipes:[q.R],encapsulation:2}),t}(),X=o(82192),K=o(6966),tt=o(15381),et=o(76827),nt=o(48350),at=o(13880),it=o(20616),ot=o(91241);function rt(t,e){1&t&&(p.TgZ(0,"span",31),p._uU(1,"Create Article"),p.qZA())}function ct(t,e){1&t&&(p.TgZ(0,"span",32),p._uU(1,"Update Article"),p.qZA())}function lt(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"reply-attachment-list",34),p.NdJ("detached",function(t){return p.CHM(n),p.oxw(2).removeAttachment(t)}),p.qZA()}if(2&t){var a=p.oxw(2);p.Q6J("attachments",a.attachments)}}function st(t,e){if(1&t&&(p.TgZ(0,"div",23),p.TgZ(1,"div",24),p._uU(2,"Attachments"),p.qZA(),p.TgZ(3,"div",25),p.YNc(4,lt,1,1,"reply-attachment-list",33),p.qZA(),p.qZA()),2&t){var n=p.oxw();p.xp6(4),p.Q6J("ngIf",n.attachments.length)}}var ut=function(){return{exact:!0}},gt=function(){var t=function(){function t(e,n,a,i,o,c,l){r(this,t),this.modal=e,this.helpCenter=n,this.toast=a,this.route=i,this.router=o,this.uploadQueue=c,this.fb=l,this.updating=!1,this.attachments=[],this.form=this.fb.group({title:[""],body:[""],slug:[""],description:[""],position:[0],draft:[1],categories:[[]],tags:[[]]})}return l(t,[{key:"ngOnInit",value:function(){var t=this;this.route.data.subscribe(function(e){if(e.article){var n=e.article;n.categories=n.categories.map(function(t){return t.id}),n.tags=n.tags.map(function(t){return t.name}),t.form.patchValue(n),t.textEditor.setContents(n.body),t.attachments=n.uploads||[]}})}},{key:"saveOrUpdateArticle",value:function(){var t=this;this.updating=!0,(this.route.snapshot.data.article?this.helpCenter.updateArticle(this.route.snapshot.data.article.id,this.getPayload()):this.helpCenter.createArticle(this.getPayload())).subscribe(function(){t.toast.open("Article "+(t.route.snapshot.data.article?"updated.":"created.")),t.router.navigateByUrl("help-center/manage/articles")},function(e){var n=e.errors[Object.keys(e.errors)[0]];t.toast.open(n),t.updating=!1})}},{key:"openPreviewModal",value:function(){this.modal.open(Q,{article:this.getPayload(!1)},{panelClass:"article-modal-container"})}},{key:"openArticleSettingsModal",value:function(){this.modal.show(b,{form:this.form})}},{key:"getPayload",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.form.value;return e.body=this.textEditor.getContents(),t&&(e.uploads=this.attachments.map(function(t){return t.id})),e.slug=(0,K.V)(e.slug),e}},{key:"openNewCategoryModal",value:function(){var t=this;this.modal.show(W).afterClosed().subscribe(function(e){!e||t.categoriesManager.refresh().subscribe(function(){t.categoriesManager.toggle(e)})})}},{key:"uploadFiles",value:function(t){var e=this;this.uploadQueue.start(t).subscribe(function(t){e.attachments=[].concat(i(e.attachments),[t.fileEntry])})}},{key:"removeAttachment",value:function(t){for(var e=0;e<this.attachments.length;e++)this.attachments[e].id===t.id&&this.attachments.splice(e,1)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.Y36(tt.u),p.Y36(et.x),p.Y36(F.F),p.Y36(g.gz),p.Y36(g.F0),p.Y36(Y.A),p.Y36(u.qu))},t.\u0275cmp=p.Xpm({type:t,selectors:[["new-article"]],viewQuery:function(t,e){var n;(1&t&&(p.Gf(X.d,7),p.Gf(I,7)),2&t)&&(p.iGM(n=p.CRH())&&(e.textEditor=n.first),p.iGM(n=p.CRH())&&(e.categoriesManager=n.first))},features:[p._Bn([Y.A])],decls:42,vars:18,consts:[[1,"action-bar"],[1,"nav"],["routerLinkActive","router-link-active","trans","",1,"nav-item",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","router-link-active","trans","",1,"nav-item",3,"routerLink"],[1,"actions"],[1,"no-style","action","article-settings-action",3,"click"],["svgIcon","settings"],["id","submit",1,"no-style","publish-article-button","new-item-button",3,"click"],["class","create-article-submit","trans","",4,"ngIf"],["class","update-article-submit","trans","",4,"ngIf"],[1,"container",3,"formGroup"],[1,"middle-column"],[1,"input-container","title"],["type","text","formControlName","title","placeholder","Title","trans-placeholder","",1,"article-title-input"],["formControlName","draft",1,"article-status-input"],["trans","",3,"value"],[1,"text-editor-container"],["inlineUploadPrefix","article_images","minHeight","auto",1,"text-editor",3,"showAdvancedControls","onFileUpload"],["editorEl",""],["customScrollbar","lite",1,"right-column"],["formControlName","categories",1,"categories-panel"],[1,"new-category-button"],["mat-flat-button","","color","accent","trans","",3,"click"],[1,"panel"],["trans","",1,"panel-header"],[1,"panel-body"],["formControlName","tags"],["class","panel",4,"ngIf"],[1,"preview-article-button",3,"matTooltip","click"],["svgIcon","remove-red-eye",1,"size-20"],[1,"overlay",3,"isVisible"],["trans","",1,"create-article-submit"],["trans","",1,"update-article-submit"],[3,"attachments","detached",4,"ngIf"],[3,"attachments","detached"]],template:function(t,e){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"a",2),p._uU(3,"Home"),p.qZA(),p.TgZ(4,"a",3),p._uU(5,"Categories"),p.qZA(),p.TgZ(6,"a",2),p._uU(7,"Articles"),p.qZA(),p.qZA(),p.TgZ(8,"div",4),p.TgZ(9,"button",5),p.NdJ("click",function(){return e.openArticleSettingsModal()}),p._UZ(10,"mat-icon",6),p.qZA(),p.TgZ(11,"button",7),p.NdJ("click",function(){return e.saveOrUpdateArticle()}),p.YNc(12,rt,2,0,"span",8),p.YNc(13,ct,2,0,"span",9),p.qZA(),p.qZA(),p.qZA(),p.TgZ(14,"div",10),p.TgZ(15,"section",11),p.TgZ(16,"div",12),p._UZ(17,"input",13),p.TgZ(18,"select",14),p.TgZ(19,"option",15),p._uU(20,"Published"),p.qZA(),p.TgZ(21,"option",15),p._uU(22,"Draft"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(23,"div",16),p._UZ(24,"upload-progress-bar"),p.TgZ(25,"text-editor",17,18),p.NdJ("onFileUpload",function(t){return e.uploadFiles(t)}),p.qZA(),p.qZA(),p.qZA(),p.TgZ(27,"aside",19),p.TgZ(28,"categories-manager",20),p.TgZ(29,"div",21),p.TgZ(30,"button",22),p.NdJ("click",function(){return e.openNewCategoryModal()}),p._uU(31,"+ Add New Category"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(32,"div",23),p.TgZ(33,"div",24),p._uU(34,"Tags"),p.qZA(),p.TgZ(35,"div",25),p._UZ(36,"tags-manager",26),p.qZA(),p.qZA(),p.YNc(37,st,5,1,"div",27),p.qZA(),p.TgZ(38,"button",28),p.NdJ("click",function(){return e.openPreviewModal()}),p.ALo(39,"trans"),p._UZ(40,"mat-icon",29),p.qZA(),p._UZ(41,"loading-indicator",30),p.qZA()),2&t&&(p.xp6(2),p.Q6J("routerLink","/help-center")("routerLinkActiveOptions",p.DdM(16,ut)),p.xp6(2),p.Q6J("routerLink","/help-center/manage/categories"),p.xp6(2),p.Q6J("routerLink","/help-center/manage/articles")("routerLinkActiveOptions",p.DdM(17,ut)),p.xp6(6),p.Q6J("ngIf",!e.route.snapshot.data.article),p.xp6(1),p.Q6J("ngIf",e.route.snapshot.data.article),p.xp6(1),p.Q6J("formGroup",e.form),p.xp6(5),p.Q6J("value",0),p.xp6(2),p.Q6J("value",1),p.xp6(4),p.Q6J("showAdvancedControls",!0),p.xp6(12),p.Q6J("ngIf",null==e.attachments?null:e.attachments.length),p.xp6(1),p.Q6J("matTooltip",p.lcZ(39,14,"Preview Article")),p.xp6(3),p.Q6J("isVisible",e.updating))},directives:[g.yS,g.Od,h.P,m.Hw,s.O5,u.JL,u.sg,u.Fj,u.JJ,u.u,u.EJ,u.YN,u.Kr,nt.o,X.d,x.j,I,f.lW,at.s,T.gM,it.Q,ot.G],pipes:[q.R],styles:["new-article{display:block;overflow:hidden;background-color:var(--be-background-alternative)}new-article .action-bar .action{color:var(--be-secondary-text)}new-article .text-editor-container{height:calc(100% - 50px)}new-article .container{display:flex;max-width:1300px;margin:20px auto;height:calc(100vh - 165px)}new-article .container .middle-column{flex:1 1 auto;height:100%;margin-right:20px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px rgba(0,0,0,.141),0 1px 3px rgba(0,0,0,.122);background-color:var(--be-background);border:1px solid;border-color:#d3d3d3 #d3d3d3 #c4c4c4 #d3d3d3;border-radius:4px;overflow:hidden}new-article .container .middle-column .title{display:flex}new-article .container .middle-column .title .article-title-input,new-article .container .middle-column .title .article-status-input{border:none;height:50px}new-article .container .middle-column .title .article-title-input{flex:1 1 auto;font-size:2rem;padding:10px 25px}new-article .container .middle-column .title .article-status-input{flex:0 0 130px;border-left:1px solid var(--be-divider-default)}new-article .container .middle-column text-editor{max-height:none;border-left:none;border-right:none;border-bottom:none}new-article .container .middle-column text-editor .editor-header,new-article .container .middle-column text-editor .editor-footer{background-color:#fff}new-article .container .right-column{width:302px;flex:0 0 302px;overflow:auto;padding:0 2px;height:100%}new-article .container .right-column .panel{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px rgba(0,0,0,.141),0 1px 3px rgba(0,0,0,.122);background-color:var(--be-background);border:1px solid;border-color:#d3d3d3 #d3d3d3 #c4c4c4 #d3d3d3;border-radius:4px}new-article .container .right-column .new-category-button{margin:15px 0 5px}new-article .container .preview-article-button{width:50px;height:50px;display:flex;justify-content:center;align-items:center;border-radius:50%;box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px rgba(0,0,0,.141),0 1px 8px rgba(0,0,0,.122);background-color:var(--be-accent-default);color:var(--be-accent-contrast);position:absolute;right:20px;bottom:20px;border:none;outline:none;cursor:pointer}new-article reply-attachment-list{display:block}new-article reply-attachment-list .attachments-list-item{width:100%}\n"],encapsulation:2}),t}(),dt=o(59193),pt=o(25917),ht=o(88002),ft=o(5304),mt=o(19773),bt=function(){var t=function(){function t(e,n,a){r(this,t),this.helpCenter=e,this.categories=n,this.router=a}return l(t,[{key:"resolve",value:function(t){var e=this;return this.helpCenter.getArticle(t.params.article_id).pipe((0,ht.U)(function(t){return t.article})).pipe((0,ft.K)(function(){return e.router.navigateByUrl("/help-center/manage/articles"),dt.E}),(0,mt.zg)(function(t){return(0,pt.of)(t)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.LFG(et.x),p.LFG(C.G),p.LFG(g.F0))},t.\u0275prov=p.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),vt=o(65987),yt=o(93026),xt=o(34673),Zt=o(3028),kt=o(39490),_t=o(38345),At=o(72458),Ct=o(19238),Tt=["button"],wt=["*"],qt=new p.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),Jt=new p.OlP("MatButtonToggleGroup"),Ot={provide:u.JU,useExisting:(0,p.Gpc)(function(){return It}),multi:!0},Ut=0,Mt=function t(e,n){r(this,t),this.source=e,this.value=n},It=function(){var t=function(){function t(e,n){r(this,t),this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=function(){},this._onTouched=function(){},this._name="mat-button-toggle-group-"+Ut++,this.valueChange=new p.vpe,this.change=new p.vpe,this.appearance=n&&n.appearance?n.appearance:"standard"}return l(t,[{key:"name",get:function(){return this._name},set:function(t){var e=this;this._name=t,this._buttonToggles&&this._buttonToggles.forEach(function(t){t.name=e._name,t._markForCheck()})}},{key:"vertical",get:function(){return this._vertical},set:function(t){this._vertical=(0,kt.Ig)(t)}},{key:"value",get:function(){var t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map(function(t){return t.value}):t[0]?t[0].value:void 0},set:function(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}},{key:"selected",get:function(){var t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}},{key:"multiple",get:function(){return this._multiple},set:function(t){this._multiple=(0,kt.Ig)(t)}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=(0,kt.Ig)(t),this._buttonToggles&&this._buttonToggles.forEach(function(t){return t._markForCheck()})}},{key:"ngOnInit",value:function(){this._selectionModel=new _t.Ov(this.multiple,void 0,!1)}},{key:"ngAfterContentInit",value:function(){var t;(t=this._selectionModel).select.apply(t,i(this._buttonToggles.filter(function(t){return t.checked})))}},{key:"writeValue",value:function(t){this.value=t,this._changeDetector.markForCheck()}},{key:"registerOnChange",value:function(t){this._controlValueAccessorChangeFn=t}},{key:"registerOnTouched",value:function(t){this._onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t}},{key:"_emitChangeEvent",value:function(){var t=this.selected,e=Array.isArray(t)?t[t.length-1]:t,n=new Mt(e,this.value);this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}},{key:"_syncButtonToggle",value:function(t,e){var n=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!this.multiple&&this.selected&&!t.checked&&(this.selected.checked=!1),this._selectionModel?e?this._selectionModel.select(t):this._selectionModel.deselect(t):i=!0,i?Promise.resolve().then(function(){return n._updateModelValue(a)}):this._updateModelValue(a)}},{key:"_isSelected",value:function(t){return this._selectionModel&&this._selectionModel.isSelected(t)}},{key:"_isPrechecked",value:function(t){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(function(e){return null!=t.value&&e===t.value}):t.value===this._rawValue)}},{key:"_setSelectionByValue",value:function(t){var e=this;this._rawValue=t,this._buttonToggles&&(this.multiple&&t?(Array.isArray(t),this._clearSelection(),t.forEach(function(t){return e._selectValue(t)})):(this._clearSelection(),this._selectValue(t)))}},{key:"_clearSelection",value:function(){this._selectionModel.clear(),this._buttonToggles.forEach(function(t){return t.checked=!1})}},{key:"_selectValue",value:function(t){var e=this._buttonToggles.find(function(e){return null!=e.value&&e.value===t});e&&(e.checked=!0,this._selectionModel.select(e))}},{key:"_updateModelValue",value:function(t){t&&this._emitChangeEvent(),this.valueChange.emit(this.value)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.Y36(p.sBO),p.Y36(qt,8))},t.\u0275dir=p.lG2({type:t,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,e,n){var a;(1&t&&p.Suo(n,Qt,5),2&t)&&(p.iGM(a=p.CRH())&&(e._buttonToggles=a))},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,e){2&t&&(p.uIk("aria-disabled",e.disabled),p.ekj("mat-button-toggle-vertical",e.vertical)("mat-button-toggle-group-appearance-standard","standard"===e.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[p._Bn([Ot,{provide:Jt,useExisting:t}])]}),t}(),Nt=(0,At.Kr)(function t(){r(this,t)}),Qt=function(){var n=function(n){!function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&t(e,n)}(i,n);var a=e(i);function i(t,e,n,o,c,l){var s;r(this,i),(s=a.call(this))._changeDetectorRef=e,s._elementRef=n,s._focusMonitor=o,s._isSingleSelector=!1,s._checked=!1,s.ariaLabelledby=null,s._disabled=!1,s.change=new p.vpe;var u=Number(c);return s.tabIndex=u||0===u?u:null,s.buttonToggleGroup=t,s.appearance=l&&l.appearance?l.appearance:"standard",s}return l(i,[{key:"buttonId",get:function(){return"".concat(this.id,"-button")}},{key:"appearance",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance},set:function(t){this._appearance=t}},{key:"checked",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked},set:function(t){var e=(0,kt.Ig)(t);e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}},{key:"disabled",get:function(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled},set:function(t){this._disabled=(0,kt.Ig)(t)}},{key:"ngOnInit",value:function(){var t=this.buttonToggleGroup;this._isSingleSelector=t&&!t.multiple,this.id=this.id||"mat-button-toggle-"+Ut++,this._isSingleSelector&&(this.name=t.name),t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}},{key:"ngAfterViewInit",value:function(){this._focusMonitor.monitor(this._elementRef,!0)}},{key:"ngOnDestroy",value:function(){var t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}},{key:"focus",value:function(t){this._buttonElement.nativeElement.focus(t)}},{key:"_onButtonClick",value:function(){var t=!!this._isSingleSelector||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new Mt(this,this.value))}},{key:"_markForCheck",value:function(){this._changeDetectorRef.markForCheck()}}]),i}(Nt);return n.\u0275fac=function(t){return new(t||n)(p.Y36(Jt,8),p.Y36(p.sBO),p.Y36(p.SBq),p.Y36(Ct.tE),p.$8M("tabindex"),p.Y36(qt,8))},n.\u0275cmp=p.Xpm({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(t,e){var n;(1&t&&p.Gf(Tt,5),2&t)&&(p.iGM(n=p.CRH())&&(e._buttonElement=n.first))},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(t,e){1&t&&p.NdJ("focus",function(){return e.focus()}),2&t&&(p.uIk("aria-label",null)("aria-labelledby",null)("id",e.id)("name",null),p.ekj("mat-button-toggle-standalone",!e.buttonToggleGroup)("mat-button-toggle-checked",e.checked)("mat-button-toggle-disabled",e.disabled)("mat-button-toggle-appearance-standard","standard"===e.appearance))},inputs:{disableRipple:"disableRipple",ariaLabelledby:["aria-labelledby","ariaLabelledby"],tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled",id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],value:"value"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[p.qOj],ngContentSelectors:wt,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,e){if(1&t&&(p.F$t(),p.TgZ(0,"button",0,1),p.NdJ("click",function(){return e._onButtonClick()}),p.TgZ(2,"span",2),p.Hsn(3),p.qZA(),p.qZA(),p._UZ(4,"span",3),p._UZ(5,"span",4)),2&t){var n=p.MAs(1);p.Q6J("id",e.buttonId)("disabled",e.disabled||null),p.uIk("tabindex",e.disabled?-1:e.tabIndex)("aria-pressed",e.checked)("name",e.name||null)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby),p.xp6(5),p.Q6J("matRippleTrigger",n)("matRippleDisabled",e.disableRipple||e.disabled)}},directives:[At.wG],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),n}(),Lt=function(){var t=function t(){r(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[At.BQ,At.si],At.BQ]}),t}(),Pt=o(32141),Yt=o(58341),Dt=o(76403);function Ft(t,e){if(1&t&&(p.TgZ(0,"option",31),p._uU(1),p.ALo(2,"trans"),p.qZA()),2&t){var n=e.$implicit;p.Q6J("value",n.value),p.xp6(1),p.hij(" ",p.lcZ(2,2,n.key)," ")}}function St(t,e){if(1&t&&(p.TgZ(0,"span",49),p._uU(1),p.qZA()),2&t){var n=p.oxw(2).$implicit;p.xp6(1),p.hij("",n.categories[0].parent.name," > ")}}function Gt(t,e){if(1&t&&(p.TgZ(0,"div",46),p.YNc(1,St,2,1,"span",47),p.TgZ(2,"span",48),p._uU(3),p.qZA(),p.qZA()),2&t){var n=p.oxw().$implicit;p.xp6(1),p.Q6J("ngIf",null==n.categories[0]?null:n.categories[0].parent),p.xp6(2),p.Oqu(n.categories[0].name)}}function Rt(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"mat-chip",50),p.NdJ("click",function(t){var e=p.CHM(n).$implicit;return p.oxw(3).toggleTagFilter(e),t.stopPropagation()}),p._uU(1),p.qZA()}if(2&t){var a=e.$implicit;p.xp6(1),p.Oqu(a.display_name)}}function Et(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"div",38),p.NdJ("click",function(){var t=p.CHM(n).$implicit;return p.oxw(2).goToUpdateArticle(t.id)}),p.TgZ(1,"button",39),p.NdJ("click",function(t){var e=p.CHM(n).$implicit;return p.oxw(2).maybeDeleteArticle(e),t.stopPropagation()}),p.ALo(2,"trans"),p._UZ(3,"mat-icon",40),p.qZA(),p.YNc(4,Gt,4,2,"div",41),p.TgZ(5,"div",42),p._uU(6),p.qZA(),p.TgZ(7,"div",43),p._uU(8),p.qZA(),p.TgZ(9,"mat-chip-list",44),p.YNc(10,Rt,2,1,"mat-chip",45),p.qZA(),p.qZA()}if(2&t){var a=e.$implicit;p.ekj("draft",a.draft),p.xp6(1),p.Q6J("matTooltip",p.lcZ(2,7,"Delete Article")),p.xp6(3),p.Q6J("ngIf",a.categories.length),p.xp6(2),p.Oqu(a.title),p.xp6(2),p.Oqu(a.body),p.xp6(2),p.Q6J("ngForOf",a.tags)}}function Vt(t,e){1&t&&(p.TgZ(0,"no-results-message"),p.TgZ(1,"span",51),p._uU(2,"Could not find any articles."),p.qZA(),p.TgZ(3,"span",52),p._uU(4,"Try to make article files less specific."),p.qZA(),p.qZA())}function jt(t,e){if(1&t&&(p.TgZ(0,"div",32,33),p.TgZ(2,"div",34),p.TgZ(3,"div"),p.YNc(4,Et,11,9,"div",35),p.qZA(),p.YNc(5,Vt,5,0,"no-results-message",36),p.ALo(6,"async"),p.qZA(),p._UZ(7,"loading-indicator",37),p.ALo(8,"async"),p._UZ(9,"datatable-footer"),p.qZA()),2&t){var n=e.ngIf,a=p.oxw();p.xp6(3),p.ekj("grid-flex-wrapper","grid"===a.selectedLayout),p.xp6(1),p.Q6J("ngForOf",n),p.xp6(1),p.Q6J("ngIf",p.lcZ(6,5,a.datatable.paginator.noResults$)),p.xp6(2),p.Q6J("isVisible",p.lcZ(8,7,a.datatable.paginator.loading$))}}var Ht=function(){return{exact:!0}},Bt=function(){var t=function(){function t(e,n,a,i){r(this,t),this.helpCenter=e,this.router=n,this.datatable=a,this.settings=i,this.selectedLayout="grid",this.articleOrderOptions=yt.Q,this.form=new u.cw({categories:new u.NI([]),tags:new u.NI([]),draft:new u.NI(null),order:new u.NI(this.settings.get("articles.default_order"))})}return l(t,[{key:"ngOnInit",value:function(){var t=this;this.datatable.init({uri:"help-center/articles"}),this.form.valueChanges.subscribe(function(e){t.datatable.filters$.next(e)})}},{key:"goToUpdateArticle",value:function(t){this.router.navigate(["/help-center/manage/","articles",t,"edit"])}},{key:"maybeDeleteArticle",value:function(t){var e=this;this.datatable.confirmResourceDeletion("article").subscribe(function(){e.helpCenter.deleteArticles([t.id]).subscribe(function(){return e.datatable.reset()})})}},{key:"setLayout",value:function(t){this.selectedLayout=t}},{key:"isLayoutActive",value:function(t){return this.selectedLayout===t}},{key:"toggleTagFilter",value:function(t){var e=this.form.get("tags").value,n=e.indexOf(t.name);n>-1?e.splice(n,1):e.push(t.name),this.form.get("tags").setValue(e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.Y36(et.x),p.Y36(g.F0),p.Y36(vt.x),p.Y36(xt.Z))},t.\u0275cmp=p.Xpm({type:t,selectors:[["articles-list"]],features:[p._Bn([vt.x])],decls:46,vars:20,consts:[[1,"action-bar"],[1,"nav"],["routerLinkActive","router-link-active","trans","",1,"nav-item","home-nav-item",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","router-link-active","trans","",1,"nav-item","categories-nav-item",3,"routerLink"],["routerLinkActive","router-link-active","trans","",1,"nav-item","articles-nav-item",3,"routerLink"],[1,"actions"],[1,"search-bar","input-container"],["placeholder","Search"],[1,"action-bar-action","change-layout-action"],[1,"no-style","grid-layout-button",3,"click"],["svgIcon","view-comfy"],[1,"no-style","list-layout-button",3,"click"],["svgIcon","view-list"],[1,"action-bar-action",3,"formGroup"],["name","order","id","order","formControlName","order"],[3,"value",4,"ngFor","ngForOf"],["routerLink","new",1,"new-article-button","new-item-button"],["svgIcon","add"],["trans",""],[1,"content"],[1,"article-list-filters"],[1,"filters-list",3,"formGroup"],["formControlName","categories",1,"article-categories-filter"],[1,"panel","tags-filter"],["trans","",1,"panel-header"],[1,"panel-body"],["formControlName","tags"],[1,"panel","article-type-filter"],["formControlName","draft"],["trans","",3,"value"],["class","articles-list-container",4,"ngIf"],[3,"value"],[1,"articles-list-container"],["scrollContainer",""],[1,"articles-list"],["class","articles-list-item",3,"draft","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"overlay",3,"isVisible"],[1,"articles-list-item",3,"click"],[1,"no-style","delete-article-button",3,"matTooltip","click"],["svgIcon","delete",1,"size-20"],["class","article-categories",4,"ngIf"],[1,"article-title"],[1,"article-body"],[1,"article-tags"],["color","standard",3,"click",4,"ngFor","ngForOf"],[1,"article-categories"],["class","parent-category",4,"ngIf"],[1,"category"],[1,"parent-category"],["color","standard",3,"click"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(t,e){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"a",2),p._uU(3,"Home"),p.qZA(),p.TgZ(4,"a",3),p._uU(5,"Categories"),p.qZA(),p.TgZ(6,"a",4),p._uU(7,"Articles"),p.qZA(),p.qZA(),p.TgZ(8,"div",5),p.TgZ(9,"div",6),p._UZ(10,"datatable-header-search-input",7),p.qZA(),p.TgZ(11,"div",8),p.TgZ(12,"button",9),p.NdJ("click",function(){return e.setLayout("grid")}),p._UZ(13,"mat-icon",10),p.qZA(),p.TgZ(14,"button",11),p.NdJ("click",function(){return e.setLayout("list")}),p._UZ(15,"mat-icon",12),p.qZA(),p.qZA(),p.TgZ(16,"div",13),p.TgZ(17,"select",14),p.YNc(18,Ft,3,4,"option",15),p.ALo(19,"keyvalue"),p.qZA(),p.qZA(),p.TgZ(20,"a",16),p._UZ(21,"mat-icon",17),p.TgZ(22,"span",18),p._uU(23,"Create New Article"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(24,"div",19),p.TgZ(25,"div",20),p.TgZ(26,"div",21),p._UZ(27,"categories-manager",22),p.TgZ(28,"div",23),p.TgZ(29,"div",24),p._uU(30,"Tags"),p.qZA(),p.TgZ(31,"div",25),p._UZ(32,"tags-manager",26),p.qZA(),p.qZA(),p.TgZ(33,"div",27),p.TgZ(34,"div",24),p._uU(35,"Article Status"),p.qZA(),p.TgZ(36,"div",25),p.TgZ(37,"mat-button-toggle-group",28),p.TgZ(38,"mat-button-toggle",29),p._uU(39,"All"),p.qZA(),p.TgZ(40,"mat-button-toggle",29),p._uU(41,"Published"),p.qZA(),p.TgZ(42,"mat-button-toggle",29),p._uU(43,"Draft"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.YNc(44,jt,10,9,"div",30),p.ALo(45,"async"),p.qZA()),2&t&&(p.xp6(2),p.Q6J("routerLink","/help-center")("routerLinkActiveOptions",p.DdM(19,Ht)),p.xp6(2),p.Q6J("routerLink","/help-center/manage/categories"),p.xp6(2),p.Q6J("routerLink","/help-center/manage/articles"),p.xp6(6),p.ekj("active",e.isLayoutActive("grid")),p.xp6(2),p.ekj("active",e.isLayoutActive("list")),p.xp6(2),p.Q6J("formGroup",e.form),p.xp6(2),p.Q6J("ngForOf",p.lcZ(19,15,e.articleOrderOptions)),p.xp6(8),p.Q6J("formGroup",e.form),p.xp6(12),p.Q6J("value",null),p.xp6(2),p.Q6J("value",0),p.xp6(2),p.Q6J("value",1),p.xp6(2),p.Q6J("ngIf",p.lcZ(45,17,e.datatable.data$)))},directives:[g.yS,g.Od,h.P,Zt.w,m.Hw,u.JL,u.sg,u.EJ,u.JJ,u.u,s.sg,I,at.s,It,Qt,s.O5,u.YN,u.Kr,it.Q,Pt.V,T.gM,Yt.qn,Yt.HS,Dt.U],pipes:[s.Nd,s.Ov,q.R],styles:["[_nghost-%COMP%]{display:block;max-height:calc(100vh - 70px);overflow:hidden;background-color:var(--be-background-alternative)}.content[_ngcontent-%COMP%]{display:flex}.article-list-filters[_ngcontent-%COMP%]{display:block;height:calc(100vh - 125px);overflow:auto;flex:0 0 302px;min-width:0;background-color:var(--be-background);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px rgba(0,0,0,.141),0 1px 5px rgba(0,0,0,.122);position:relative;z-index:1}.article-list-filters[_ngcontent-%COMP%]     .mat-button-toggle{flex:1 1 auto}.article-list-filters[_ngcontent-%COMP%]   .filters-list[_ngcontent-%COMP%]{padding:15px}.article-list-filters[_ngcontent-%COMP%]   mat-button-toggle-group[_ngcontent-%COMP%]{width:100%}no-results-message[_ngcontent-%COMP%]{margin-top:50px}.articles-list-container[_ngcontent-%COMP%]{flex:1 1 auto;height:calc(100vh - 120px);overflow:auto}datatable-footer[_ngcontent-%COMP%]{border-top:1px solid var(--be-divider-default);overflow:hidden;background-color:var(--be-background)}.articles-list[_ngcontent-%COMP%]{padding:10px;min-height:calc(100% - 57px)}.articles-list-item[_ngcontent-%COMP%]{background-color:var(--be-background);box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px rgba(0,0,0,.141),0 1px 5px rgba(0,0,0,.122);padding:15px;border-radius:4px;color:var(--be-secondary-text);cursor:pointer;margin-bottom:10px;transition:background-color .2s ease-in-out;position:relative}.articles-list-item[_ngcontent-%COMP%]:hover{background-color:var(--be-accent-emphasis)}.delete-article-button[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;color:var(--be-secondary-text)}.article-categories[_ngcontent-%COMP%]{font-size:1.3rem;font-style:italic;margin-bottom:15px}.article-title[_ngcontent-%COMP%]{font-weight:500;font-size:1.9rem}.article-body[_ngcontent-%COMP%]{font-size:1.4rem;word-wrap:break-word}.article-tags[_ngcontent-%COMP%]{margin-top:15px}.grid-flex-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.grid-flex-wrapper[_ngcontent-%COMP%]   .articles-list-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:calc(25% - 10px);margin:5px}@media screen and (max-width: 1280px){.grid-flex-wrapper[_ngcontent-%COMP%]   .articles-list-item[_ngcontent-%COMP%]{width:calc(33.33% - 10px)}}@media screen and (max-width: 1024px){.grid-flex-wrapper[_ngcontent-%COMP%]   .articles-list-item[_ngcontent-%COMP%]{width:calc(50% - 10px)}}@media screen and (max-width: 768px){.grid-flex-wrapper[_ngcontent-%COMP%]   .articles-list-item[_ngcontent-%COMP%]{width:100%}}.grid-flex-wrapper[_ngcontent-%COMP%]   .article-title[_ngcontent-%COMP%]{margin-bottom:10px;font-size:2rem}.grid-flex-wrapper[_ngcontent-%COMP%]   .article-body[_ngcontent-%COMP%]{font-size:1.6rem;flex:1 1 auto}.action-bar-action[_ngcontent-%COMP%]{display:flex;border-right:1px solid var(--be-divider-default);padding:0 20px;height:100%;width:auto}.action-bar-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.action-bar-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:26px;height:26px}.action-bar-action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{margin-right:5px}.action-bar-action[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:var(--be-accent-default)}.action-bar-action[_ngcontent-%COMP%]     select{height:100%;border:none;outline:none}"]}),t}(),zt=o(24688),$t=o(70837),Wt=function(){var t=function t(e,n){r(this,t),this.settings=e,this.currentUser=n};return t.\u0275fac=function(e){return new(e||t)(p.Y36(xt.Z),p.Y36(zt.I))},t.\u0275cmp=p.Xpm({type:t,selectors:[["help-center-manage"]],decls:3,vars:0,consts:[["menuPosition","agent-mailbox"],[1,"body"]],template:function(t,e){1&t&&(p._UZ(0,"material-navbar",0),p.TgZ(1,"div",1),p._UZ(2,"router-outlet"),p.qZA())},directives:[$t.e,g.lC],styles:["help-center-manage .navbar{box-shadow:none}help-center-manage .navbar .logo{margin-right:50px}help-center-manage .body{height:calc(100vh - 70px)}help-center-manage .action-bar{background-color:var(--be-background);height:55px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px rgba(0,0,0,.141),0 1px 5px rgba(0,0,0,.122);display:flex;justify-content:center;position:relative;z-index:2}help-center-manage .action-bar .nav{flex:1 1 auto;display:flex;align-items:center}help-center-manage .action-bar .nav .nav-item{display:inline-block;color:var(--be-secondary-text);font-size:1.6rem;margin-left:25px;border-bottom:2px solid transparent;height:100%;line-height:55px}help-center-manage .action-bar .nav .nav-item.router-link-active{border-color:var(--be-accent-default)}help-center-manage .action-bar .actions{flex:1 1 auto;display:flex;justify-content:flex-end;align-items:center;margin-right:30px}help-center-manage .action-bar .actions .input-container{flex:0 0 300px;height:100%;position:relative}help-center-manage .action-bar .actions .input-container .mat-icon{position:absolute;top:16px;left:10px;color:var(--be-secondary-text)}help-center-manage .action-bar .actions .input-container input{font-size:1.7rem;padding-left:40px;border-top:none;border-bottom:none;height:100%;border-radius:0}help-center-manage .action-bar .actions .action{width:auto}help-center-manage .action-bar .actions .new-item-button{background-color:var(--be-accent-default);color:var(--be-accent-contrast);border-radius:50px;padding:1px 20px;border:none;line-height:30px;vertical-align:middle;white-space:nowrap;margin-left:30px}help-center-manage .action-bar .actions .new-item-button .mat-icon{transition:transform .2s ease-in-out;vertical-align:middle}help-center-manage .action-bar .actions .new-item-button:hover mat-icon{transform:rotate(180deg)}help-center-manage .panel{margin-bottom:15px;background-color:var(--be-background);border:1px solid var(--be-divider-default);border-radius:3px}help-center-manage .panel .panel-header{display:flex;align-items:center;padding:0 10px;background-color:var(--be-background-alternative);border-bottom:1px solid var(--be-divider-default);min-height:41px}help-center-manage .panel .panel-header button{margin-left:auto}help-center-manage .panel .panel-body{overflow:auto;padding:10px}help-center-manage .panel .panel-body .filter-button{min-width:75px;padding:0 5px}help-center-manage .panel .panel-body .filter-button:not(:last-of-type){margin-right:4px}help-center-manage .panel .panel-body .filter-button.active{background-color:var(--be-accent-default);color:var(--be-accent-contrast)}\n"],encapsulation:2}),t}(),Xt=o(83461),Kt=o(8208),te=o(90962);function ee(t,e){1&t&&p._UZ(0,"mat-icon",16)}function ne(t,e){1&t&&(p.TgZ(0,"span",17),p._uU(1,"No Articles"),p.qZA())}function ae(t,e){if(1&t&&(p.TgZ(0,"span",21),p._uU(1),p.TgZ(2,"span",22),p._uU(3,"Articles"),p.qZA(),p.qZA()),2&t){var n=p.oxw(2);p.xp6(1),p.hij("",n.category.articles_count," ")}}function ie(t,e){1&t&&(p.TgZ(0,"span",23),p._uU(1,"1 Article"),p.qZA())}function oe(t,e){if(1&t&&(p.TgZ(0,"span",18),p.YNc(1,ae,4,1,"span",19),p.YNc(2,ie,2,0,"span",20),p.qZA()),2&t){var n=p.oxw();p.xp6(1),p.Q6J("ngIf",n.category.articles_count>1),p.xp6(1),p.Q6J("ngIf",1==n.category.articles_count)}}function re(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"button",24),p.NdJ("click",function(){return p.CHM(n),p.oxw().openCreateChildCategoryModal()}),p.ALo(1,"trans"),p._UZ(2,"mat-icon",25),p.qZA()}2&t&&p.Q6J("matTooltip",p.lcZ(1,1,"Create Child Category"))}function ce(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"button",26),p.NdJ("click",function(){p.CHM(n);var t=p.oxw();return t.maybeDetachCategory(t.category.id)}),p.ALo(1,"trans"),p._UZ(2,"mat-icon",27),p.qZA()}2&t&&p.Q6J("matTooltip",p.lcZ(1,1,"Detach Category"))}var le=function(){var t=function(){function t(e,n,a,i){r(this,t),this.modal=e,this.api=n,this.router=a,this.storage=i,this.onChange=new p.vpe}return l(t,[{key:"openCreateChildCategoryModal",value:function(){var t=this;this.modal.show(W,{parentId:this.category.id}).afterClosed().subscribe(function(){return t.onChange.emit()})}},{key:"openUpdateCategoryModal",value:function(t){var e=this;this.modal.show(W,{category:t}).afterClosed().subscribe(function(){return e.onChange.emit()})}},{key:"maybeDeleteCategory",value:function(t){var e=this;this.modal.show(Kt.z,{title:"Delete Category",body:"Are you sure you want to delete this category?",bodyBold:"Children of this category will not be deleted.",ok:"Delete"}).afterClosed().subscribe(function(n){!n||e.api.deleteCategory(t).subscribe(function(){return e.onChange.emit()})})}},{key:"maybeDetachCategory",value:function(t){var e=this;this.modal.show(Kt.z,{title:"Detach Category",body:"Are you sure you want to detach this category from its parent?",ok:"Detach"}).afterClosed().subscribe(function(n){!n||e.api.createOrUpdateCategory({id:t,parent_id:null}).subscribe(function(){return e.onChange.emit()})})}},{key:"navigateToArticlesList",value:function(t){var e=[t.id];t.parent_id&&e.push(t.parent_id),this.storage.set("selectedCategories",e),this.router.navigate(["/help-center/manage/articles"])}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.Y36(tt.u),p.Y36(C.G),p.Y36(g.F0),p.Y36(te.m))},t.\u0275cmp=p.Xpm({type:t,selectors:[["category-list-item"]],inputs:{category:"category"},outputs:{onChange:"onChange"},decls:19,vars:12,consts:[[1,"category-name-container"],["cdkDragHandle","",1,"no-style","drag-handle"],["svgIcon","drag-handle"],[1,"category-name",3,"click"],["svgIcon","visibility-off","class","hidden-icon","color","warn",4,"ngIf"],[1,"info"],[1,"articles-count"],["class","no-articles","trans","",4,"ngIf"],["class","has-articles",4,"ngIf"],[1,"actions"],["mat-icon-button","",1,"update-category-button",3,"matTooltip","click"],["svgIcon","settings",1,"size-20"],["mat-icon-button","","class","new-child-category-button",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","","class","detach-category-button",3,"matTooltip","click",4,"ngIf"],["mat-icon-button","",1,"delete-category-button",3,"matTooltip","click"],["svgIcon","delete-forever",1,"size-20"],["svgIcon","visibility-off","color","warn",1,"hidden-icon"],["trans","",1,"no-articles"],[1,"has-articles"],["class","plural",4,"ngIf"],["class","singular","trans","",4,"ngIf"],[1,"plural"],["trans",""],["trans","",1,"singular"],["mat-icon-button","",1,"new-child-category-button",3,"matTooltip","click"],["svgIcon","create-new-folder",1,"size-20"],["mat-icon-button","",1,"detach-category-button",3,"matTooltip","click"],["svgIcon","delete",1,"size-20"]],template:function(t,e){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"button",1),p._UZ(2,"mat-icon",2),p.qZA(),p.TgZ(3,"span",3),p.NdJ("click",function(){return e.navigateToArticlesList(e.category)}),p._uU(4),p.qZA(),p.YNc(5,ee,1,0,"mat-icon",4),p.qZA(),p.TgZ(6,"div",5),p.TgZ(7,"div",6),p.YNc(8,ne,2,0,"span",7),p.YNc(9,oe,3,2,"span",8),p.qZA(),p.qZA(),p.TgZ(10,"div",9),p.TgZ(11,"button",10),p.NdJ("click",function(){return e.openUpdateCategoryModal(e.category)}),p.ALo(12,"trans"),p._UZ(13,"mat-icon",11),p.qZA(),p.YNc(14,re,3,3,"button",12),p.YNc(15,ce,3,3,"button",13),p.TgZ(16,"button",14),p.NdJ("click",function(){return e.maybeDeleteCategory(e.category.id)}),p.ALo(17,"trans"),p._UZ(18,"mat-icon",15),p.qZA(),p.qZA()),2&t&&(p.xp6(4),p.Oqu(e.category.name),p.xp6(1),p.Q6J("ngIf",e.category.hidden),p.xp6(3),p.Q6J("ngIf",!e.category.articles_count),p.xp6(1),p.Q6J("ngIf",e.category.articles_count),p.xp6(2),p.Q6J("matTooltip",p.lcZ(12,8,"Update Category")),p.xp6(3),p.Q6J("ngIf",!e.category.parent_id),p.xp6(1),p.Q6J("ngIf",e.category.parent_id),p.xp6(1),p.Q6J("matTooltip",p.lcZ(17,10,"Delete Category")))},directives:[Xt.Bh,m.Hw,s.O5,f.lW,T.gM,h.P],pipes:[q.R],styles:["category-list-item{display:flex;vertical-align:middle;justify-content:center}category-list-item .category-name-container{flex:1 1 auto;display:flex;justify-content:flex-start;align-items:center}category-list-item .category-name-container .drag-handle,category-list-item .category-name-container .category-name{vertical-align:middle}category-list-item .category-name-container .category-name:hover{text-decoration:underline;cursor:pointer}category-list-item .drag-handle{color:var(--be-secondary-text);margin-right:8px;cursor:move}category-list-item .info{flex:0 0 150px;display:flex;align-items:center;color:var(--be-secondary-text)}category-list-item .actions{flex:0 0 150px;text-align:right}category-list-item .actions button{color:var(--be-secondary-text)}category-list-item .hidden-icon{margin-left:5px;vertical-align:middle}\n"],encapsulation:2,changeDetection:0}),t}();function se(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"category-list-item",22),p.NdJ("onChange",function(){return p.CHM(n),p.oxw(3).updateCategories()}),p.qZA()}if(2&t){var a=e.$implicit;p.Q6J("cdkDragData",a)("category",a),p.uIk("data-id",a.id)}}function ue(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"div",20),p.NdJ("cdkDropListDropped",function(t){p.CHM(n);var e=p.oxw().$implicit;return p.oxw().reorderCategories(t,e)}),p.YNc(1,se,1,3,"category-list-item",21),p.qZA()}if(2&t){var a=p.oxw().$implicit,i=p.oxw();p.ekj("hidden",!i.categoryChildrenVisible),p.Q6J("cdkDropListDisabled",i.shouldDisableReorder()),p.xp6(1),p.Q6J("ngForOf",a.children)}}function ge(t,e){if(1&t){var n=p.EpF();p.TgZ(0,"div",17),p.TgZ(1,"category-list-item",18),p.NdJ("onChange",function(){return p.CHM(n),p.oxw().updateCategories()}),p.qZA(),p.YNc(2,ue,2,4,"div",19),p.qZA()}if(2&t){var a=e.$implicit;p.xp6(1),p.Q6J("cdkDragData",a)("category",a),p.uIk("data-id",a.id),p.xp6(1),p.Q6J("ngIf",a.children.length)}}var de=function(){return{exact:!0}},pe=function(){var t=function(){function t(e,n){r(this,t),this.api=e,this.modal=n,this.searchQuery=new u.NI,this.allCategories=[],this.filteredCategories=[],this.categoryChildrenVisible=!0}return l(t,[{key:"ngOnInit",value:function(){this.updateCategories(),this.bindSearchQuery()}},{key:"showNewCategoryModal",value:function(){var t=this;this.modal.show(W).afterClosed().subscribe(function(e){!e||t.updateCategories()})}},{key:"updateCategories",value:function(){var t=this;this.api.getCategories().subscribe(function(e){t.filteredCategories=e.pagination.data,t.allCategories=e.pagination.data,t.filterCategories(t.searchQuery.value)})}},{key:"bindSearchQuery",value:function(){var t=this;this.searchQuery.valueChanges.pipe((0,_.b)(400),(0,A.x)()).subscribe(function(e){return t.filterCategories(e)})}},{key:"filterCategories",value:function(t){this.filteredCategories=(new y).filter(t,this.allCategories)}},{key:"reorderCategories",value:function(t,e){var n=e?e.children:this.filteredCategories;(0,Xt.bA)(n,t.previousIndex,t.currentIndex);var a=n.map(function(t){return t.id});this.api.reorderCategories(a,e?e.id:null).subscribe()}},{key:"toggleCategoryChildren",value:function(){this.categoryChildrenVisible=!this.categoryChildrenVisible}},{key:"shouldDisableReorder",value:function(){return this.searchQuery.value}}]),t}();return t.\u0275fac=function(e){return new(e||t)(p.Y36(C.G),p.Y36(tt.u))},t.\u0275cmp=p.Xpm({type:t,selectors:[["categories-list"]],decls:23,vars:13,consts:[[1,"action-bar"],[1,"nav"],["routerLinkActive","router-link-active","trans","",1,"nav-item",3,"routerLink","routerLinkActiveOptions"],["routerLinkActive","router-link-active","trans","",1,"nav-item",3,"routerLink"],[1,"actions"],[1,"action"],["mat-icon-button","",1,"toggle-children-btn",3,"matTooltip","click"],["svgIcon","unfold-more"],[1,"search-bar","input-container"],["type","text","placeholder","Search","trans-placeholder","",1,"categories-search-input",3,"formControl"],["svgIcon","search"],[1,"new-category-button","new-item-button",3,"click"],["svgIcon","add"],["trans",""],[1,"container"],["cdkDropList","",1,"categories-list",3,"cdkDropListDisabled","cdkDropListDropped"],["class","category-container",4,"ngFor","ngForOf"],[1,"category-container"],["cdkDrag","",1,"category-list-item","parent-category",3,"cdkDragData","category","onChange"],["class","category-children","cdkDropList","",3,"hidden","cdkDropListDisabled","cdkDropListDropped",4,"ngIf"],["cdkDropList","",1,"category-children",3,"cdkDropListDisabled","cdkDropListDropped"],["cdkDrag","","class","category-list-item child-category",3,"cdkDragData","category","onChange",4,"ngFor","ngForOf"],["cdkDrag","",1,"category-list-item","child-category",3,"cdkDragData","category","onChange"]],template:function(t,e){1&t&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"a",2),p._uU(3,"Home"),p.qZA(),p.TgZ(4,"a",3),p._uU(5,"Categories"),p.qZA(),p.TgZ(6,"a",3),p._uU(7,"Articles"),p.qZA(),p.qZA(),p.TgZ(8,"div",4),p.TgZ(9,"div",5),p.TgZ(10,"button",6),p.NdJ("click",function(){return e.toggleCategoryChildren()}),p.ALo(11,"trans"),p._UZ(12,"mat-icon",7),p.qZA(),p.qZA(),p.TgZ(13,"div",8),p._UZ(14,"input",9),p._UZ(15,"mat-icon",10),p.qZA(),p.TgZ(16,"button",11),p.NdJ("click",function(){return e.showNewCategoryModal()}),p._UZ(17,"mat-icon",12),p.TgZ(18,"span",13),p._uU(19,"New Category"),p.qZA(),p.qZA(),p.qZA(),p.qZA(),p.TgZ(20,"div",14),p.TgZ(21,"section",15),p.NdJ("cdkDropListDropped",function(t){return e.reorderCategories(t)}),p.YNc(22,ge,3,4,"div",16),p.qZA(),p.qZA()),2&t&&(p.xp6(2),p.Q6J("routerLink","/help-center")("routerLinkActiveOptions",p.DdM(12,de)),p.xp6(2),p.Q6J("routerLink","/help-center/manage/categories"),p.xp6(2),p.Q6J("routerLink","/help-center/manage/articles"),p.xp6(4),p.ekj("active",e.categoryChildrenVisible),p.Q6J("matTooltip",p.lcZ(11,10,"Toggle child categories")),p.xp6(4),p.Q6J("formControl",e.searchQuery),p.xp6(7),p.Q6J("cdkDropListDisabled",e.shouldDisableReorder()),p.xp6(1),p.Q6J("ngForOf",e.filteredCategories))},directives:[g.yS,g.Od,h.P,f.lW,T.gM,m.Hw,u.Fj,u.JJ,u.oH,Xt.Wj,s.sg,le,Xt.Zt,s.O5],pipes:[q.R],styles:["categories-list{display:block;background-color:var(--be-background-alternative)}categories-list .container{min-height:calc(100vh - 125px);margin:0 auto;padding-top:35px}categories-list category-list-item{background-color:var(--be-background);padding:15px;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px rgba(0,0,0,.141),0 1px 3px rgba(0,0,0,.122);font-size:1.6rem;margin-bottom:10px;transition:background-color .2s ease-in-out;border-radius:4px}categories-list category-list-item:hover{background-color:var(--be-accent-emphasis)}categories-list .category-children{margin-left:20px}categories-list .toggle-children-btn{color:var(--be-secondary-text);margin-right:10px}categories-list .toggle-children-btn.active{color:var(--be-accent-default)}categories-list .cdk-drop-list-disabled .drag-handle{color:rgba(0,0,0,.259);cursor:not-allowed}categories-list .cdk-drag-placeholder{opacity:0}categories-list .cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}categories-list .cdk-drop-list-dragging .cdk-drag:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}\n"],encapsulation:2}),t}(),he=o(42690),fe=g.Bz.forChild([{path:"",component:Wt,canActivate:[he.a],children:[{path:"",redirectTo:"articles"},{path:"articles",component:Bt,data:{permissions:["tags.view","articles.view","articles.create"]}},{path:"categories",component:pe,data:{permissions:["articles.view","articles.create"]}},{path:"articles/new",component:gt,data:{permissions:["articles.create"]}},{path:"articles/:article_id/edit",component:gt,resolve:{article:bt},data:{permissions:["articles.update"]}}]}]),me=o(12245),be=o(5259),ve=o(18295),ye=o(49866),xe=o(95217),Ze=o(43389),ke=o(16450),_e=o(13202),Ae=o(66705),Ce=o(58193),Te=o(31330),we=function(){var t=function t(){r(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[s.ez,u.u5,u.UX,g.Bz,be.y,me.b,ve.l,ye.N,xe.u,Ze.p,ke.m,_e.R,Te.X,Ae.z,fe,Ce.x,d.Is,S.rP,Xt._t,f.ot,m.Ps,T.AV,w.p9,Lt,Yt.Hi]]}),t}()}}])}();