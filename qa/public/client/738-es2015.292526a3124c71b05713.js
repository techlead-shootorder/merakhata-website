"use strict";(self.webpackChunkbedesk=self.webpackChunkbedesk||[]).push([[738],{8532:function(e,t,n){n.r(t),n.d(t,{AppAppearanceModule:function(){return Kt}});var i=n(38583),o=n(3679),a=n(24668),s=n(6966),r=n(87636),c=n(88002),l=n(37716);const u=new l.OlP("APPEARANCE_EDITOR_CONFIG"),p={navigationRoutes:[],menus:{availableRoutes:["login","register","contact","billing/pricing","account-settings","admin/appearance","admin/users","admin/settings/authentication","admin/settings/branding","admin/settings/cache","admin/settings/providers","admin/roles"],positions:["admin-navbar","custom-page-navbar","auth-page-footer"]},sections:[{name:"general",position:1},{name:"themes",position:2},{name:"menus",position:3},{name:"custom-code",position:4},{name:"seo-settings",position:5}]};var d=n(3543),g=n(95347);class h{constructor(e,t){this.route=e,this.queryParams=t,this.type=g.R.Navigate}}class m{constructor(e,t){this.key=e,this.value=t,this.type=g.R.SetConfig}}class f{constructor(e,t=0){this.selector=e,this.index=t,this.type=g.R.Select}}class b{constructor(){this.type=g.R.Deselect}}class v{constructor(e,t){this.key=e,this.value=t,this.type=g.R.SetColors}}class Z{constructor(e){this.content=e,this.type=g.R.SetCustomCss}}class x{constructor(e){this.content=e,this.type=g.R.SetCustomHtml}}var C=n(55809),T=n(26215),A=n(82298),_=n(22759),M=n(45435),y=n(68939),w=n(18819),q=n(89225),k=n.n(q),O=n(34673),P=n(90299),J=n(35718);let I=(()=>{class e{constructor(e,t,n,i){this.settings=e,this.router=t,this.http=n,this.toast=i,this.activePanel$=new T.X(null),this.defaultSettings={},this.initiated$=new A.t(1),this.loading$=new T.X(!1),this.changes$=new T.X(null)}addChanges(e){this.changes$.next(Object.assign(Object.assign({},this.changes$.value),e))}openPanel(e){const t=this.config.sections.find(t=>(0,s.V)(t.name)===e);this.activePanel$.next(t),this.navigate(t)}init(e,t,n){return(0,_.R)(window,"message").pipe((0,M.h)(e=>e.data===C.B&&new URL(e.origin).hostname===window.location.hostname)).subscribe(()=>{this.initiated$.next(!0),this.initiated$.complete(),this.activePanel$.value&&this.navigate(this.activePanel$.value)}),t.forEach(e=>{"env"===e.name?this.defaultSettings=Object.assign(Object.assign({},this.defaultSettings),e.value):this.defaultSettings[e.name]=e.value}),this.initConfig(n),this.initIframe(e),this.initiated$}saveChanges(e){e&&this.addChanges(e),this.loading$.next(!0);const t=(this.saveRequest?this.saveRequest:e=>this.http.post("admin/appearance",e))(this.changes$.value).pipe((0,y.x)(()=>this.loading$.next(!1)),(0,w.B)());return t.subscribe(()=>{this.changes$.next(null),this.toast.open("Appearance saved")}),t}setSaveRequest(e){this.saveRequest=e}closeActivePanel(){this.router.navigate(["/admin/appearance"])}navigate(e){this.postMessage(new h((null==e?void 0:e.route)||this.config.defaultRoute,null==e?void 0:e.queryParams))}setConfig(e,t){this.postMessage(new m(e,t))}selectNode(e,t=0){!e||this.postMessage(new f(e,t))}deselectNode(){this.postMessage(new b)}postMessage(e){this.previewWindow.postMessage(e,"*")}currentValue(e){return e.startsWith("env.")||e.startsWith("custom-code.")?this.defaultSettings[e]:this.settings.get(e)}initConfig(e){const t=k().all(e);t.sections=t.sections.sort((e,t)=>e.position>t.position?1:-1),t.defaultRoute||(t.defaultRoute="/"),this.settings.get("site.has_mobile_app")&&t.menus.positions.push("mobile-app-about"),this.config=t}initIframe(e){const t=this.settings.getBaseUrl()+"/"+this.config.defaultRoute+`?be-preview-mode=${C.B}`;e.src=function(e){return e.replace(/([^:]\/)\/+/g,"$1")}(t),this.previewWindow=e.contentWindow}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(O.Z),l.LFG(a.F0),l.LFG(P.r),l.LFG(J.F))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var N=n(96605),U=n(76627),$=n(15515),Y=n(51095),Q=n(35566);function S(e,t){1&e&&l._UZ(0,"mat-icon",9)}function F(e,t){if(1&e&&(l.TgZ(0,"span"),l.YNc(1,S,1,0,"mat-icon",7),l.TgZ(2,"span",8),l._uU(3),l.qZA(),l.qZA()),2&e){const e=l.oxw(),t=e.first,n=e.last,i=e.$implicit,o=l.oxw();l.xp6(1),l.Q6J("ngIf",!t),l.xp6(1),l.ekj("last",n),l.xp6(1),l.Oqu(o.viewName(i))}}function L(e,t){if(1&e&&(l.ynx(0),l.YNc(1,F,4,4,"span",6),l.BQk()),2&e){const e=t.$implicit;l.xp6(1),l.Q6J("ngIf",e)}}let V=(()=>{class e{constructor(){this.path=[],this.back=new l.vpe}viewName(e){return(0,Q.f)(e).replace(/_/g," ")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["appearance-panel-meta"]],inputs:{path:"path"},outputs:{back:"back"},decls:7,vars:1,consts:[[1,"back-button",3,"click"],["svgIcon","keyboard-arrow-left"],[1,"title"],["trans","",1,"static"],[1,"path"],[4,"ngFor","ngForOf"],[4,"ngIf"],["svgIcon","keyboard-arrow-right","class","separator",4,"ngIf"],["trans","",1,"name"],["svgIcon","keyboard-arrow-right",1,"separator"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.NdJ("click",function(){return t.back.emit()}),l._UZ(1,"mat-icon",1),l.qZA(),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l._uU(4,"Customizing"),l.qZA(),l.TgZ(5,"div",4),l.YNc(6,L,2,1,"ng-container",5),l.qZA(),l.qZA()),2&e&&(l.xp6(6),l.Q6J("ngForOf",t.path))},directives:[U.Hw,$.P,i.sg,i.O5],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:70px;margin-bottom:10px;border-bottom:1px solid var(--be-divider-default);background-color:var(--be-background)}.title[_ngcontent-%COMP%]{padding:10px}.path[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;max-width:240px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.name[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;text-transform:capitalize}.last[_ngcontent-%COMP%]{color:var(--be-accent-default)}.separator[_ngcontent-%COMP%]{vertical-align:middle;color:var(--be-secondary-text);width:18px;height:18px;line-height:18px}"],changeDetection:0}),e})();var D=n(9141),E=n(56313),H=n(53534),R=n(58480),z=n(48976),j=n(64563),G=n(33935),X=n(66452),B=n(12178);function W(e,t){1&e&&l._UZ(0,"image-or-icon",11),2&e&&l.Q6J("src",t.ngIf)}function K(e,t){1&e&&(l.TgZ(0,"div",12),l._UZ(1,"mat-icon",13),l.TgZ(2,"span",14),l._uU(3,"Upload"),l.qZA(),l.qZA())}function ee(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",15),l.NdJ("click",function(){return l.CHM(e),l.oxw().remove()}),l._uU(1,"Remove"),l.qZA()}}function te(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",15),l.NdJ("click",function(){return l.CHM(e),l.oxw().useDefault()}),l._uU(1,"Use Default"),l.qZA()}}function ne(e,t){1&e&&l._UZ(0,"mat-progress-bar",16)}const ie=["*"];let oe=(()=>{class e{constructor(e,t,n,i){this.editor=e,this.uploadQueue=t,this.validator=n,this.settings=i,this.image$=new T.X(null),this.loading$=new T.X(!1),this.validator.showToast=!0}openModal(){const e={uri:this.backendUri||z.C.Image,httpParams:{diskPrefix:this.diskPrefix},validator:this.validator};(0,E.r)({types:[H.j.image]}).then(t=>{this.loading$.next(!0),this.uploadQueue.start(t,e).pipe((0,y.x)(()=>this.loading$.next(!1))).subscribe(e=>{this.updateValue(e.fileEntry.url)})})}remove(){this.updateValue(null)}useDefault(){this.updateValue(this.defaultValue)}updateValue(e){this.propagateChange(e),this.image$.next(e?e+`?v=${(0,R.O)(8)}`:null)}writeValue(e){this.image$.next(e)}registerOnChange(e){this.propagateChange=e}registerOnTouched(){}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(I),l.Y36(D.A),l.Y36(j.G),l.Y36(O.Z))},e.\u0275cmp=l.Xpm({type:e,selectors:[["appearance-image-input"]],hostAttrs:["tabindex","0"],inputs:{defaultValue:"defaultValue",backendUri:"backendUri",diskPrefix:"diskPrefix"},features:[l._Bn([D.A,{provide:o.JU,useExisting:e,multi:!0}])],ngContentSelectors:ie,decls:18,vars:12,consts:[[1,"field-container",3,"click"],["trans","",1,"label","fake-label"],[1,"img-container"],["class","inherit-size",3,"src",4,"ngIf","ngIfElse"],["noImage",""],[1,"actions-dropdown"],[1,"no-style",3,"matMenuTriggerFor","click"],["svgIcon","settings",1,"trigger-icon"],["actionsMenu",""],["mat-menu-item","","trans","",3,"click",4,"ngIf"],["mode","indeterminate","color","accent",4,"ngIf"],[1,"inherit-size",3,"src"],[1,"no-image"],["svgIcon","photo-size-select-actual"],["trans","",1,"text"],["mat-menu-item","","trans","",3,"click"],["mode","indeterminate","color","accent"]],template:function(e,t){if(1&e&&(l.F$t(),l.TgZ(0,"div",0),l.NdJ("click",function(){return t.openModal()}),l.TgZ(1,"div",1),l.Hsn(2),l.qZA(),l.TgZ(3,"div",2),l.YNc(4,W,1,1,"image-or-icon",3),l.ALo(5,"async"),l.YNc(6,K,4,0,"ng-template",null,4,l.W1O),l.TgZ(8,"div",5),l.TgZ(9,"button",6),l.NdJ("click",function(e){return e.stopPropagation()}),l._UZ(10,"mat-icon",7),l.qZA(),l.TgZ(11,"mat-menu",null,8),l.YNc(13,ee,2,0,"div",9),l.ALo(14,"async"),l.YNc(15,te,2,0,"div",9),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(16,ne,1,0,"mat-progress-bar",10),l.ALo(17,"async")),2&e){const e=l.MAs(7),n=l.MAs(12);l.xp6(4),l.Q6J("ngIf",l.lcZ(5,6,t.image$))("ngIfElse",e),l.xp6(5),l.Q6J("matMenuTriggerFor",n),l.xp6(4),l.Q6J("ngIf",l.lcZ(14,8,t.image$)),l.xp6(2),l.Q6J("ngIf",t.defaultValue),l.xp6(1),l.Q6J("ngIf",l.lcZ(17,10,t.loading$))}},directives:[$.P,i.O5,G.p6,U.Hw,G.VK,X.A,G.OP,B.pW],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:block;cursor:pointer;margin-bottom:15px;position:relative}.label[_ngcontent-%COMP%]{margin-bottom:5px}.img-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative;height:80px;padding:5px;width:100%;border:1px solid var(--be-divider-default);border-radius:4px;background-color:var(--be-chip);overflow:hidden}image-or-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;-o-object-fit:cover;object-fit:cover}.no-image[_ngcontent-%COMP%]{text-align:center}.no-image[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:block;color:var(--be-hint-text);width:40px;height:40px}.no-image[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:var(--be-link);margin-top:3px;font-size:1.3rem}.actions-dropdown[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;color:var(--be-secondary-text)}.actions-dropdown[_ngcontent-%COMP%]   .trigger-icon[_ngcontent-%COMP%]{width:20px;height:20px}.mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%}"],changeDetection:0}),e})(),ae=(()=>{class e{constructor(e,t){this.el=e,this.editor=t}ngOnInit(){this.el.nativeElement.addEventListener("focus",()=>{this.editor.selectNode(this.selector)}),this.el.nativeElement.addEventListener("blur",()=>{this.editor.deselectNode()})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(l.SBq),l.Y36(I))},e.\u0275dir=l.lG2({type:e,selectors:[["","highlightInPreview",""]],inputs:{selector:["highlightInPreview","selector"]}}),e})();const se=function(){return["General"]};let re=(()=>{class e{constructor(e,t){this.fb=e,this.editor=t,this.form=this.fb.group({"branding.logo_light":[""],"branding.logo_dark":[""],"branding.favicon":[""],"env.app_name":[""],"branding.site_description":[""]})}ngOnInit(){const e={};Object.keys(this.form.controls).forEach(t=>{e[t]=this.editor.currentValue(t)}),this.form.patchValue(e),this.form.valueChanges.subscribe(e=>{this.editor.addChanges(e)})}defaultValue(e){return this.editor.defaultSettings[e]}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(o.qu),l.Y36(I))},e.\u0275cmp=l.Xpm({type:e,selectors:[["general-appearance-panel"]],hostAttrs:[1,"appearance-panel"],decls:16,vars:8,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],["formControlName","branding.logo_light","diskPrefix","branding_media","highlightInPreview",".logo",3,"defaultValue"],["formControlName","branding.logo_dark","diskPrefix","branding_media","highlightInPreview",".logo",3,"defaultValue"],["backendUri","uploads/favicon","diskPrefix","branding_media","formControlName","branding.favicon",3,"defaultValue"],[1,"input-container"],["for","env.app_name","trans",""],["type","text","id","env.app_name","formControlName","env.app_name",3,"placeholder"],["for","branding.site_description","trans",""],["id","branding.site_description","rows","4","formControlName","branding.site_description",3,"placeholder"]],template:function(e,t){1&e&&(l.TgZ(0,"appearance-panel-meta",0),l.NdJ("back",function(){return t.editor.closeActivePanel()}),l.qZA(),l.TgZ(1,"div",1),l.TgZ(2,"appearance-image-input",2),l._uU(3," Logo #1 (For top navbar) "),l.qZA(),l.TgZ(4,"appearance-image-input",3),l._uU(5," Logo #2 (Everywhere else) "),l.qZA(),l.TgZ(6,"appearance-image-input",4),l._uU(7," Favicon "),l.qZA(),l.TgZ(8,"div",5),l.TgZ(9,"label",6),l._uU(10,"Site Name"),l.qZA(),l._UZ(11,"input",7),l.qZA(),l.TgZ(12,"div",5),l.TgZ(13,"label",8),l._uU(14,"Site Description"),l.qZA(),l._UZ(15,"textarea",9),l.qZA(),l.qZA()),2&e&&(l.Q6J("path",l.DdM(7,se)),l.xp6(1),l.Q6J("formGroup",t.form),l.xp6(1),l.Q6J("defaultValue",t.defaultValue("branding.logo_light")),l.xp6(2),l.Q6J("defaultValue",t.defaultValue("branding.logo_dark")),l.xp6(2),l.Q6J("defaultValue",t.defaultValue("branding.favicon")),l.xp6(5),l.Q6J("placeholder",t.defaultValue("env.app_name")),l.xp6(4),l.Q6J("placeholder",t.defaultValue("branding.site_description")))},directives:[V,o.JL,o.sg,oe,o.JJ,o.u,ae,$.P,o.Fj],styles:[""],changeDetection:0}),e})();var ce=n(22238);const le="css-theme";let ue=(()=>{class e{constructor(e){this.http=e}all(){return this.http.get(le)}create(e){return this.http.post(le,e)}update(e,t){return this.http.put(`${le}/${e}`,t)}delete(e){return this.http.delete(`${le}/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(P.r))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var pe=n(45396);function de(e,t){1&e&&(l.TgZ(0,"span",6),l._uU(1,"Update Theme"),l.qZA())}function ge(e,t){1&e&&(l.TgZ(0,"span",6),l._uU(1,"Create Theme"),l.qZA())}function he(e,t){if(1&e&&(l.TgZ(0,"div",21),l._uU(1),l.qZA()),2&e){const e=l.oxw().ngIf;l.xp6(1),l.Oqu(e.name)}}function me(e,t){1&e&&(l.TgZ(0,"span"),l._uU(1,"Update"),l.qZA())}function fe(e,t){1&e&&(l.TgZ(0,"span"),l._uU(1,"Create"),l.qZA())}function be(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"form",7),l.NdJ("ngSubmit",function(){return l.CHM(e),l.oxw().confirm()}),l.TgZ(1,"mat-dialog-content",8),l.TgZ(2,"div",9),l.TgZ(3,"label",10),l._uU(4,"Name"),l.qZA(),l._UZ(5,"input",11),l.YNc(6,he,2,1,"div",12),l.qZA(),l.TgZ(7,"div",13),l.TgZ(8,"mat-slide-toggle",14),l._uU(9,"Dark Theme"),l.qZA(),l.TgZ(10,"p",6),l._uU(11,"Whether this theme has light text on dark background."),l.qZA(),l.qZA(),l.TgZ(12,"div",13),l.TgZ(13,"mat-slide-toggle",15),l._uU(14,"Default Dark Theme"),l.qZA(),l.TgZ(15,"p",6),l._uU(16,"Whether this theme should be used as default dark theme."),l.qZA(),l.qZA(),l.TgZ(17,"div",13),l.TgZ(18,"mat-slide-toggle",16),l._uU(19,"Default Light Theme"),l.qZA(),l.TgZ(20,"p",6),l._uU(21,"Whether this theme should be used as default light theme."),l.qZA(),l.qZA(),l.qZA(),l.TgZ(22,"mat-dialog-actions"),l.TgZ(23,"button",17),l.NdJ("click",function(){return l.CHM(e),l.oxw().close()}),l._uU(24,"Cancel"),l.qZA(),l.TgZ(25,"button",18),l.ALo(26,"async"),l.YNc(27,me,2,0,"span",19),l.YNc(28,fe,2,0,"ng-template",null,20,l.W1O),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.ngIf,n=l.MAs(29),i=l.oxw();l.Q6J("formGroup",i.form),l.xp6(6),l.Q6J("ngIf",e.name),l.xp6(19),l.Q6J("disabled",l.lcZ(26,5,i.loading$)),l.xp6(2),l.Q6J("ngIf",i.data.theme)("ngIfElse",n)}}let ve=(()=>{class e{constructor(e,t,n,i,o){this.dialogRef=e,this.data=t,this.cssTheme=n,this.toast=i,this.fb=o,this.loading$=new T.X(!1),this.errors$=new T.X({}),this.form=this.fb.group({name:[""],is_dark:[!1],default_dark:[!1],default_light:[!1]}),t.theme&&this.form.patchValue(t.theme),this.form.get("default_dark").valueChanges.pipe((0,M.h)(e=>!!e)).subscribe(()=>{this.form.get("default_light").setValue(!1)}),this.form.get("default_light").valueChanges.pipe((0,M.h)(e=>!!e)).subscribe(()=>{this.form.get("default_dark").setValue(!1)})}confirm(){(this.data.theme?this.cssTheme.update(this.data.theme.id,this.form.value):this.cssTheme.create(this.form.value)).subscribe(e=>{this.toast.open(this.data.theme?"Theme updated":"Theme created"),this.close(e.theme)},e=>this.errors$.next(e.errors))}close(e){this.dialogRef.close(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(ce.so),l.Y36(ce.WI),l.Y36(ue),l.Y36(J.F),l.Y36(o.qu))},e.\u0275cmp=l.Xpm({type:e,selectors:[["crupdate-css-theme-modal"]],decls:8,vars:5,consts:[[1,"modal-header"],["mat-dialog-title",""],["trans","",4,"ngIf"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"formGroup","ngSubmit",4,"ngIf"],["trans",""],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","formControlName","name","required","","minlength","3"],["class","error",4,"ngIf"],[1,"setting-toggle-container"],["id","is_dark","formControlName","is_dark","trans",""],["id","default_dark","formControlName","default_dark","trans",""],["id","default_light","formControlName","default_light","trans",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],[4,"ngIf","ngIfElse"],["creating",""],[1,"error"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"h2",1),l.YNc(2,de,2,0,"span",2),l.YNc(3,ge,2,0,"span",2),l.qZA(),l.TgZ(4,"button",3),l.NdJ("click",function(){return t.close()}),l._UZ(5,"mat-icon",4),l.qZA(),l.qZA(),l.YNc(6,be,30,7,"form",5),l.ALo(7,"async")),2&e&&(l.xp6(2),l.Q6J("ngIf",t.data.theme),l.xp6(1),l.Q6J("ngIf",!t.data.theme),l.xp6(3),l.Q6J("ngIf",l.lcZ(7,3,t.errors$)))},directives:[ce.uh,i.O5,U.Hw,$.P,o.JL,o.sg,ce.xY,o.Fj,o.JJ,o.u,o.Q7,o.wO,pe.Rr,ce.H8,Y.lW],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}"],changeDetection:0}),e})();var Ze=n(8208),xe=n(15381),Ce=n(20616),Te=n(64762),Ae=n(75978),_e=n(7964),Me=n(72458);const ye=["*"];let we=(()=>{class e{constructor(e){this.overlayPanel=e,this.color$=new T.X(null)}ngOnDestroy(){this.pickerSub&&this.pickerSub.unsubscribe()}writeValue(e){this.color$.next(e)}registerOnChange(e){this.propagateChange=e}registerOnTouched(){}openColorPicker(e){return(0,Te.mG)(this,void 0,void 0,function*(){const{BeColorPickerModule:t}=yield n.e(427).then(n.bind(n,75427));this.pickerSub=this.overlayPanel.open(t.components.panel,{origin:new l.SBq(e.target),position:Ae.x,data:{color:this.color$.value}}).valueChanged().subscribe(e=>{this.color$.next(e),this.propagateChange(this.color$.value)})})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(_e.T))},e.\u0275cmp=l.Xpm({type:e,selectors:[["color-picker-input"]],features:[l._Bn([{provide:o.JU,useExisting:e,multi:!0}])],ngContentSelectors:ye,decls:7,vars:4,consts:[["type","button","matRipple","",1,"no-style","color-picker-btn",3,"click"],["svgIcon","drop-custom",1,"color-icon"],["trans","",1,"name"],["trans","",1,"change"]],template:function(e,t){1&e&&(l.F$t(),l.TgZ(0,"button",0),l.NdJ("click",function(e){return t.openColorPicker(e)}),l.TgZ(1,"mat-icon",1),l.ALo(2,"async"),l.qZA(),l.TgZ(3,"span",2),l.Hsn(4),l.qZA(),l.TgZ(5,"span",3),l._uU(6,"Change"),l.qZA(),l.qZA()),2&e&&(l.xp6(1),l.Udp("color",l.lcZ(2,2,t.color$)))},directives:[Me.wG,U.Hw,$.P],pipes:[i.Ov],styles:[".color-picker-btn[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 10px 0 15px;margin-bottom:15px;border-radius:4px;border:1px solid var(--be-divider-default);background-color:var(--be-background);cursor:pointer;height:57px;font-size:1.5rem;overflow:hidden;width:100%}.color-picker-btn[_ngcontent-%COMP%]   .color-icon[_ngcontent-%COMP%]{width:35px;height:35px}.color-picker-btn[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-left:3px;margin-top:3px;font-size:1.4rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:160px;text-transform:capitalize}.color-picker-btn[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{color:var(--be-link);font-size:1.3rem;margin-left:auto}"],changeDetection:0}),e})();function qe(e,t){if(1&e&&(l.TgZ(0,"li"),l.TgZ(1,"color-picker-input",2),l._uU(2),l.qZA(),l.qZA()),2&e){const e=t.$implicit,n=l.oxw();l.xp6(1),l.Q6J("formControlName",e.key),l.xp6(1),l.Oqu(n.viewName(e.key))}}let ke=(()=>{class e{constructor(e,t){this.editor=e,this.themes=t,this.form=new o.cw({}),this.colorCache={}}ngOnInit(){this.editor.setSaveRequest(this.saveColors.bind(this)),Object.entries(this.theme.colors).forEach(([e,t])=>{this.form.addControl(e,new o.NI(t))}),this.editor.initiated$.subscribe(()=>{this.setColors(this.theme.colors),this.form.valueChanges.subscribe(e=>{this.setColors(e),this.editor.addChanges({colors:e})})})}ngOnDestroy(){this.editor.setSaveRequest(null)}saveColors(e){return this.themes.update(this.theme.id,e)}setColors(e){Object.entries(e).forEach(([e,t])=>{this.colorCache[e]!==t&&(this.editor.postMessage(new v(e,t)),this.colorCache[e]=t)})}viewName(e){return e.replace("be-","").replace(/-/g," ")}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(I),l.Y36(ue))},e.\u0275cmp=l.Xpm({type:e,selectors:[["css-theme-colors-panel"]],inputs:{theme:"theme"},decls:3,vars:4,consts:[[1,"unstyled-list",3,"formGroup"],[4,"ngFor","ngForOf"],["trans","",3,"formControlName"]],template:function(e,t){1&e&&(l.TgZ(0,"ul",0),l.YNc(1,qe,3,2,"li",1),l.ALo(2,"keyvalue"),l.qZA()),2&e&&(l.Q6J("formGroup",t.form),l.xp6(1),l.Q6J("ngForOf",l.lcZ(2,2,t.theme.colors)))},directives:[o.JL,o.sg,i.sg,we,$.P,o.JJ,o.u],pipes:[i.Nd],styles:[""],changeDetection:0}),e})();function Oe(e,t){1&e&&l._UZ(0,"css-theme-colors-panel",5),2&e&&l.Q6J("theme",t.ngIf)}function Pe(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"li",9),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw(2).setSelectedTheme(t)}),l.TgZ(1,"div",10),l._uU(2),l.qZA(),l.TgZ(3,"div",11),l.NdJ("click",function(e){return e.stopPropagation()}),l.TgZ(4,"button",12),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw(2).setSelectedTheme(t)}),l._UZ(5,"mat-icon",13),l.qZA(),l.TgZ(6,"button",12),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw(2).openCrupdateThemeModal(t)}),l._UZ(7,"mat-icon",14),l.qZA(),l.TgZ(8,"button",12),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw(2).maybeDeleteThemeModal(t)}),l._UZ(9,"mat-icon",15),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(2),l.Oqu(e.name)}}function Je(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",6),l.NdJ("click",function(){return l.CHM(e),l.oxw().openCrupdateThemeModal()}),l._uU(1,"New Theme"),l.qZA(),l.TgZ(2,"ul",7),l.YNc(3,Pe,10,1,"li",8),l.ALo(4,"async"),l.qZA()}if(2&e){const e=l.oxw();l.xp6(3),l.Q6J("ngForOf",l.lcZ(4,1,e.loadedThemes$))}}let Ie=(()=>{class e{constructor(e,t,n,i,o,a){this.appearance=e,this.modal=t,this.themes=n,this.toast=i,this.router=o,this.route=a,this.loading$=new T.X(!1),this.loadedThemes$=new T.X([]),this.selectedTheme$=new T.X(null),this.path$=this.selectedTheme$.pipe((0,c.U)(e=>{const t=["Themes"];return e&&t.push(e.name),t}))}ngOnInit(){this.reloadThemes()}ngOnDestroy(){this.querySub&&this.querySub.unsubscribe()}openCrupdateThemeModal(e){this.modal.open(ve,{theme:e}).afterClosed().subscribe(e=>{e&&this.reloadThemes()})}setSelectedTheme(e){this.router.navigate([],{queryParams:{theme:e&&e.id},queryParamsHandling:"merge"})}openPreviousPanel(){this.selectedTheme$.value?this.setSelectedTheme():this.appearance.closeActivePanel()}maybeDeleteThemeModal(e){this.modal.show(Ze.z,{title:"Delete Theme",body:"Are you sure you want to delete this theme?",ok:"Delete"}).afterClosed().subscribe(t=>{!t||this.deleteTheme(e)})}reloadThemes(){this.loading$.next(!0),this.themes.all().pipe((0,y.x)(()=>this.loading$.next(!1))).subscribe(e=>{this.loadedThemes$.next(e.pagination.data),this.bindToQueryParams()})}deleteTheme(e){this.themes.delete([e.id]).subscribe(()=>{this.toast.open("Theme deleted"),this.reloadThemes()})}bindToQueryParams(){this.querySub||(this.querySub=this.route.queryParams.subscribe(e=>{const t=this.loadedThemes$.value.find(t=>t.id===+e.theme);this.selectedTheme$.next(t)}))}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(I),l.Y36(xe.u),l.Y36(ue),l.Y36(J.F),l.Y36(a.F0),l.Y36(a.gz))},e.\u0275cmp=l.Xpm({type:e,selectors:[["themes-appearance-panel"]],decls:9,vars:10,consts:[[3,"path","back"],[1,"appearance-panel-content"],[3,"theme",4,"ngIf","ngIfElse"],["themesList",""],[1,"overlay","overlay-partial",3,"isVisible"],[3,"theme"],["mat-raised-button","","color","accent","type","button","trans","",1,"new-theme-button",3,"click"],[1,"unstyled-list"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"name"],[1,"actions",3,"click"],["mat-icon-button","","type","button",3,"click"],["svgIcon","drop-custom"],["svgIcon","edit"],["svgIcon","delete"]],template:function(e,t){if(1&e&&(l.TgZ(0,"appearance-panel-meta",0),l.NdJ("back",function(){return t.openPreviousPanel()}),l.ALo(1,"async"),l.qZA(),l.TgZ(2,"div",1),l.YNc(3,Oe,1,1,"css-theme-colors-panel",2),l.ALo(4,"async"),l.YNc(5,Je,5,3,"ng-template",null,3,l.W1O),l.qZA(),l._UZ(7,"loading-indicator",4),l.ALo(8,"async")),2&e){const e=l.MAs(6);l.Q6J("path",l.lcZ(1,4,t.path$)),l.xp6(3),l.Q6J("ngIf",l.lcZ(4,6,t.selectedTheme$))("ngIfElse",e),l.xp6(4),l.Q6J("isVisible",l.lcZ(8,8,t.loading$))}},directives:[V,i.O5,Ce.Q,ke,Y.lW,$.P,i.sg,U.Hw],pipes:[i.Ov],styles:[".new-theme-button[_ngcontent-%COMP%]{margin-bottom:15px}"],changeDetection:0}),e})();var Ne=n(99905),Ue=n(83461),$e=n(81669);class Ye{constructor(e={}){this.type="link",this.condition=null,this.target=null,this.activeExact=!1;for(const t in e)this[t]=e[t];this.id=Math.floor(999*Math.random())}}let Qe=(()=>{class e{constructor(e,t){this.settings=e,this.appearance=t,this.allMenus$=new T.X([]),this.activeMenu$=new T.X(null)}create(){const e=[...this.allMenus$.value];this.activeMenu$.next(new $e.v({name:"New Menu"})),e.push(this.activeMenu$.value),this.allMenus$.next(e),this.commitChanges()}reorderActiveMenuItems(e,t){const n=Object.assign({},this.activeMenu$.value);(0,Ue.bA)(n.items,e,t),this.activeMenu$.next(n),this.commitChanges()}deleteActive(){const e=[...this.allMenus$.value],t=e.indexOf(this.activeMenu$.value);e.splice(t,1),this.activeMenu$.next(null),this.allMenus$.next(e),this.commitChanges()}addItem(e){const t=Object.assign({},this.activeMenu$.value);e=this.transformLocalLinksToRoutes(e),t.items.push(e),this.activeMenu$.next(t),this.commitChanges()}removeItem(e){const t=Object.assign({},this.activeMenu$.value),n=this.activeMenu$.value.items.indexOf(e);t.items.splice(n,1),this.activeMenu$.next(t),this.commitChanges()}transformLocalLinksToRoutes(e){const t=this.settings.getBaseUrl();return"link"!==e.type||-1===e.action.indexOf(t)||(e.type="route",e.action=e.action.replace(this.settings.getBaseUrl(),"")),e}commitChanges(){const e=JSON.stringify(this.allMenus$.value);this.appearance.setConfig("menus",e),this.appearance.addChanges({menus:e})}setFromJson(e){if(!e)return;const t=JSON.parse(e);if(!t)return;const n=t.map(e=>{const t=new $e.v(e);return t.items=t.items.map(e=>new Ye(e)),t});this.allMenus$.next(n)}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(O.Z),l.LFG(I))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Se=n(67310),Fe=n(99981);let Le=(()=>{class e{constructor(e){this.http=e}get(){return this.http.getWithCache("admin/appearance/menu-categories")}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(Fe.F))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ve=n(90171);function De(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",17),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().addRouteMenuItem(t)}),l._uU(1),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(1),l.hij("",e," ")}}function Ee(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",17),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw(2).addCustomMenuItem(t)}),l._uU(1),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(1),l.Oqu(e.label)}}function He(e,t){if(1&e&&(l.TgZ(0,"mat-expansion-panel",5),l.TgZ(1,"mat-expansion-panel-header"),l.TgZ(2,"mat-panel-title",6),l._uU(3),l.qZA(),l.qZA(),l.TgZ(4,"div",14),l.YNc(5,Ee,2,1,"div",15),l.qZA(),l.qZA()),2&e){const e=t.$implicit;l.xp6(3),l.Oqu(e.name),l.xp6(2),l.Q6J("ngForOf",e.items)}}let Re=(()=>{class e{constructor(e,t,n,i,o){this.editor=e,this.appearance=t,this.overlayPanelRef=n,this.fb=i,this.itemCategories=o,this.linkForm=this.fb.group({action:[""],label:[""]})}ngOnInit(){this.itemCategories.get().subscribe(e=>{this.menuItemCategories=e.categories})}addLinkMenuItem(){this.close({type:"link",label:this.linkForm.value.label,action:this.linkForm.value.action})}addRouteMenuItem(e){this.close({type:"route",label:e,action:e})}addCustomMenuItem(e){this.close(e)}close(e){this.overlayPanelRef.close(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(Qe),l.Y36(I),l.Y36(Se.L),l.Y36(o.qu),l.Y36(Le))},e.\u0275cmp=l.Xpm({type:e,selectors:[["select-menu-item-action"]],decls:30,vars:3,consts:[[1,"header"],["trans","",1,"title"],["svgIcon","close",3,"click"],[1,"new-item-tabs"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"mat-elevation-z"],["trans",""],[1,"many-inputs","expansion-panel-content"],[1,"input-container"],["for","external-link-url","trans",""],["type","url","id","external-link-url","formControlName","action","required",""],["for","external-link-text","trans",""],["type","text","id","external-link-text","formControlName","label","required",""],["mat-button","","color","accent","type","submit","trans",""],[1,"items-list","expansion-panel-content"],["class","item",3,"click",4,"ngFor","ngForOf"],["class","mat-elevation-z",4,"ngFor","ngForOf"],[1,"item",3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"span",1),l._uU(2,"Select Destination"),l.qZA(),l.TgZ(3,"mat-icon",2),l.NdJ("click",function(){return t.close()}),l.qZA(),l.qZA(),l.TgZ(4,"div",3),l.TgZ(5,"mat-accordion"),l.TgZ(6,"form",4),l.NdJ("ngSubmit",function(){return t.addLinkMenuItem()}),l.TgZ(7,"mat-expansion-panel",5),l.TgZ(8,"mat-expansion-panel-header"),l.TgZ(9,"mat-panel-title",6),l._uU(10,"Link"),l.qZA(),l.qZA(),l.TgZ(11,"div",7),l.TgZ(12,"div",8),l.TgZ(13,"label",9),l._uU(14,"URL"),l.qZA(),l._UZ(15,"input",10),l.qZA(),l.TgZ(16,"div",8),l.TgZ(17,"label",11),l._uU(18,"Link Text"),l.qZA(),l._UZ(19,"input",12),l.qZA(),l.qZA(),l.TgZ(20,"mat-action-row"),l.TgZ(21,"button",13),l._uU(22,"Select"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(23,"mat-expansion-panel",5),l.TgZ(24,"mat-expansion-panel-header"),l.TgZ(25,"mat-panel-title",6),l._uU(26,"Route"),l.qZA(),l.qZA(),l.TgZ(27,"div",14),l.YNc(28,De,2,1,"div",15),l.qZA(),l.qZA(),l.YNc(29,He,6,2,"mat-expansion-panel",16),l.qZA(),l.qZA()),2&e&&(l.xp6(6),l.Q6J("formGroup",t.linkForm),l.xp6(22),l.Q6J("ngForOf",t.appearance.config.menus.availableRoutes),l.xp6(1),l.Q6J("ngForOf",t.menuItemCategories))},directives:[$.P,U.Hw,Ve.pp,o.JL,o.sg,Ve.ib,Ve.yz,Ve.yK,o.Fj,o.JJ,o.u,o.Q7,Ve.VG,Y.lW,i.sg],styles:["[_nghost-%COMP%]{background-color:var(--be-background-alternative);box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px rgba(0,0,0,.141),0 1px 8px rgba(0,0,0,.122);overflow:hidden;width:300px;border-radius:4px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--be-background);padding:15px;font-size:1.7rem;font-weight:300;border-bottom:1px solid var(--be-divider-default);margin-bottom:10px}.header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:var(--be-secondary-text);margin-left:auto}.new-item-tabs[_ngcontent-%COMP%]{padding:10px}.items-list[_ngcontent-%COMP%]{overflow:auto;max-height:300px}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:var(--be-link);padding-bottom:8px;margin-bottom:8px;border-bottom:1px solid var(--be-divider-default);cursor:pointer}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{text-decoration:underline}.mat-expansion-panel[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);margin-bottom:10px}.mat-expansion-panel-header[_ngcontent-%COMP%]{min-height:57px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.expansion-panel-content[_ngcontent-%COMP%]{padding-top:25px}"],changeDetection:0}),e})();function ze(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"button",2),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw().selectIcon(t)}),l._UZ(1,"mat-icon",3),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(1),l.Q6J("svgIcon",e)}}let je=(()=>{class e{constructor(e,t){this.http=e,this.overlayPanelRef=t,this.icons$=new T.X([]),this.loading$=new T.X(!1),this.iconSelected=new l.vpe}ngOnInit(){this.loading$.next(!0),this.http.get("admin/icons").pipe((0,y.x)(()=>this.loading$.next(!1))).subscribe(e=>{this.icons$.next(e.icons)})}selectIcon(e){this.iconSelected.observers.length?this.iconSelected.next(e):(this.overlayPanelRef.emitValue(e),this.overlayPanelRef.close())}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(Fe.F),l.Y36(Se.L))},e.\u0275cmp=l.Xpm({type:e,selectors:[["icon-selector"]],outputs:{iconSelected:"iconSelected"},decls:4,vars:6,consts:[["mat-icon-button","",3,"click",4,"ngFor","ngForOf"],[1,"overlay","overlay-partial",3,"isVisible"],["mat-icon-button","",3,"click"],[3,"svgIcon"]],template:function(e,t){1&e&&(l.YNc(0,ze,2,1,"button",0),l.ALo(1,"async"),l._UZ(2,"loading-indicator",1),l.ALo(3,"async")),2&e&&(l.Q6J("ngForOf",l.lcZ(1,2,t.icons$)),l.xp6(2),l.Q6J("isVisible",l.lcZ(3,4,t.loading$)))},directives:[i.sg,Ce.Q,Y.lW,U.Hw],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:block;background-color:var(--be-background);padding:15px;border-radius:4px;width:490px;max-width:90vw;min-height:390px;overflow:auto;position:relative;text-align:center;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px rgba(0,0,0,.141),0 1px 18px rgba(0,0,0,.122)}.mat-icon-button[_ngcontent-%COMP%]{transition:transform .1s ease-in-out}.mat-icon-button[_ngcontent-%COMP%]:hover{transform:scale(1.6)}"],changeDetection:0}),e})();function Ge(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"mat-expansion-panel",5),l.NdJ("opened",function(){const t=l.CHM(e).$implicit;return l.oxw(2).toggleMenuItem(t)})("closed",function(){const t=l.CHM(e).$implicit;return l.oxw(2).toggleMenuItem(t)}),l.TgZ(1,"mat-expansion-panel-header"),l.TgZ(2,"mat-panel-title"),l._UZ(3,"mat-icon",6),l.TgZ(4,"span",7),l._uU(5),l.qZA(),l.qZA(),l.qZA(),l.TgZ(6,"div",8),l.TgZ(7,"div",9),l.TgZ(8,"label",10),l._uU(9,"Label"),l.qZA(),l.TgZ(10,"input",11),l.NdJ("ngModelChange",function(t){return l.CHM(e).$implicit.label=t})("ngModelChange",function(){return l.CHM(e),l.oxw(2).menus.commitChanges()}),l.qZA(),l.qZA(),l.TgZ(11,"div",9),l.TgZ(12,"label",10),l._uU(13,"Type"),l.qZA(),l.TgZ(14,"select",12),l.NdJ("ngModelChange",function(t){return l.CHM(e).$implicit.type=t})("ngModelChange",function(){return l.CHM(e),l.oxw(2).menus.commitChanges()}),l.TgZ(15,"option",13),l._uU(16,"Link"),l.qZA(),l.TgZ(17,"option",14),l._uU(18,"Route"),l.qZA(),l.TgZ(19,"option",15),l._uU(20,"Page"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(21,"div",9),l.TgZ(22,"label",10),l._uU(23,"Action"),l.qZA(),l.TgZ(24,"input",11),l.NdJ("ngModelChange",function(t){return l.CHM(e).$implicit.action=t})("ngModelChange",function(){return l.CHM(e),l.oxw(2).menus.commitChanges()}),l.qZA(),l.qZA(),l.TgZ(25,"div",9),l.TgZ(26,"label",10),l._uU(27,"Condition"),l.qZA(),l.TgZ(28,"select",12),l.NdJ("ngModelChange",function(t){return l.CHM(e).$implicit.condition=t})("ngModelChange",function(){return l.CHM(e),l.oxw(2).menus.commitChanges()}),l.TgZ(29,"option",16),l._uU(30,"None"),l.qZA(),l.TgZ(31,"option",17),l._uU(32,"Show to Logged in Users Only"),l.qZA(),l.TgZ(33,"option",18),l._uU(34,"Show to Guest Users Only"),l.qZA(),l.TgZ(35,"option",19),l._uU(36,"Show to Admin Only"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(37,"div",9),l.TgZ(38,"label",10),l._uU(39,"Open link in"),l.qZA(),l.TgZ(40,"select",12),l.NdJ("ngModelChange",function(t){return l.CHM(e).$implicit.target=t})("ngModelChange",function(){return l.CHM(e),l.oxw(2).menus.commitChanges()}),l.TgZ(41,"option",20),l._uU(42,"Same Window"),l.qZA(),l.TgZ(43,"option",21),l._uU(44,"New Window"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(45,"div",22,23),l.NdJ("click",function(){const t=l.CHM(e).$implicit,n=l.MAs(46);return l.oxw(2).openIconSelector(n,t)}),l.TgZ(47,"label",10),l._uU(48,"Icon"),l.qZA(),l.TgZ(49,"input",24),l.NdJ("ngModelChange",function(t){return l.CHM(e).$implicit.icon=t}),l.qZA(),l._UZ(50,"mat-icon",25),l.qZA(),l.qZA(),l.TgZ(51,"mat-action-row"),l.TgZ(52,"button",26),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).confirmMenuItemDeletion()}),l._uU(53,"Remove"),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.$implicit;l.uIk("data-id",e.id),l.xp6(5),l.Oqu(e.label),l.xp6(3),l.s9C("for",e.id+"-label"),l.xp6(2),l.s9C("id",e.id+"-label"),l.Q6J("ngModel",e.label),l.xp6(2),l.s9C("for",e.id+"-type"),l.xp6(2),l.s9C("id",e.id+"-type"),l.Q6J("ngModel",e.type),l.xp6(8),l.s9C("for",e.id+"-action"),l.xp6(2),l.s9C("id",e.id+"-action"),l.Q6J("ngModel",e.action),l.xp6(2),l.s9C("for",e.id+"-condition"),l.xp6(2),l.s9C("id",e.id+"-condition"),l.Q6J("ngModel",e.condition),l.xp6(1),l.Q6J("ngValue",null),l.xp6(9),l.s9C("for",e.id+"-target"),l.xp6(2),l.s9C("id",e.id+"-target"),l.Q6J("ngModel",e.target),l.xp6(7),l.s9C("for",e.id+"-icon"),l.xp6(2),l.s9C("id",e.id+"-icon"),l.Q6J("ngModel",e.icon),l.xp6(1),l.Q6J("svgIcon",e.icon)}}function Xe(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"mat-accordion",3),l.NdJ("cdkDropListDropped",function(t){return l.CHM(e),l.oxw().reorderMenuItems(t)}),l.YNc(1,Ge,54,22,"mat-expansion-panel",4),l.qZA()}if(2&e){const e=t.ngIf;l.xp6(1),l.Q6J("ngForOf",e.items)}}function Be(e,t){1&e&&(l.TgZ(0,"div",27),l._uU(1,"This menu has no items yet."),l.qZA())}let We=(()=>{class e{constructor(e,t,n,i){this.menus=e,this.modal=t,this.overlayPanel=n,this.cd=i,this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&e.unsubscribe()})}reorderMenuItems(e){this.menus.reorderActiveMenuItems(e.previousIndex,e.currentIndex)}toggleMenuItem(e){this.selectedMenuItem=this.selectedMenuItem===e?null:e}confirmMenuItemDeletion(){this.modal.show(Ze.z,{title:"Delete Menu Item",body:"Are you sure you want to delete this menu item?",ok:"Delete"}).afterClosed().subscribe(e=>{!e||(this.menus.removeItem(this.selectedMenuItem),this.selectedMenuItem=null)})}openIconSelector(e,t){this.overlayPanel.open(je,{position:Ne.Z,origin:new l.SBq(e)}).valueChanged().subscribe(e=>{t.icon=e,this.menus.commitChanges(),this.cd.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(Qe),l.Y36(xe.u),l.Y36(_e.T),l.Y36(l.sBO))},e.\u0275cmp=l.Xpm({type:e,selectors:[["menu-items"]],decls:6,vars:4,consts:[["trans","",1,"title"],["cdkDropList","",3,"cdkDropListDropped",4,"ngIf","ngIfElse"],["noActiveMenu",""],["cdkDropList","",3,"cdkDropListDropped"],["class","mat-elevation-z menu-item-container","cdkDrag","",3,"opened","closed",4,"ngFor","ngForOf"],["cdkDrag","",1,"mat-elevation-z","menu-item-container",3,"opened","closed"],["cdkDragHandle","","svgIcon","drag-handle",1,"drag-handle"],[1,"name"],[1,"many-inputs","menu-item-list"],[1,"input-container"],["trans","",3,"for"],["type","text",3,"ngModel","id","ngModelChange"],[3,"ngModel","id","ngModelChange"],["value","link","trans",""],["value","route","trans",""],["value","page","trans",""],["trans","",3,"ngValue"],["value","auth","trans",""],["value","guest","trans",""],["value","admin","trans",""],["value","_self","trans",""],["value","_blank","trans",""],[1,"input-container","icon-input-container",3,"click"],["iconInput",""],["type","text","readonly","","placeholder","(Optional)","trans-placeholder","",3,"ngModel","id","ngModelChange"],[3,"svgIcon"],["mat-button","","color","warn","trans","",1,"delete-button",3,"click"],["trans","",1,"no-menu-items"]],template:function(e,t){if(1&e&&(l.TgZ(0,"div",0),l._uU(1,"Menu Items"),l.qZA(),l.YNc(2,Xe,2,1,"mat-accordion",1),l.ALo(3,"async"),l.YNc(4,Be,2,0,"ng-template",null,2,l.W1O)),2&e){const e=l.MAs(5);l.xp6(2),l.Q6J("ngIf",l.lcZ(3,2,t.menus.activeMenu$))("ngIfElse",e)}},directives:[$.P,i.O5,Ve.pp,Ue.Wj,i.sg,Ve.ib,Ue.Zt,Ve.yz,Ve.yK,U.Hw,Ue.Bh,o.Fj,o.JJ,o.On,o.EJ,o.YN,o.Kr,Ve.VG,Y.lW],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{margin:35px 0 5px}.no-menu-items[_ngcontent-%COMP%]{font-size:1.6rem;font-style:italic;color:var(--be-secondary-text);margin:10px 0}.icon-input-container[_ngcontent-%COMP%]{position:relative}.icon-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:35px}.icon-input-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:36px;left:8px;color:var(--be-secondary-text)}.menu-item-list[_ngcontent-%COMP%]{padding-top:25px}.mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:4px;border:1px solid var(--be-divider-default)}.mat-expansion-panel-header[_ngcontent-%COMP%]{min-height:57px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.mat-action-row[_ngcontent-%COMP%]{border:none;padding:0 15px 10px}.drag-handle[_ngcontent-%COMP%]{display:block;color:var(--be-secondary-text);margin-right:8px;cursor:move}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),e})();function Ke(e,t){if(1&e&&(l.TgZ(0,"option",15),l._uU(1),l.qZA()),2&e){const e=t.$implicit,n=l.oxw(2);l.Q6J("ngValue",e),l.xp6(1),l.Oqu(n.getDisplayName(e))}}function et(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",4),l.TgZ(1,"div",5),l.TgZ(2,"div",6),l.TgZ(3,"label",7),l._uU(4,"Menu Name"),l.qZA(),l.TgZ(5,"input",8),l.NdJ("ngModelChange",function(t){return l.CHM(e).ngIf.name=t})("ngModelChange",function(){return l.CHM(e),l.oxw().menus.commitChanges()}),l.qZA(),l.qZA(),l.TgZ(6,"div",6),l.TgZ(7,"label",9),l._uU(8,"Menu Position"),l.qZA(),l.TgZ(9,"select",10),l.NdJ("ngModelChange",function(t){return l.CHM(e).ngIf.position=t})("ngModelChange",function(){return l.CHM(e),l.oxw().menus.commitChanges()}),l.YNc(10,Ke,2,2,"option",11),l.qZA(),l.qZA(),l.qZA(),l._UZ(11,"menu-items"),l.TgZ(12,"div",12),l.TgZ(13,"button",13),l.NdJ("click",function(){return l.CHM(e),l.oxw().confirmMenuDeletion()}),l._uU(14,"Delete Menu"),l.qZA(),l.TgZ(15,"button",14),l.NdJ("click",function(){return l.CHM(e),l.oxw().openAddItemPanel()}),l._uU(16,"Add Item"),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=t.ngIf,n=l.oxw();l.xp6(5),l.Q6J("ngModel",e.name),l.xp6(4),l.Q6J("ngModel",e.position),l.xp6(1),l.Q6J("ngForOf",n.appearance.config.menus.positions)}}function tt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",19),l.NdJ("click",function(){const t=l.CHM(e).$implicit;return l.oxw(2).setActiveMenu(t)}),l.TgZ(1,"span",20),l._uU(2),l.qZA(),l._UZ(3,"mat-icon",21),l.qZA()}if(2&e){const e=t.$implicit;l.xp6(2),l.Oqu(e.name)}}function nt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",16),l.YNc(1,tt,4,1,"div",17),l.ALo(2,"async"),l.TgZ(3,"div",12),l.TgZ(4,"button",18),l.NdJ("click",function(){return l.CHM(e),l.oxw().menus.create()}),l._uU(5,"Add a Menu"),l.qZA(),l.qZA(),l.qZA()}if(2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",l.lcZ(2,1,e.menus.allMenus$))}}const it=function(e){return["Menus",e]};let ot=(()=>{class e{constructor(e,t,n,i,o,a){this.appearance=e,this.menus=t,this.modal=n,this.settings=i,this.panel=o,this.el=a,this.menus.setFromJson(this.settings.get("menus"))}openAddItemPanel(){const e=Ne.Z.slice();e[0].offsetX=10,e[1].offsetX=10,this.panel.open(Re,{position:e,origin:this.el,panelClass:"add-menu-item-panel-container"}).afterClosed().subscribe(e=>{e&&this.menus.addItem(new Ye(e))})}openPreviousPanel(){this.menus.activeMenu$.value?this.menus.activeMenu$.next(null):this.appearance.closeActivePanel()}setActiveMenu(e){this.menus.activeMenu$.next(e)}confirmMenuDeletion(){this.modal.show(Ze.z,{title:"Delete Menu",body:"Are you sure you want to delete this menu?",ok:"Delete"}).afterClosed().subscribe(e=>{!e||this.menus.deleteActive()})}getDisplayName(e){return e.replace(/-/g," ")}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(I),l.Y36(Qe),l.Y36(xe.u),l.Y36(O.Z),l.Y36(_e.T),l.Y36(l.SBq))},e.\u0275cmp=l.Xpm({type:e,selectors:[["menus-appearance-panel"]],decls:6,vars:7,consts:[[3,"path","back"],[1,"appearance-panel-content"],["class","menu-panel",4,"ngIf","ngIfElse"],["allMenuList",""],[1,"menu-panel"],[1,"many-inputs","menu-settings"],[1,"input-container"],["for","menu-name","trans",""],["type","text","id","menu-name",3,"ngModel","ngModelChange"],["for","menu-position","trans",""],["id","menu-position",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"action-buttons"],["mat-button","","color","warn","trans","",3,"click"],["mat-button","","color","accent","trans","",1,"button","flat","add-item-button",3,"click"],[3,"ngValue"],[1,"menus"],["class","menu nav-item",3,"click",4,"ngFor","ngForOf"],["mat-button","","color","accent","trans","",1,"button","primary",3,"click"],[1,"menu","nav-item",3,"click"],[1,"name"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(e,t){if(1&e&&(l.TgZ(0,"appearance-panel-meta",0),l.NdJ("back",function(){return t.openPreviousPanel()}),l.qZA(),l.TgZ(1,"div",1),l.YNc(2,et,17,3,"div",2),l.ALo(3,"async"),l.YNc(4,nt,6,3,"ng-template",null,3,l.W1O),l.qZA()),2&e){const e=l.MAs(5);l.Q6J("path",l.VKq(5,it,t.menus.activeMenu$.value&&t.menus.activeMenu$.value.name)),l.xp6(2),l.Q6J("ngIf",l.lcZ(3,3,t.menus.activeMenu$))("ngIfElse",e)}},directives:[V,i.O5,$.P,o.Fj,o.JJ,o.On,o.EJ,i.sg,We,Y.lW,o.YN,o.Kr,U.Hw],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:block}.menu-settings[_ngcontent-%COMP%]{margin:10px 0}.menu-settings[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-transform:capitalize}.action-buttons[_ngcontent-%COMP%]{text-align:right;margin:10px 0}"],changeDetection:0}),e})();function at(e,t){if(1&e&&(l.ynx(0),l.TgZ(1,"div",3),l.TgZ(2,"label",4),l._uU(3),l.qZA(),l._UZ(4,"textarea",5),l.qZA(),l.BQk()),2&e){const e=t.$implicit;l.xp6(2),l.Q6J("for",e.key),l.xp6(1),l.Oqu(e.name),l.xp6(1),l.Q6J("id",e.key)("formControlName",e.key)("placeholder",e.defaultValue)}}const st=function(){return["Seo Settings"]};let rt=(()=>{class e{constructor(e,t){this.editor=e,this.fb=t,this.form=this.fb.group({})}ngOnInit(){this.seoFields=this.editor.defaultSettings.seo_fields,this.seoFields.forEach(e=>{this.form.addControl(e.key,this.fb.control(e.value))}),this.form.valueChanges.subscribe(e=>{this.editor.addChanges(e)})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(I),l.Y36(o.qu))},e.\u0275cmp=l.Xpm({type:e,selectors:[["seo-appearance-panel"]],decls:3,vars:4,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],[4,"ngFor","ngForOf"],[1,"input-container"],["trans","",3,"for"],["type","text","rows","2",3,"id","formControlName","placeholder"]],template:function(e,t){1&e&&(l.TgZ(0,"appearance-panel-meta",0),l.NdJ("back",function(){return t.editor.closeActivePanel()}),l.qZA(),l.TgZ(1,"div",1),l.YNc(2,at,5,5,"ng-container",2),l.qZA()),2&e&&(l.Q6J("path",l.DdM(3,st)),l.xp6(1),l.Q6J("formGroup",t.form),l.xp6(1),l.Q6J("ngForOf",t.seoFields))},directives:[V,o.JL,o.sg,i.sg,$.P,o.Fj,o.JJ,o.u],styles:["label[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),e})();var ct=n(36461),lt=n(35402);const ut=["editor"];function pt(e,t){1&e&&(l.TgZ(0,"p",11),l._uU(1,"If entering javascript, wrap it with <script><\/script> tag."),l.qZA())}let dt=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.data=t,this.lazyLoader=n,this.loading$=new T.X(!1),this.syntaxInvalid$=new T.X(!1)}ngOnInit(){this.initEditor(this.data.contents,this.data.language),this.overrideDialogCloseEvents()}confirm(){this.close(this.editor.getValue())}close(e){this.dialogRef.close(e)}initEditor(e,t="html"){this.loading$.next(!0),this.lazyLoader.loadAsset("js/ace/ace.js",{type:"js"}).then(()=>{this.editor=ace.edit(this.editorEl.nativeElement),this.editor.getSession().setMode("ace/mode/"+t),this.editor.setTheme("ace/theme/chrome"),this.editor.$blockScrolling=1/0,e&&this.editor.setValue(e,1),this.editor.getSession().on("changeAnnotation",()=>{const e=this.editor.getSession().getAnnotations();if(e[0]&&/doctype first/.test(e[0].text))return e.splice(0,1),void this.editor.getSession().setAnnotations(e);const t=this.editor.getSession().getAnnotations().filter(e=>"error"===e.type).length>0;this.syntaxInvalid$.next(t)}),this.loading$.next(!1)})}overrideDialogCloseEvents(){this.dialogRef.disableClose=!0,this.dialogRef.backdropClick().subscribe(()=>{this.close()}),this.dialogRef.keydownEvents().pipe((0,M.h)(e=>e.keyCode===ct.hY)).subscribe(()=>this.close())}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(ce.so),l.Y36(ce.WI),l.Y36(lt.j))},e.\u0275cmp=l.Xpm({type:e,selectors:[["code-editor-modal"]],viewQuery:function(e,t){if(1&e&&l.Gf(ut,7),2&e){let e;l.iGM(e=l.CRH())&&(t.editorEl=e.first)}},decls:18,vars:7,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",1,"modal-title"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],[1,"editor-container"],["class","info","trans","",4,"ngIf"],[1,"editor"],["editor",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled","click"],[1,"overlay",3,"isVisible"],["trans","",1,"info"]],template:function(e,t){1&e&&(l.TgZ(0,"div",0),l.TgZ(1,"h2",1),l._uU(2,"Code Editor"),l.qZA(),l.TgZ(3,"button",2),l.NdJ("click",function(){return t.close()}),l._UZ(4,"mat-icon",3),l.qZA(),l.qZA(),l.TgZ(5,"mat-dialog-content"),l.TgZ(6,"div",4),l.YNc(7,pt,2,0,"p",5),l._UZ(8,"div",6,7),l.qZA(),l.qZA(),l.TgZ(10,"mat-dialog-actions"),l.TgZ(11,"button",8),l.NdJ("click",function(){return t.close()}),l._uU(12,"Cancel"),l.qZA(),l.TgZ(13,"button",9),l.NdJ("click",function(){return t.confirm()}),l.ALo(14,"async"),l._uU(15,"Update"),l.qZA(),l.qZA(),l._UZ(16,"loading-indicator",10),l.ALo(17,"async")),2&e&&(l.xp6(7),l.Q6J("ngIf","html"===t.data.language),l.xp6(6),l.Q6J("disabled",l.lcZ(14,3,t.syntaxInvalid$)),l.xp6(3),l.Q6J("isVisible",l.lcZ(17,5,t.loading$)))},directives:[ce.uh,$.P,U.Hw,ce.xY,i.O5,ce.H8,Y.lW,Ce.Q],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:block;width:800px;max-width:100%}.modal-header[_ngcontent-%COMP%]{margin:0 0 15px}.editor[_ngcontent-%COMP%]{min-height:550px;border:1px solid var(--be-divider-default);font-size:1.4rem}.info[_ngcontent-%COMP%]{color:var(--be-secondary-text)}"],changeDetection:0}),e})();const gt=function(){return["Custom Code"]};let ht=(()=>{class e{constructor(e,t,n,i){this.editor=e,this.fb=t,this.modal=n,this.toast=i,this.form=this.fb.group({"custom-code.css":[""],"custom-code.html":[""]})}ngOnInit(){const e={};Object.keys(this.form.controls).forEach(t=>{e[t]=this.editor.currentValue(t)}),this.form.patchValue(e)}openModal(e){const t="custom-code."+e,n=this.form.value[t]||"";this.modal.open(dt,{contents:this.form.value[t],language:e}).afterClosed().subscribe(i=>{if(void 0===i||n===i)return;const o={[t]:i};this.form.patchValue(o),this.editor.saveChanges(o).subscribe(()=>{this.addCodeToPreview(e,i),this.toast.open("Custom code saved")})})}addCodeToPreview(e,t){this.editor.postMessage("css"===e?new Z(t):new x(t))}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(I),l.Y36(o.qu),l.Y36(xe.u),l.Y36(J.F))},e.\u0275cmp=l.Xpm({type:e,selectors:[["custom-code-appearance-panel"]],decls:12,vars:2,consts:[[3,"path","back"],[1,"appearance-panel-content"],["type","button",1,"nav-item",3,"click"],["trans","",1,"text"],["trans","",1,"actions"],[1,"nav-item",3,"click"]],template:function(e,t){1&e&&(l.TgZ(0,"appearance-panel-meta",0),l.NdJ("back",function(){return t.editor.closeActivePanel()}),l.qZA(),l.TgZ(1,"div",1),l.TgZ(2,"button",2),l.NdJ("click",function(){return t.openModal("css")}),l.TgZ(3,"span",3),l._uU(4,"Custom CSS"),l.qZA(),l.TgZ(5,"span",4),l._uU(6,"Modify"),l.qZA(),l.qZA(),l.TgZ(7,"button",5),l.NdJ("click",function(){return t.openModal("html")}),l.TgZ(8,"span",3),l._uU(9,"Custom HTML & Javascript"),l.qZA(),l.TgZ(10,"span",4),l._uU(11,"Modify"),l.qZA(),l.qZA(),l.qZA()),2&e&&l.Q6J("path",l.DdM(1,gt))},directives:[V,$.P],styles:[".actions[_ngcontent-%COMP%]{color:var(--be-link);font-size:1.3rem}"],changeDetection:0}),e})();const mt=["iframe"];function ft(e,t){1&e&&(l.TgZ(0,"span",16),l._uU(1,"Save"),l.qZA())}function bt(e,t){1&e&&(l.TgZ(0,"span",16),l._uU(1,"Saved"),l.qZA())}function vt(e,t){1&e&&l._UZ(0,"general-appearance-panel")}function Zt(e,t){1&e&&l._UZ(0,"themes-appearance-panel")}function xt(e,t){1&e&&l._UZ(0,"menus-appearance-panel")}function Ct(e,t){1&e&&l._UZ(0,"seo-appearance-panel")}function Tt(e,t){1&e&&l._UZ(0,"custom-code-appearance-panel")}function At(e,t){}function _t(e,t){1&e&&l.YNc(0,At,0,0,"ng-template",21),2&e&&l.Q6J("cdkPortalOutlet",t.ngIf)}function Mt(e,t){if(1&e&&(l.ynx(0),l.YNc(1,_t,1,1,void 0,20),l.ALo(2,"async"),l.BQk()),2&e){const e=l.oxw(2);l.xp6(1),l.Q6J("ngIf",l.lcZ(2,1,e.panelPortal$))}}function yt(e,t){if(1&e&&(l.ynx(0),l.ynx(1,17),l.YNc(2,vt,1,0,"general-appearance-panel",18),l.YNc(3,Zt,1,0,"themes-appearance-panel",18),l.YNc(4,xt,1,0,"menus-appearance-panel",18),l.YNc(5,Ct,1,0,"seo-appearance-panel",18),l.YNc(6,Tt,1,0,"custom-code-appearance-panel",18),l.YNc(7,Mt,3,3,"ng-container",19),l.BQk(),l.BQk()),2&e){const e=t.ngIf;l.xp6(1),l.Q6J("ngSwitch",e.name),l.xp6(1),l.Q6J("ngSwitchCase","general"),l.xp6(1),l.Q6J("ngSwitchCase","themes"),l.xp6(1),l.Q6J("ngSwitchCase","menus"),l.xp6(1),l.Q6J("ngSwitchCase","seo-settings"),l.xp6(1),l.Q6J("ngSwitchCase","custom-code")}}const wt=function(){return[]},qt=function(e){return{panel:e}};function kt(e,t){if(1&e&&(l.TgZ(0,"a",24),l.TgZ(1,"span",25),l._uU(2),l.qZA(),l._UZ(3,"mat-icon",26),l.qZA()),2&e){const e=t.$implicit,n=l.oxw(2);l.Q6J("routerLink",l.DdM(3,wt))("queryParams",l.VKq(4,qt,n.slugify(e.name))),l.xp6(2),l.Oqu(n.viewName(e.name))}}function Ot(e,t){if(1&e&&(l.TgZ(0,"div",22),l.YNc(1,kt,4,6,"a",23),l.qZA()),2&e){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.editor.config.sections)}}let Pt=(()=>{class e{constructor(e,t,n,i,o){this.editor=e,this.router=t,this.route=n,this.breakpoints=i,this.config=o,this.panelPortal$=this.editor.activePanel$.pipe((0,c.U)(e=>e&&e.component?new r.C5(e.component):null))}ngOnInit(){this.editor.init(this.iframe.nativeElement,this.route.snapshot.data.defaultSettings,this.config),this.routerSub=this.route.queryParams.subscribe(e=>{this.editor.openPanel(e.panel)})}ngOnDestroy(){this.routerSub&&this.routerSub.unsubscribe()}closeEditor(){this.router.navigate(["admin"])}slugify(e){return(0,s.V)(e)}viewName(e){return e.replace("-"," ")}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(I),l.Y36(a.F0),l.Y36(a.gz),l.Y36(N.S),l.Y36(u,8))},e.\u0275cmp=l.Xpm({type:e,selectors:[["appearance"]],viewQuery:function(e,t){if(1&e&&(l.Gf(mt,7),l.Gf(d._,7)),2&e){let e;l.iGM(e=l.CRH())&&(t.iframe=e.first),l.iGM(e=l.CRH())&&(t.sidenav=e.first)}},decls:24,vars:13,consts:[[1,"no-navbar"],[1,"sidebar"],[1,"header"],[1,"back-button",3,"click"],["svgIcon","close"],["trans","",1,"title"],["mat-raised-button","","color","accent",1,"button","primary","save-button",3,"disabled","click"],["trans","",4,"ngIf","ngIfElse"],["saved",""],[4,"ngIf","ngIfElse"],["navigation",""],[1,"live-preview"],["src","about:blank"],["iframe",""],["mat-fab","",1,"sidebar-toggle-button",3,"click"],["svgIcon","edit"],["trans",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],[3,"cdkPortalOutlet"],[1,"root-navigation"],["class","nav-item",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"nav-item",3,"routerLink","queryParams"],["trans","",1,"text"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(e,t){if(1&e&&(l.TgZ(0,"sidenav",0),l.TgZ(1,"nav",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.NdJ("click",function(){return t.closeEditor()}),l._UZ(4,"mat-icon",4),l.qZA(),l.TgZ(5,"div",5),l._uU(6,"Appearance Editor"),l.qZA(),l.TgZ(7,"button",6),l.NdJ("click",function(){return t.editor.saveChanges()}),l.ALo(8,"async"),l.ALo(9,"async"),l.YNc(10,ft,2,0,"span",7),l.ALo(11,"async"),l.YNc(12,bt,2,0,"ng-template",null,8,l.W1O),l.qZA(),l.qZA(),l.YNc(14,yt,8,6,"ng-container",9),l.ALo(15,"async"),l.YNc(16,Ot,2,1,"ng-template",null,10,l.W1O),l.qZA(),l.TgZ(18,"main"),l.TgZ(19,"div",11),l._UZ(20,"iframe",12,13),l.qZA(),l.qZA(),l.qZA(),l.TgZ(22,"button",14),l.NdJ("click",function(){return t.sidenav.toggleSidebarMode()}),l._UZ(23,"mat-icon",15),l.qZA()),2&e){const e=l.MAs(13),n=l.MAs(17);l.xp6(7),l.Q6J("disabled",!l.lcZ(8,5,t.editor.changes$)||l.lcZ(9,7,t.editor.loading$)),l.xp6(3),l.Q6J("ngIf",l.lcZ(11,9,t.editor.changes$))("ngIfElse",e),l.xp6(4),l.Q6J("ngIf",l.lcZ(15,11,t.editor.activePanel$))("ngIfElse",n)}},directives:[d._,U.Hw,$.P,Y.lW,i.O5,i.RF,i.n9,i.ED,re,Ie,ot,rt,ht,r.Pl,i.sg,a.yS],pipes:[i.Ov],styles:[".mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}.sidebar-toggle-button[_ngcontent-%COMP%]{display:none;position:fixed;bottom:15px;right:15px;z-index:4}sidenav[_ngcontent-%COMP%]{--nav-width: 330px}.sidebar[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px rgba(0,0,0,.141),0 1px 5px rgba(0,0,0,.122);padding:0}.sidebar[_ngcontent-%COMP%]   .root-navigation[_ngcontent-%COMP%]{padding:10px}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;padding-right:10px;border-bottom:1px solid var(--be-divider-default);height:50px}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:10px;font-size:1.7rem;font-weight:300}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{margin-left:auto;max-height:36px;box-shadow:none}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{cursor:default}.live-preview[_ngcontent-%COMP%]{display:flex;height:100%;justify-content:center;align-items:center;flex:1 1 auto;position:relative}.live-preview[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border:none;width:100%;height:100%}@media screen and (max-width: 768px){.sidebar-toggle-button[_ngcontent-%COMP%]{display:block}}"],changeDetection:0}),e})(),Jt=(()=>{class e{constructor(e,t){this.editor=e,this.modal=t}canDeactivate(){return!this.editor.changes$.value||this.modal.show(Ze.z,{title:"Close Appearance Editor",body:"Are you sure you want to close appearance editor?",bodyBold:"All unsaved changes will be lost.",ok:"Close",cancel:"Stay"}).afterClosed()}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(I),l.LFG(xe.u))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var It=n(42690),Nt=n(5304),Ut=n(19773),$t=n(59193),Yt=n(25917);const Qt=[{path:"",component:Pt,data:{permissions:["appearance.update"]},resolve:{defaultSettings:(()=>{class e{constructor(e,t){this.router=e,this.http=t}resolve(e,t){return this.http.get("admin/appearance/values").pipe((0,Nt.K)(()=>(this.router.navigate(["/admin"]),$t.E)),(0,Ut.zg)(e=>e?(0,Yt.of)(e):(this.router.navigate(["/admin"]),$t.E)))}}return e.\u0275fac=function(t){return new(t||e)(l.LFG(a.F0),l.LFG(P.r))},e.\u0275prov=l.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},canActivate:[It.a],canDeactivate:[Jt],children:[{path:""},{path:":panel"},{path:":panel/:activeItem"}]}];let St=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.Bz.forChild(Qt)],a.Bz]}),e})();var Ft=n(43389);let Lt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.ez,Ft.p,Y.ot,U.Ps]]}),e})();var Vt=n(49866),Dt=n(68285);let Et=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[i.ez,Vt.N,U.Ps,Me.si]]}),e})();var Ht=n(26989);let Rt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({providers:[{provide:u,useValue:p,multi:!0}],imports:[[St,i.ez,o.u5,o.UX,Lt,Vt.N,Dt.T,Ft.p,Et,Ht.c,G.Tx,B.Cv,U.Ps,Y.ot,ce.Is,Ve.To,Ue._t,r.eL,pe.rP]]}),e})();const zt=function(){return["Help Center Home"]},jt="hc.header.appearance";function Gt(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",20),l.ynx(1,21),l._UZ(2,"input",22),l._UZ(3,"input",23),l.BQk(),l.TgZ(4,"button",24),l.NdJ("click",function(){const t=l.CHM(e).index;return l.oxw().removeSidebarTip(t)}),l._UZ(5,"mat-icon",25),l.qZA(),l.qZA()}if(2&e){const e=t.index,n=l.oxw();l.xp6(1),l.Q6J("formGroupName",e),l.xp6(1),l.MGl("id","","new-ticket-tip-"+e,"}"),l.Q6J("placeholder",(null==n.defaultValues.sidebarTips[e]?null:n.defaultValues.sidebarTips[e].title)||"")("highlightInPreview",".tips .tip-container:nth-child("+(e+1)+") .title"),l.xp6(1),l.MGl("id","","new-ticket-tip-"+e,"}"),l.Q6J("placeholder",(null==n.defaultValues.sidebarTips[e]?null:n.defaultValues.sidebarTips[e].content)||"")("highlightInPreview",".tips .tip-container:nth-child("+(e+1)+") .content")}}const Xt=function(){return["New Ticket"]},Bt="hc.newTicket.appearance",Wt={defaultRoute:"help-center",navigationRoutes:["help-center","mailbox","account/settings","page"],menus:{positions:["agent-mailbox","admin-navbar","header","footer","footer-secondary","custom-page-navbar"],availableRoutes:["/help-center/tickets","/help-center/manage","/mailbox/tickets","mailbox/tickets/search"]},sections:[{route:"/help-center",position:3,component:(()=>{class e{constructor(e,t,n){this.appearance=e,this.fb=t,this.settings=n,this.form=this.fb.group({title:[""],subtitle:[""],placeholder:[""],background:[""]})}ngOnInit(){const e=this.settings.getJson(jt,{});this.defaultValues=JSON.parse(this.appearance.defaultSettings[jt]||null),this.form.patchValue(e),this.form.valueChanges.subscribe(e=>{this.appearance.setConfig(jt,e),this.appearance.addChanges({[jt]:e})})}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(I),l.Y36(o.qu),l.Y36(O.Z))},e.\u0275cmp=l.Xpm({type:e,selectors:[["help-center-home-appearance-panel"]],decls:16,vars:6,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],["formControlName","background","highlightInPreview",".jumbotron"],[1,"input-container"],["for","hc-home-title","trans",""],["type","text","id","hc-home-title","formControlName","title","highlightInPreview",".title",3,"placeholder"],["for","hc-home-subtitle","trans",""],["id","hc-home-subtitle","formControlName","subtitle","rows","3","highlightInPreview",".subtitle",3,"placeholder"],["for","hc-home-placeholder","trans",""],["type","text","id","hc-home-placeholder","formControlName","placeholder","highlightInPreview",".search-input",3,"placeholder"]],template:function(e,t){1&e&&(l.TgZ(0,"appearance-panel-meta",0),l.NdJ("back",function(){return t.appearance.closeActivePanel()}),l.qZA(),l.TgZ(1,"form",1),l.TgZ(2,"appearance-image-input",2),l._uU(3,"Background"),l.qZA(),l.TgZ(4,"div",3),l.TgZ(5,"label",4),l._uU(6,"Title"),l.qZA(),l._UZ(7,"input",5),l.qZA(),l.TgZ(8,"div",3),l.TgZ(9,"label",6),l._uU(10,"Subtitle"),l.qZA(),l._UZ(11,"textarea",7),l.qZA(),l.TgZ(12,"div",3),l.TgZ(13,"label",8),l._uU(14,"Search Field Placeholder"),l.qZA(),l._UZ(15,"input",9),l.qZA(),l.qZA()),2&e&&(l.Q6J("path",l.DdM(5,zt)),l.xp6(1),l.Q6J("formGroup",t.form),l.xp6(6),l.Q6J("placeholder",t.defaultValues.title),l.xp6(4),l.Q6J("placeholder",t.defaultValues.subtitle),l.xp6(4),l.Q6J("placeholder",t.defaultValues.placeholder))},directives:[V,o._Y,o.JL,o.sg,oe,o.JJ,o.u,ae,$.P,o.Fj],styles:[""],changeDetection:0}),e})(),name:"Help Center Homepage"},{route:"/help-center/tickets/new",position:3,component:(()=>{class e{constructor(e,t,n){this.appearance=e,this.fb=t,this.settings=n,this.form=this.fb.group({title:[""],categoryLabel:[""],subjectLabel:[""],descriptionLabel:[""],submitButtonText:[""],sidebarTitle:[""],sidebarTips:this.fb.array([])})}ngOnInit(){const e=this.settings.getJson(Bt,{});this.defaultValues=JSON.parse(this.appearance.defaultSettings[Bt]||null),this.form.patchValue(e),(e.sidebarTips||[]).forEach(e=>this.addNewSidebarTip(e)),this.form.valueChanges.subscribe(e=>{this.appearance.setConfig(Bt,e),this.appearance.addChanges({[Bt]:e})})}sidebarTips(){return this.form.get("sidebarTips")}addNewSidebarTip(e={}){this.sidebarTips().push(this.fb.group({title:[e.title],content:[e.content]}))}removeSidebarTip(e){this.sidebarTips().removeAt(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(I),l.Y36(o.qu),l.Y36(O.Z))},e.\u0275cmp=l.Xpm({type:e,selectors:[["new-ticket-appearance-panel"]],decls:33,vars:10,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],[1,"input-container"],["for","hc-home-title","trans",""],["type","text","id","hc-home-title","formControlName","title","highlightInPreview","h1",3,"placeholder"],["for","hc-home-category-label","trans",""],["id","hc-home-category-label","formControlName","categoryLabel","rows","2","highlightInPreview",".category-input-container label",3,"placeholder"],["for","hc-home-subject-label","trans",""],["type","text","id","hc-home-subject-label","formControlName","subjectLabel","highlightInPreview",".subject-input-container label",3,"placeholder"],["for","hc-home-description-label","trans",""],["type","text","id","hc-home-description-label","formControlName","descriptionLabel","highlightInPreview",".description-input-container label",3,"placeholder"],["for","hc-home-submit-button-text","trans",""],["type","text","id","hc-home-submit-button-text","formControlName","submitButtonText","highlightInPreview",".submit-button",3,"placeholder"],["for","hc-home-submit-sidebar-title","trans",""],["type","text","id","hc-home-submit-sidebar-title","formControlName","sidebarTitle","highlightInPreview",".right-column .header",3,"placeholder"],["formArrayName","sidebarTips",1,"sidebar-tips","many-inputs"],["trans",""],["class","input-container sidebar-tip-input-container",4,"ngFor","ngForOf"],[1,"actions"],["type","button","mat-flat-button","","color","accent","trans","",3,"click"],[1,"input-container","sidebar-tip-input-container"],[3,"formGroupName"],["type","text","formControlName","title",3,"id","placeholder","highlightInPreview"],["type","text","formControlName","content",3,"id","placeholder","highlightInPreview"],["type","button","mat-icon-button","",1,"remove-tip-button",3,"click"],["svgIcon","delete"]],template:function(e,t){1&e&&(l.TgZ(0,"appearance-panel-meta",0),l.NdJ("back",function(){return t.appearance.closeActivePanel()}),l.qZA(),l.TgZ(1,"form",1),l.TgZ(2,"div",2),l.TgZ(3,"label",3),l._uU(4,"Title"),l.qZA(),l._UZ(5,"input",4),l.qZA(),l.TgZ(6,"div",2),l.TgZ(7,"label",5),l._uU(8,"Category Label"),l.qZA(),l._UZ(9,"textarea",6),l.qZA(),l.TgZ(10,"div",2),l.TgZ(11,"label",7),l._uU(12,"Subject Label"),l.qZA(),l._UZ(13,"input",8),l.qZA(),l.TgZ(14,"div",2),l.TgZ(15,"label",9),l._uU(16,"Description Label"),l.qZA(),l._UZ(17,"input",10),l.qZA(),l.TgZ(18,"div",2),l.TgZ(19,"label",11),l._uU(20,"Submit Button Text"),l.qZA(),l._UZ(21,"input",12),l.qZA(),l.TgZ(22,"div",2),l.TgZ(23,"label",13),l._uU(24,"Sidebar Title"),l.qZA(),l._UZ(25,"input",14),l.qZA(),l.TgZ(26,"div",15),l.TgZ(27,"h2",16),l._uU(28,"Sidebar Tips"),l.qZA(),l.YNc(29,Gt,6,7,"div",17),l.TgZ(30,"div",18),l.TgZ(31,"button",19),l.NdJ("click",function(){return t.addNewSidebarTip()}),l._uU(32,"Add"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&e&&(l.Q6J("path",l.DdM(9,Xt)),l.xp6(1),l.Q6J("formGroup",t.form),l.xp6(4),l.Q6J("placeholder",t.defaultValues.title),l.xp6(4),l.Q6J("placeholder",t.defaultValues.categoryLabel),l.xp6(4),l.Q6J("placeholder",t.defaultValues.subjectLabel),l.xp6(4),l.Q6J("placeholder",t.defaultValues.descriptionLabel),l.xp6(4),l.Q6J("placeholder",t.defaultValues.submitButtonText),l.xp6(4),l.Q6J("placeholder",t.defaultValues.sidebarTitle),l.xp6(4),l.Q6J("ngForOf",t.sidebarTips().controls))},directives:[V,o._Y,o.JL,o.sg,$.P,o.Fj,o.JJ,o.u,ae,o.CE,i.sg,Y.lW,o.x0,U.Hw],styles:[".sidebar-tips[_ngcontent-%COMP%]{border-top:1px solid var(--be-divider-default);margin-top:20px;padding-top:30px}.sidebar-tips[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;font-size:1.5rem;color:var(--be-label);font-weight:400}.sidebar-tip-input-container[_ngcontent-%COMP%]{position:relative}.sidebar-tip-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:nth-child(1){border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.sidebar-tip-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:nth-child(2){border-top-left-radius:0;border-top-right-radius:0}.actions[_ngcontent-%COMP%]{text-align:right}.remove-tip-button[_ngcontent-%COMP%]{position:absolute;right:0;top:0;background:#f44336;color:#fff;height:30px;width:30px;line-height:30px;border-radius:0 4px}.remove-tip-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:20px;height:20px;line-height:20px}"],changeDetection:0}),e})(),name:"New Ticket Page"}]};let Kt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({providers:[{provide:u,useValue:Wt,multi:!0}],imports:[[i.ez,Rt,U.Ps,Y.ot,Vt.N,o.UX]]}),e})()}}]);