"use strict";(self.webpackChunkbedesk=self.webpackChunkbedesk||[]).push([[300],{95439:function(e){e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,o,r;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(o=i;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(r=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=i;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,r[o]))return!1;for(o=i;0!=o--;){var s=r[o];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},6008:function(e,t,n){n.d(t,{b:function(){return a}});var i=n(38583),o=n(76627),r=n(51095),s=n(37716);let a=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.oAB({type:e}),e.\u0275inj=s.cJS({imports:[[i.ez,o.Ps,r.ot]]}),e})()},83326:function(e,t,n){n.d(t,{B:function(){return o}});var i=n(17238);const o=[(0,i.X$)("fadeIn",[(0,i.eR)(":enter",[(0,i.oB)({opacity:0}),(0,i.jt)("325ms ease-in",(0,i.oB)({opacity:1}))])]),(0,i.X$)("fadeOut",[(0,i.eR)(":leave",[(0,i.oB)({opacity:1,position:"absolute",left:"0",right:"0"}),(0,i.jt)("325ms ease-out",(0,i.oB)({opacity:0}))])])]},64833:function(e,t,n){n.d(t,{_:function(){return r}});var i=n(37716),o=n(18849);let r=(()=>{class e{constructor(e){this.theme=e,this.animation="wave",this.variant="text",this.dark=this.theme.isDarkMode()}get pulsate(){return"pulsate"===this.animation}get wave(){return"wave"===this.animation}get avatar(){return"avatar"===this.variant}get text(){return"text"===this.variant}get rect(){return"rect"===this.variant}get icon(){return"icon"===this.variant}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.f))},e.\u0275cmp=i.Xpm({type:e,selectors:[["skeleton"]],hostAttrs:["aria-busy","true","aria-valuemin","0","aria-valuemax","100","aria-valuetext","Loading...","role","progressbar"],hostVars:14,hostBindings:function(e,t){2&e&&i.ekj("dark",t.dark)("pulsate",t.pulsate)("wave",t.wave)("avatar",t.avatar)("text",t.text)("rect",t.rect)("icon",t.icon)},inputs:{animation:"animation",variant:"variant"},decls:0,vars:0,template:function(e,t){},styles:['@charset "UTF-8";[_nghost-%COMP%]{display:inline-block;overflow:hidden;position:relative;background-color:var(--be-divider-lighter);background-repeat:no-repeat;border-radius:4px;width:100%;height:100%;will-change:transform}.wave[_nghost-%COMP%]{-webkit-animation:wave 2s ease-in-out infinite;animation:wave 2s ease-in-out infinite;background-size:200px 100%;background-image:linear-gradient(90deg,rgba(255,255,255,0),rgba(255,255,255,.6),rgba(255,255,255,0))}.wave.dark[_nghost-%COMP%]{background-image:linear-gradient(90deg,transparent,rgba(0,0,0,.2),transparent)}.pulsate[_nghost-%COMP%]{-webkit-animation:pulse 1.5s ease-in-out infinite;animation:pulse 1.5s ease-in-out infinite;-webkit-animation-delay:.5s;animation-delay:.5s}.avatar[_nghost-%COMP%]{width:40px;height:40px;margin-right:10px;border-radius:4px;flex-shrink:0}.circle[_nghost-%COMP%]{border-radius:50%}.icon[_nghost-%COMP%]{width:24px;height:24px;margin-left:8px;margin-right:8px}.text[_nghost-%COMP%]{height:1.4rem;vertical-align:middle}.text[_nghost-%COMP%]:before{content:"\\a0"}@-webkit-keyframes wave{0%{background-position:-200px 0}to{background-position:calc(200px + 100%) 0}}@keyframes wave{0%{background-position:-200px 0}to{background-position:calc(200px + 100%) 0}}@-webkit-keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}@keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}'],changeDetection:0}),e})()},87446:function(e,t,n){n.d(t,{m:function(){return r}});var i=n(38583),o=n(37716);let r=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[i.ez]]}),e})()},83644:function(e,t,n){n.d(t,{XQ:function(){return i},Bq:function(){return o},pg:function(){return r},Hi:function(){return s}});class i{constructor(e){this.defaultValue=void 0!==e.defaultValue?e.defaultValue:"",this.key=e.key||"",this.label=e.label||e.key||"",this.description=e.description||"",this.defaultOperator=e.defaultOperator||r.eq,this.required=!!e.required,this.order=void 0===e.order?1:e.order,this.type=e.type||o.Select,this.inputType=e.inputType,this.options=e.options||[],this.operators=e.operators,this.component=e.component,this.componentData=e.componentData}}var o=(()=>{return(e=o||(o={})).Select="select",e.DatePicker="datePicker",e.SelectModel="selectModel",e.Input="input",e.StaticValue="staticValue",o;var e})(),r=(()=>{return(e=r||(r={})).eq="=",e.ne="!=",e.gt=">",e.gte=">=",e.lt="<",e.lte="<=",e.has="has",e.doesntHave="doesntHave",r;var e})();const s=[r.eq,r.ne,r.gt,r.gte,r.lt,r.lte]},45418:function(e,t,n){n.d(t,{k4:function(){return o},T7:function(){return r},yH:function(){return s}});var i=n(83644);class o extends i.XQ{constructor(){super(...arguments),this.type=i.Bq.DatePicker,this.operators=i.Hi,this.defaultOperator=i.pg.lte,this.defaultValue=(new Date).toISOString().split("T")[0]}}class r extends o{constructor(){super(...arguments),this.key="created_at",this.label="Created At"}}class s extends o{constructor(){super(...arguments),this.key="updated_at",this.label="Updated At"}}},26996:function(e,t,n){n.d(t,{k:function(){return ee}});var i=n(37716),o=n(39761),r=n(88002),s=n(87519),a=n(45435),c=n(26215),l=n(90739),u=n(66682),d=n(22759),p=n(15515),h=n(38583),f=n(76627);const g=["filterSuggestion"];function v(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",8,9),i.NdJ("click",function(){const t=i.CHM(e).$implicit;return i.oxw().filterSelected.emit(t.value)}),i.TgZ(2,"div",10),i._uU(3),i.qZA(),i.TgZ(4,"div",2),i._uU(5),i.qZA(),i.qZA()}if(2&e){const e=t.$implicit,n=t.index;i.uIk("data-filter-key",e.key)("data-index",n),i.xp6(3),i.Oqu(e.value.label),i.xp6(2),i.Oqu(e.value.description)}}let m=(()=>{class e{constructor(){this.filterSelected=new i.vpe,this.originalOrder=()=>0}anyFocused(){return document.activeElement.classList.contains("filter-suggestion-item")}focusItemAt(e){this.items.get(e).nativeElement.focus()}getFocusedFilter(){if(this.anyFocused()){const e=document.activeElement.dataset.filterKey;return this.filters[e]}}getFocusedIndex(){if(this.anyFocused()){const e=document.activeElement;return parseInt(e.dataset.index)}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["filter-suggestions"]],viewQuery:function(e,t){if(1&e&&i.Gf(g,5),2&e){let e;i.iGM(e=i.CRH())&&(t.items=e)}},inputs:{filters:"filters"},outputs:{filterSelected:"filterSelected"},decls:13,vars:4,consts:[[1,"table"],[1,"filter-suggestion-header","row"],["trans","",1,"column"],["role","list",1,"body"],["role","listitem","class","row filter-suggestion-item","tabindex","0",3,"click",4,"ngFor","ngForOf"],[1,"help-container"],["svgIcon","info"],["trans",""],["role","listitem","tabindex","0",1,"row","filter-suggestion-item",3,"click"],["filterSuggestion",""],["trans","",1,"column","label-column"]],template:function(e,t){1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i.TgZ(2,"div",2),i._uU(3,"Field"),i.qZA(),i.TgZ(4,"div",2),i._uU(5,"Description"),i.qZA(),i.qZA(),i.TgZ(6,"div",3),i.YNc(7,v,6,4,"div",4),i.ALo(8,"keyvalue"),i.qZA(),i.qZA(),i.TgZ(9,"div",5),i._UZ(10,"mat-icon",6),i.TgZ(11,"div",7),i._uU(12," Use arrows, tab or mouse to navigate added filters. Backspace or delete key to remove them. "),i.qZA(),i.qZA()),2&e&&(i.xp6(7),i.Q6J("ngForOf",i.xi3(8,1,t.filters,t.originalOrder)))},directives:[p.P,h.sg,f.Hw],pipes:[h.Nd],styles:["[_nghost-%COMP%]{display:none;position:absolute;left:0;z-index:10;background-color:var(--be-background);width:100%;border-radius:4px;overflow:hidden;color:var(--be-text);box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px rgba(0,0,0,.141),0 1px 14px rgba(0,0,0,.122)}.visible[_nghost-%COMP%]{display:block}.filter-suggestion-header[_ngcontent-%COMP%]{background-color:var(--be-background-alternative)}.row[_ngcontent-%COMP%]{display:flex;height:55px;padding:15px;border-bottom:1px solid var(--be-divider-lighter)}.row[_ngcontent-%COMP%]:not(.header){cursor:pointer}.row[_ngcontent-%COMP%]:not(.header):hover{background-color:var(--be-hover)}.row[_ngcontent-%COMP%]:not(.header):focus{background-color:var(--be-hover);outline:none}.column[_ngcontent-%COMP%]{flex:0 0 48%}.label-column[_ngcontent-%COMP%]{text-transform:capitalize}.help-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;background-color:var(--be-accent-emphasis)}.help-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:10px;color:var(--be-accent-default)}"],changeDetection:0}),e})();var b=n(58480),x=n(95439),y=n(3679),w=n(15381);function k(e,t){if(1&e&&(i.ynx(0),i._UZ(1,"img",2),i.TgZ(2,"div",3),i._uU(3),i.qZA(),i.BQk()),2&e){const e=t.ngIf;i.xp6(1),i.Q6J("src",e.image,i.LSH),i.xp6(2),i.Oqu(e.name)}}function C(e,t){1&e&&(i.TgZ(0,"div",4),i._uU(1,"Click to select"),i.qZA())}let O=(()=>{class e{constructor(e){this.dialog=e,this.value$=new c.X(null)}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}writeValue(e){this.value$.next(e)}onClick(){this.openSelectModelDialog()}openSelectModelDialog(){this.dialog.open(this.filter.component,this.filter.componentData).afterClosed().subscribe(e=>{e&&(this.value$.next(e),this.propagateChange(e))})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(w.u))},e.\u0275cmp=i.Xpm({type:e,selectors:[["select-model-control"]],hostBindings:function(e,t){1&e&&i.NdJ("click",function(){return t.onClick()})},inputs:{filter:"filter"},features:[i._Bn([{provide:y.JU,useExisting:e,multi:!0}])],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["defaultHint",""],[1,"image",3,"src"],[1,"name"],["trans",""]],template:function(e,t){if(1&e&&(i.YNc(0,k,4,2,"ng-container",0),i.ALo(1,"async"),i.YNc(2,C,2,0,"ng-template",null,1,i.W1O)),2&e){const e=i.MAs(3);i.Q6J("ngIf",i.lcZ(1,2,t.value$))("ngIfElse",e)}},directives:[h.O5,p.P],pipes:[h.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;padding:0 8px;cursor:pointer}img[_ngcontent-%COMP%]{height:22px;width:22px;border-radius:4px;margin-right:8px;flex-shrink:0;-o-object-fit:cover;object-fit:cover}"],changeDetection:0}),e})();const F={"=":"is","!=":"is not",">":"is greater than",">=":"is greater than or equal to","<":"is less than","<=":"is less than or equal to",has:"Include",doesntHave:"Do not include"};var I=n(96605);let A=(()=>{class e{constructor(e){this.breakpoints=e}transform(e,t){return t||this.breakpoints.isMobile$.value?e:F[e]}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(I.S,16))},e.\u0275pipe=i.Yjl({name:"operatorDisplayName",type:e,pure:!0}),e})();const _=["select"];function S(e,t){if(1&e&&(i.TgZ(0,"option",4),i._uU(1),i.ALo(2,"operatorDisplayName"),i.qZA()),2&e){const e=t.$implicit,n=i.oxw();i.Q6J("value",e),i.xp6(1),i.hij(" ",i.xi3(2,2,e,n.compact)," ")}}let M=(()=>{class e{ngAfterViewInit(){this.resizeSelect()}resizeSelect(){var e;const t=null===(e=this.select)||void 0===e?void 0:e.nativeElement;t&&t.selectedIndex>-1&&(t.style.width=`${t.options[t.selectedIndex].label.length+5}ch`)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["operator-select"]],viewQuery:function(e,t){if(1&e&&i.Gf(_,5),2&e){let e;i.iGM(e=i.CRH())&&(t.select=e.first)}},inputs:{compact:"compact",formGroup:"formGroup",operators:"operators"},decls:4,vars:2,consts:[[3,"formGroup"],["formControlName","operator",1,"operator-select",3,"ngModelChange"],["select",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(i.ynx(0,0),i.TgZ(1,"select",1,2),i.NdJ("ngModelChange",function(){return t.resizeSelect()}),i.YNc(3,S,3,5,"option",3),i.qZA(),i.BQk()),2&e&&(i.Q6J("formGroup",t.formGroup),i.xp6(3),i.Q6J("ngForOf",t.operators))},directives:[y.JL,y.sg,y.EJ,y.JJ,y.u,h.sg,y.YN,y.Kr],pipes:[A],styles:['[_nghost-%COMP%]{display:flex;align-items:center;position:relative;height:100%}[_nghost-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;width:50%;left:0;background-color:var(--be-chip)}[_nghost-%COMP%]:after{content:"";position:absolute;top:0;bottom:0;width:50%;right:0;background-color:var(--be-accent-default)}.operator-select[_ngcontent-%COMP%]{transition:width .1s ease-in-out 0s;padding:2px 8px;min-width:60px;max-width:200px;height:27px;color:var(--be-accent-default);z-index:10;background-color:var(--be-accent-contrast);text-overflow:ellipsis;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:10px;-moz-text-align-last:center;text-align-last:center;border:1px solid transparent}.operator-select[_ngcontent-%COMP%]:focus-visible{outline:0;border-color:var(--be-accent-default);box-shadow:0 0 0 1px #fff}'],changeDetection:0}),e})();const Z=["valueInput"];function E(e,t){if(1&e&&i._UZ(0,"operator-select",8),2&e){const e=i.oxw().ngIf,t=i.oxw();i.Q6J("compact",t.compact)("formGroup",e)("operators",t.filter.operators)}}function P(e,t){if(1&e&&(i.TgZ(0,"option",16),i._uU(1),i.qZA()),2&e){const e=t.$implicit;i.Q6J("ngValue",e.value),i.xp6(1),i.hij(" ",e.key||e.value," ")}}function R(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",9),i.TgZ(1,"select",10,11),i.NdJ("ngModelChange",function(){return i.CHM(e),i.oxw(2).resizeInput()}),i.YNc(3,P,2,2,"option",12),i.qZA(),i.O4$(),i.TgZ(4,"svg",13),i._UZ(5,"path",14),i._UZ(6,"path",15),i.qZA(),i.qZA()}if(2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("id",e.key)("compareWith",e.compareFilterValueFn),i.xp6(2),i.Q6J("ngForOf",e.filter.options)}}function J(e,t){if(1&e&&(i.TgZ(0,"div",17),i._UZ(1,"input",18,11),i.qZA()),2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("id",e.key)}}function T(e,t){if(1&e&&i._UZ(0,"select-model-control",19,11),2&e){const e=i.oxw(2);i.Q6J("filter",e.filter)("id",e.key)}}function D(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"div",9),i.TgZ(1,"input",20,11),i.NdJ("ngModelChange",function(){return i.CHM(e),i.oxw(2).resizeInput()}),i.qZA(),i.qZA()}if(2&e){const e=i.oxw(2);i.xp6(1),i.Q6J("id",e.key)("type",e.filter.inputType||"text")}}function N(e,t){if(1&e){const e=i.EpF();i.ynx(0,1),i.TgZ(1,"div",2),i.NdJ("click",function(){return i.CHM(e),i.oxw().el.nativeElement.focus()}),i._uU(2),i.qZA(),i.YNc(3,E,1,3,"operator-select",3),i.ynx(4,4),i.YNc(5,R,7,3,"div",5),i.YNc(6,J,3,1,"div",6),i.YNc(7,T,2,2,"select-model-control",7),i.YNc(8,D,3,2,"div",5),i.BQk(),i.BQk()}if(2&e){const e=t.ngIf,n=i.oxw();i.Q6J("formGroup",e),i.xp6(2),i.Oqu(n.filter.label),i.xp6(1),i.Q6J("ngIf",n.filter.operators),i.xp6(1),i.Q6J("ngSwitch",n.filter.type),i.xp6(1),i.Q6J("ngSwitchCase","select"),i.xp6(1),i.Q6J("ngSwitchCase","datePicker"),i.xp6(1),i.Q6J("ngSwitchCase","selectModel"),i.xp6(1),i.Q6J("ngSwitchCase","input")}}let q=(()=>{class e{constructor(e){this.el=e,this.compareFilterValueFn=(e,t)=>x(e,t)}ngAfterViewInit(){this.resizeInput()}focus(){this.el.nativeElement.focus()}focusValueInput(){var e;this.valueInput instanceof O?this.valueInput.openSelectModelDialog():(null===(e=this.valueInput)||void 0===e?void 0:e.nativeElement)&&this.valueInput.nativeElement.focus()}resizeInput(){var e;const t=null===(e=this.valueInput)||void 0===e?void 0:e.nativeElement;if("SELECT"===(null==t?void 0:t.nodeName)){const e=t;e.selectedIndex>-1&&(e.style.width=`${e.options[e.selectedIndex].label.length+5}ch`)}else"INPUT"===(null==t?void 0:t.nodeName)&&"date"!==t.type&&(t.style.width=`${t.value.length+7}ch`)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(i.SBq))},e.\u0275cmp=i.Xpm({type:e,selectors:[["active-filter"]],viewQuery:function(e,t){if(1&e&&i.Gf(Z,5),2&e){let e;i.iGM(e=i.CRH())&&(t.valueInput=e.first)}},hostAttrs:["tabIndex","0","role","button"],hostVars:1,hostBindings:function(e,t){2&e&&i.uIk("data-control-key",t.key)},inputs:{key:"key",compact:"compact",form:"form",filter:"filter"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["trans","",1,"filter-label",3,"click"],[3,"compact","formGroup","operators",4,"ngIf"],[3,"ngSwitch"],["class","filter-input-container",4,"ngSwitchCase"],["class","date-picker-container",4,"ngSwitchCase"],["formControlName","value","class","filter-value select-model-input",3,"filter","id",4,"ngSwitchCase"],[3,"compact","formGroup","operators"],[1,"filter-input-container"],["formControlName","value",1,"filter-input","filter-value",3,"id","compareWith","ngModelChange"],["valueInput",""],["trans","",3,"ngValue",4,"ngFor","ngForOf"],["viewBox","0 0 24 24",1,"caret-svg"],["d","M7 10l5 5 5-5z"],["d","M0 0h24v24H0z","fill","none"],["trans","",3,"ngValue"],[1,"date-picker-container"],["type","date","formControlName","value",1,"date-input","filter-value",3,"id"],["formControlName","value",1,"filter-value","select-model-input",3,"filter","id"],["formControlName","value","min","1","required","",1,"filter-input","filter-value",3,"id","type","ngModelChange"]],template:function(e,t){1&e&&i.YNc(0,N,9,8,"ng-container",0),2&e&&i.Q6J("ngIf",t.form.controls[t.key])},directives:[h.O5,y.JL,y.sg,p.P,h.RF,h.n9,M,y.EJ,y.JJ,y.u,h.sg,y.YN,y.Kr,y.Fj,O,y.Q7],styles:["[_nghost-%COMP%]{display:inline-flex;align-items:flex-start;border-radius:4px;height:37px;background-color:var(--be-chip);margin:3px 5px 3px 0}[_nghost-%COMP%]:focus{outline:none;box-shadow:var(--be-accent-default) 0 0 0 1px}.filter-label[_ngcontent-%COMP%]{color:var(--be-text);line-height:37px;cursor:pointer;padding:0 12px;text-transform:capitalize;white-space:nowrap;font-weight:500;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.filter-input-container[_ngcontent-%COMP%]{position:relative;height:100%;overflow:hidden;border-radius:0 4px 4px 0}.caret-svg[_ngcontent-%COMP%]{position:absolute;top:9.5px;right:5px;z-index:11;fill:var(--be-accent-contrast);width:18px;height:18px;pointer-events:none}.filter-input[_ngcontent-%COMP%]{border:0;transition:width .1s ease-in-out 0s;padding:0 12px;min-width:60px;max-width:200px;z-index:10;text-overflow:ellipsis;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:100%;font-weight:500}select.filter-select[_ngcontent-%COMP%]{padding:0 25px 0 12px}.date-input[_ngcontent-%COMP%]{position:relative;max-width:30ch;line-height:37px;height:37px;font-size:inherit;border:none;margin:0;padding:0 12px;width:20ch;font-weight:500}.select-model-input[_ngcontent-%COMP%]{min-width:76px;height:100%}.filter-value[_ngcontent-%COMP%]{background-color:var(--be-accent-default);color:var(--be-accent-contrast);border-radius:0 4px 4px 0}"],changeDetection:0}),e})();function Q(e,t){if(1&e&&i._UZ(0,"active-filter",2),2&e){const e=t.ngIf,n=i.oxw(),o=n.$implicit,r=n.index,s=i.oxw();i.Q6J("compact",s.compact)("key",o.key)("form",s.form)("filter",e),i.uIk("data-index",r)}}function $(e,t){if(1&e&&(i.ynx(0),i.YNc(1,Q,1,5,"active-filter",1),i.BQk()),2&e){const e=t.$implicit,n=i.oxw();i.xp6(1),i.Q6J("ngIf",n.config[e.value.value.key])}}const B=["*"];let Y=(()=>{class e{constructor(e,t,n){this.fb=e,this.cd=t,this.el=n}add(e,t={}){const n=void 0!==t.value?t.value:e.defaultValue,i=this.fb.group({key:e.key,value:n,operator:t.operator||e.defaultOperator}),o=Object.keys(this.form.controls).length+(0,b.O)(8);this.form.addControl(o,i,{emitEvent:""!==n}),this.cd.detectChanges(),t.focus&&this.filters.last.focusValueInput()}removeByKey(e){this.form.removeControl(e),this.cd.markForCheck()}removeCurrentlyFocused(){const e=document.activeElement;this.removeByKey(e.dataset.controlKey)}anyFocused(){return"ACTIVE-FILTER"===document.activeElement.nodeName}focusLast(){this.filters.last&&this.filters.last.focus()}focusPrevious(){const e=this.getFocusedIndex(),t=this.filters.get(e-1);t&&t.focus()}getByIndex(e){return this.filters.get(e)}lastIsFocused(){return this.getFocusedIndex()===this.filters.length-1}getFocusedIndex(){const e=document.activeElement.dataset.index;return e?parseInt(e):null}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(y.qu),i.Y36(i.sBO),i.Y36(i.SBq))},e.\u0275cmp=i.Xpm({type:e,selectors:[["active-filters"]],viewQuery:function(e,t){if(1&e&&i.Gf(q,5),2&e){let e;i.iGM(e=i.CRH())&&(t.filters=e)}},inputs:{compact:"compact",form:"form",config:"config"},ngContentSelectors:B,decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"compact","key","form","filter",4,"ngIf"],[3,"compact","key","form","filter"]],template:function(e,t){1&e&&(i.F$t(),i.YNc(0,$,2,1,"ng-container",0),i.ALo(1,"keyvalue"),i.Hsn(2)),2&e&&i.Q6J("ngForOf",i.lcZ(1,1,t.form.controls))},directives:[h.sg,h.O5,q],pipes:[h.Nd],styles:["[_nghost-%COMP%]{display:flex;flex:1 1 auto;flex-wrap:wrap;align-items:center}"],changeDetection:0}),e})();var U=n(24668),V=(()=>{return(e=V||(V={}))[e.ENTER=13]="ENTER",e[e.SPACE=32]="SPACE",e[e.ESCAPE=27]="ESCAPE",e[e.DELETE=46]="DELETE",e[e.ARROW_UP=38]="ARROW_UP",e[e.ARROW_RIGHT=39]="ARROW_RIGHT",e[e.ARROW_DOWN=40]="ARROW_DOWN",e[e.ARROW_LEFT=37]="ARROW_LEFT",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.S=83]="S",e[e.N=78]="N",e[e.A=65]="A",e[e.T=84]="T",e[e.B=66]="B",e[e.C=67]="C",e[e.O=79]="O",e[e.P=80]="P",e[e.R=82]="R",e[e.F=70]="F",e[e.Y=89]="Y",e[e.Z=90]="Z",V;var e})();let H=(()=>{class e{constructor(){this.bindings=[]}add(e,t){Array.isArray(e)||(e=[e]),e.forEach(e=>{this.bindings.push({keybind:this.parseKeybindString(e),keybindString:e,callback:t})})}addWithPreventDefault(e,t){this.bindings.push({keybind:this.parseKeybindString(e),keybindString:e,callback:t,preventDefault:!0})}listenOn(e,t={}){return(0,d.R)(e,"keydown").subscribe(e=>{(t.fireIfInputFocused||!["input","select"].includes(document.activeElement.nodeName.toLowerCase()))&&this.executeBindings(e)})}executeBindings(e){this.bindings.forEach(t=>{!this.bindingMatches(t.keybind,e)||(t.preventDefault&&e.preventDefault&&e.preventDefault(),t.callback(e))})}bindingMatches(e,t){return V[e.key.toUpperCase()]===t.keyCode&&(t.ctrlKey===e.ctrl||t.metaKey===e.ctrl)&&t.shiftKey===e.shift}parseKeybindString(e){const t=e.trim().split("+"),n={ctrl:!1,shift:!1,key:""};return t.forEach(e=>{"ctrl"===(e=e.trim().toLowerCase())?n.ctrl=!0:"shift"===e?n.shift=!0:n.key=e}),n}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var G=n(51095),z=n(63297);const j=["searchInput"],L=["filterSuggestion"];function K(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",8),i.NdJ("click",function(){return i.CHM(e),i.oxw().clearSearch()}),i._UZ(1,"mat-icon",9),i.qZA()}}function W(e,t){1&e&&(i.TgZ(0,"span",13),i._uU(1,"Filter"),i.qZA())}function X(e,t){if(1&e){const e=i.EpF();i.TgZ(0,"button",10),i.NdJ("click",function(){return i.CHM(e),i.oxw().toggleFilterDropdown()}),i._UZ(1,"mat-icon",11),i.YNc(2,W,2,0,"span",12),i.qZA()}if(2&e){const e=i.oxw();i.xp6(2),i.Q6J("ngIf",!e.compact)}}let ee=(()=>{class e{constructor(e,t,n,o,r,s){this.fb=e,this.route=t,this.el=n,this.keybinds=o,this.cd=r,this.router=s,this.filterChange=new i.vpe,this.inputFocus=new i.vpe,this.form=this.fb.group({}),this.filterBarHeight=0,this.filterDropdownVisible$=new c.X(!1)}set filters(e){e?(this.keyedFilters={},(e||[]).forEach(e=>{this.keyedFilters[e.key]=e})):this.keyedFilters=null}ngOnInit(){this.haveFiltersOrQuery$=(0,l.aj)([this.searchControl.valueChanges.pipe((0,o.O)(null)),this.form.valueChanges.pipe((0,o.O)(null))]).pipe((0,r.U)(([e,t])=>e||t&&0!==Object.keys(t).length))}ngAfterViewInit(){this.watchForSizeChanges(),this.setFiltersFromQuery(),this.setupKeybinds(),this.subscribeToCloseActions(),this.bindToFormValueChange()}onClick(e){(e.target===this.el.nativeElement||e.target===this.activeFilters.el.nativeElement)&&this.searchInput.nativeElement.focus()}ngOnDestroy(){var e;null===(e=this.closeActionsStream$)||void 0===e||e.unsubscribe()}clearSearch(){Object.keys(this.form.controls).forEach(e=>{this.activeFilters.removeByKey(e)}),this.searchControl.reset(null,{emitEvent:!1}),this.form.reset()}toggleFilterDropdown(){this.filterDropdownVisible$.next(!this.filterDropdownVisible$.value)}addFilterFromDropdownClick(e){this.activeFilters.add(e,{focus:!0}),this.filterDropdownVisible$.next(!1)}searchInputIsFocused(){return document.activeElement===this.searchInput.nativeElement}cursorAtStartOfSearchInput(){return this.searchInputIsFocused()&&0===this.searchInput.nativeElement.selectionStart}cursorAtEndOfSearchInput(){return this.searchInputIsFocused()&&this.searchInput.nativeElement.selectionStart===this.searchInput.nativeElement.value.length}bindToFormValueChange(){this.form.valueChanges.pipe((0,r.U)(e=>Object.keys(e).length?e:null),(0,s.x)()).subscribe(e=>{this.filterChange.emit(e?te(e):null)})}watchForSizeChanges(){new ResizeObserver(e=>{this.filterBarHeight=e[0].contentRect.height}).observe(this.el.nativeElement,{box:"border-box"})}setFiltersFromQuery(){const e=this.router.routerState.root.snapshot.queryParams;e.filters&&ne(e.filters).forEach(e=>{this.activeFilters.add(this.keyedFilters[e.key],e)}),e.query&&this.searchControl.setValue(e.query)}setupKeybinds(){this.keybinds.add(["backspace","delete"],()=>this.cursorAtStartOfSearchInput()?this.activeFilters.focusLast():this.activeFilters.anyFocused()?(this.activeFilters.removeCurrentlyFocused(),this.searchInput.nativeElement.focus()):void 0),this.keybinds.add("arrow_left",e=>{this.cursorAtStartOfSearchInput()?(this.activeFilters.focusLast(),e.preventDefault()):this.activeFilters.anyFocused()&&(this.activeFilters.focusPrevious(),e.preventDefault())}),this.keybinds.add("arrow_right",e=>{if(this.activeFilters.anyFocused()){e.preventDefault();const t=this.activeFilters.getFocusedIndex(),n=this.activeFilters.getByIndex(t+1);n?n.focus():this.activeFilters.lastIsFocused()&&this.searchInput.nativeElement.focus()}}),this.keybinds.add(["arrow_down","tab"],e=>{if(this.cursorAtEndOfSearchInput()||this.suggestions.anyFocused()){e.preventDefault(),this.filterDropdownVisible$.value||this.toggleFilterDropdown();const t=this.suggestions.getFocusedIndex();let n=t>-1?t:0;this.suggestions.anyFocused()&&(n+=1),n>=this.suggestions.items.length&&(n=0),this.suggestions.focusItemAt(n)}}),this.keybinds.add(["arrow_up","shift+tab"],e=>{if(this.suggestions.anyFocused()){e.preventDefault();const t=this.activeFilters.getFocusedIndex();let n=t>-1?t:0;n-=1,-1===n?this.searchInput.nativeElement.focus():this.suggestions.focusItemAt(n)}}),this.keybinds.add("enter",e=>{const t=this.suggestions.getFocusedFilter();t&&(e.preventDefault(),this.activeFilters.add(t,{focus:!0}),this.filterDropdownVisible$.next(!1))}),this.keybinds.add("esc",e=>{this.filterDropdownVisible$.value&&(e.preventDefault(),this.filterDropdownVisible$.next(!1))}),this.keybinds.listenOn(document,{fireIfInputFocused:!0})}subscribeToCloseActions(){this.closeActionsStream$=(0,u.T)((0,d.R)(document,"click"),(0,d.R)(document,"auxclick"),(0,d.R)(document,"touchend")).pipe((0,a.h)(e=>{const t=e.target;return t!==this.el.nativeElement&&!this.el.nativeElement.contains(t)})).subscribe(()=>{this.filterDropdownVisible$.next(!1)})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(y.qu),i.Y36(U.gz),i.Y36(i.SBq),i.Y36(H),i.Y36(i.sBO),i.Y36(U.F0))},e.\u0275cmp=i.Xpm({type:e,selectors:[["search-input-with-filters"]],viewQuery:function(e,t){if(1&e&&(i.Gf(j,5),i.Gf(m,5),i.Gf(Y,5),i.Gf(L,5)),2&e){let e;i.iGM(e=i.CRH())&&(t.searchInput=e.first),i.iGM(e=i.CRH())&&(t.suggestions=e.first),i.iGM(e=i.CRH())&&(t.activeFilters=e.first),i.iGM(e=i.CRH())&&(t.filterContainers=e)}},hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClick(e)})},inputs:{compact:"compact",searchControl:"searchControl",pluralName:"pluralName",filters:"filters"},outputs:{filterChange:"filterChange",inputFocus:"inputFocus"},decls:11,vars:18,consts:[[3,"form","config","compact"],[1,"input-container","search-input-container"],["svgIcon","search",1,"search-icon"],["type","text",1,"search-input",3,"placeholder","formControl","focus"],["searchInput",""],["type","button","class","clear-button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-button","","class","filter-button",3,"click",4,"ngIf"],[3,"filters","filterSelected"],["type","button","mat-icon-button","",1,"clear-button",3,"click"],["svgIcon","close"],["type","button","mat-button","",1,"filter-button",3,"click"],["svgIcon","filter-list",1,"filter-button-icon"],["class","filter-button-text","trans","",4,"ngIf"],["trans","",1,"filter-button-text"]],template:function(e,t){1&e&&(i.TgZ(0,"active-filters",0),i.TgZ(1,"div",1),i._UZ(2,"mat-icon",2),i.TgZ(3,"input",3,4),i.NdJ("focus",function(){return t.inputFocus.emit()}),i.ALo(5,"trans"),i.qZA(),i.qZA(),i.qZA(),i.YNc(6,K,2,0,"button",5),i.ALo(7,"async"),i.YNc(8,X,3,1,"button",6),i.TgZ(9,"filter-suggestions",7),i.NdJ("filterSelected",function(e){return t.addFilterFromDropdownClick(e)}),i.ALo(10,"async"),i.qZA()),2&e&&(i.Q6J("form",t.form)("config",t.keyedFilters)("compact",t.compact),i.xp6(3),i.Q6J("placeholder",i.lcZ(5,12,"Type to search for "+t.pluralName))("formControl",t.searchControl),i.xp6(3),i.Q6J("ngIf",i.lcZ(7,14,t.haveFiltersOrQuery$)),i.xp6(2),i.Q6J("ngIf",t.keyedFilters),i.xp6(1),i.Udp("top",t.filterBarHeight+5+"px"),i.ekj("visible",i.lcZ(10,16,t.filterDropdownVisible$)),i.Q6J("filters",t.keyedFilters))},directives:[Y,f.Hw,y.Fj,y.JJ,y.oH,h.O5,m,G.lW,p.P],pipes:[z.R,h.Ov],styles:["[_nghost-%COMP%]{display:flex;background-color:var(--be-background);border:1px solid var(--be-divider-default);height:45px;border-radius:4px;position:relative;padding-left:3px;overflow:hidden;width:100%}@media only screen and (max-width: 768px){[_nghost-%COMP%]{flex-wrap:wrap;justify-content:center}}[_nghost-%COMP%]:focus-within{outline:none;border-color:var(--be-accent-lighter);box-shadow:0 0 0 2px var(--be-accent-lighter);z-index:3;overflow:visible;height:auto!important}.search-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1 1 auto;width:auto;height:43px;padding-left:8px}.search-icon[_ngcontent-%COMP%]{display:block;color:var(--be-secondary-text);margin-right:5px}.search-input[_ngcontent-%COMP%]{border:none;height:100%;padding:0}.search-input[_ngcontent-%COMP%]:focus{box-shadow:none;z-index:1}.filter-button[_ngcontent-%COMP%]{min-width:auto;padding:0 14px;color:var(--be-accent-default);height:43px}.clear-button[_ngcontent-%COMP%]{height:43px;width:43px;line-height:43px;color:var(--be-accent-default)}.filter-button-text[_ngcontent-%COMP%]{margin-left:10px}"],changeDetection:0}),e})();const te=e=>{const t=[];return Object.values(e).forEach(e=>{""!==e.value&&t.push(e)}),t.length?encodeURIComponent(btoa(JSON.stringify(t))):""},ne=e=>{let t=[];try{t=JSON.parse(atob(decodeURIComponent(e)))}catch(n){}return t}},6050:function(e,t,n){n.d(t,{O:function(){return a}});var i=n(37716),o=n(65987),r=n(7539);const s=["table-body-checkbox",""];let a=(()=>{class e{constructor(e,t){this.datatable=e,this.cd=t}ngOnInit(){this.changeRef=this.datatable.selectedRows$.subscribe(e=>{this.cd.markForCheck()})}ngOnDestroy(){this.changeRef.unsubscribe()}isRowSelected(e){return this.datatable.selectedRows$.value.indexOf(e)>-1}toggleRow(e){if(this.isRowSelected(e)){const t=this.datatable.selectedRows$.value.slice(),n=this.datatable.selectedRows$.value.indexOf(e);t.splice(n,1),this.datatable.selectedRows$.next(t)}else this.datatable.selectedRows$.next([...this.datatable.selectedRows$.value,e])}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.x),i.Y36(i.sBO))},e.\u0275cmp=i.Xpm({type:e,selectors:[["","table-body-checkbox",""]],hostAttrs:[1,"table-checkbox"],inputs:{rowId:["table-body-checkbox","rowId"]},attrs:s,decls:1,vars:1,consts:[[3,"checked","click","change"]],template:function(e,t){1&e&&(i.TgZ(0,"mat-checkbox",0),i.NdJ("click",function(e){return e.stopPropagation()})("change",function(e){return e?t.toggleRow(t.rowId):null}),i.qZA()),2&e&&i.Q6J("checked",t.isRowSelected(t.rowId))},directives:[r.oG],encapsulation:2,changeDetection:0}),e})()},64058:function(e,t,n){n.d(t,{e:function(){return a}});var i=n(37716),o=n(65987),r=n(7539);const s=["table-header-checkbox",""];let a=(()=>{class e{constructor(e,t){this.datatable=e,this.cd=t}ngOnInit(){this.changeRef=this.datatable.selectedRows$.subscribe(()=>{this.cd.markForCheck()})}ngOnDestroy(){this.changeRef.unsubscribe()}anyRowsSelected(){return!!this.datatable.selectedRows$.value.length}allRowsSelected(){var e;return this.datatable.selectedRows$.value.length&&this.datatable.selectedRows$.value.length===(null===(e=this.datatable.data$.value)||void 0===e?void 0:e.length)}toggleAllRows(){this.allRowsSelected()?this.datatable.selectedRows$.next([]):this.datatable.selectedRows$.next(this.datatable.data$.value.map(e=>e.id))}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(o.x),i.Y36(i.sBO))},e.\u0275cmp=i.Xpm({type:e,selectors:[["","table-header-checkbox",""]],hostAttrs:[1,"table-checkbox"],attrs:s,decls:1,vars:2,consts:[[3,"checked","indeterminate","change"]],template:function(e,t){1&e&&(i.TgZ(0,"mat-checkbox",0),i.NdJ("change",function(e){return e?t.toggleAllRows():null}),i.qZA()),2&e&&i.Q6J("checked",t.allRowsSelected())("indeterminate",t.anyRowsSelected()&&!t.allRowsSelected())},directives:[r.oG],encapsulation:2,changeDetection:0}),e})()}}]);