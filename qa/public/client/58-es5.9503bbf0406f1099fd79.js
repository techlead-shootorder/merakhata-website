!function(){"use strict";function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkbedesk=self.webpackChunkbedesk||[]).push([[58],{14506:function(t,e,n){n.d(e,{V:function(){return i}});var i=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in r(this,t),this.shared=!1,e)this[n]=e[n]}},26979:function(t,e,n){n.d(e,{V:function(){return i}});var i=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var n in r(this,t),this.type="custom",e)this[n]=e[n]}},20082:function(t,e,n){n.d(e,{c:function(){return c}});var o,a=n(37716),s=n(99981),c=((o=function(){function t(e){r(this,t),this.http=e,this.baseUri="tags"}return i(t,[{key:"getTags",value:function(t){return this.http.getWithCache(this.baseUri,t)}},{key:"createNew",value:function(t){return this.http.post(this.baseUri,t)}},{key:"update",value:function(t,e){return this.http.put(this.baseUri+"/"+t,e)}},{key:"deleteMultiple",value:function(t){return this.http.delete(this.baseUri+"/delete-multiple/"+t)}},{key:"search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=Object.assign({query:t,notType:"status",perPage:10},e),this.http.get(this.baseUri,e)}}]),t}()).\u0275fac=function(t){return new(t||o)(a.LFG(s.F))},o.\u0275prov=a.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o)},35778:function(t,e,n){n.d(e,{U:function(){return c}});var o,a=n(37716),s=n(90299),c=((o=function(){function t(e){r(this,t),this.httpClient=e}return i(t,[{key:"getReplies",value:function(t){return this.httpClient.get("canned-replies",t)}},{key:"create",value:function(t){return this.httpClient.post("canned-replies",t)}},{key:"update",value:function(t,e){return this.httpClient.put("canned-replies/"+t,e)}},{key:"delete",value:function(t){return this.httpClient.delete("canned-replies/"+t)}}]),t}()).\u0275fac=function(t){return new(t||o)(a.LFG(s.r))},o.\u0275prov=a.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o)},26558:function(e,n,o){o.d(n,{w:function(){return P}});var a=o(14506),s=o(22238),c=o(9141),l=o(25917),u=o(71289),d=o(15257),h=o(37716),f=o(35778),p=o(38583),g=o(51095),m=o(76627),v=o(3679),y=o(15515),b=o(82192),x=o(48350),Z=o(91241),w=["textEditor"];function C(t,e){1&t&&(h.TgZ(0,"span",20),h._uU(1,"Update Canned Reply"),h.qZA())}function k(t,e){1&t&&(h.TgZ(0,"span",20),h._uU(1,"New Canned Reply"),h.qZA())}function _(t,e){if(1&t&&(h.TgZ(0,"div",21),h._uU(1),h.qZA()),2&t){var n=h.oxw();h.xp6(1),h.Oqu(n.errors.name)}}function A(t,e){if(1&t&&(h.TgZ(0,"div",21),h._uU(1),h.qZA()),2&t){var n=h.oxw();h.xp6(1),h.Oqu(n.errors.shared)}}function q(t,e){if(1&t&&(h.TgZ(0,"div",21),h._uU(1),h.qZA()),2&t){var n=h.oxw();h.xp6(1),h.Oqu(n.errors.body)}}function M(t,e){if(1&t&&(h.TgZ(0,"div",21),h._uU(1),h.qZA()),2&t){var n=h.oxw();h.xp6(1),h.Oqu(n.errors.uploads)}}function O(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"reply-attachment-list",22),h.NdJ("detached",function(t){return h.CHM(n),h.oxw().removeAttachment(t)}),h.qZA()}if(2&t){var i=h.oxw();h.Q6J("attachments",i.attachments)}}function T(t,e){1&t&&(h.TgZ(0,"span",20),h._uU(1,"Update"),h.qZA())}function U(t,e){1&t&&(h.TgZ(0,"span",20),h._uU(1,"Create"),h.qZA())}var J,P=((J=function(){function e(t,n,i,o){var s=this;r(this,e),this.dialogRef=t,this.data=n,this.cannedReplies=i,this.uploadQueue=o,this.attachments=[],this.model=new a.V,this.errors={},(0,l.of)(null).pipe((0,u.g)(0),(0,d.q)(1)).subscribe(function(){return s.hydrate()})}return i(e,[{key:"close",value:function(t){this.dialogRef.close(t),this.textEditor.destroyEditor()}},{key:"confirm",value:function(){var t=this,e=this.getPayload();(this.model.id?this.cannedReplies.update(this.model.id,e):this.cannedReplies.create(e)).subscribe(function(e){t.close(e.cannedReply)},function(e){return t.errors=e.errors})}},{key:"getPayload",value:function(){return{name:this.model.name,body:this.textEditor.getContents(),shared:this.model.shared,uploads:this.attachments.map(function(t){return t.id})}}},{key:"setContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.body&&this.textEditor.setContents(t.body),t.uploads&&(this.attachments=t.uploads.slice())}},{key:"hydrate",value:function(){this.data.contents&&this.setContents(this.data.contents),this.data.cannedReply&&(this.model=new a.V(this.data.cannedReply),this.setContents({body:this.model.body,uploads:this.model.uploads}))}},{key:"uploadFiles",value:function(e){var n=this;this.uploadQueue.start(e).subscribe(function(e){n.attachments=[].concat(t(n.attachments),[e.fileEntry])})}},{key:"removeAttachment",value:function(t){for(var e=0;e<this.attachments.length;e++)this.attachments[e].id===t.id&&this.attachments.splice(e,1)}}]),e}()).\u0275fac=function(t){return new(t||J)(h.Y36(s.so),h.Y36(s.WI),h.Y36(f.U),h.Y36(c.A))},J.\u0275cmp=h.Xpm({type:J,selectors:[["crupdate-canned-reply-modal"]],viewQuery:function(t,e){var n;1&t&&h.Gf(w,7),2&t&&h.iGM(n=h.CRH())&&(e.textEditor=n.first)},features:[h._Bn([c.A])],decls:37,vars:14,consts:[[1,"modal-header"],["mat-dialog-title",""],["trans","",4,"ngIf"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","canned-reply-name","trans",""],["type","text","id","canned-reply-name","name","canned-reply-name",3,"ngModel","ngModelChange"],["class","error",4,"ngIf"],["for","shared","trans",""],["id","shared","name","shared",3,"ngModel","ngModelChange"],["trans","",3,"ngValue"],["for","canned-body","trans",""],["id","canned-body","inlineUploadPrefix","ticket_images",3,"minHeight","onFileUpload"],["textEditor",""],[3,"attachments","detached",4,"ngIf"],["mat-button","","type","button","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent",1,"submit-button"],["trans",""],[1,"error"],[3,"attachments","detached"]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"h2",1),h.YNc(2,C,2,0,"span",2),h.YNc(3,k,2,0,"span",2),h.qZA(),h.TgZ(4,"button",3),h.NdJ("click",function(){return e.close()}),h._UZ(5,"mat-icon",4),h.qZA(),h.qZA(),h.TgZ(6,"form",5),h.NdJ("ngSubmit",function(){return e.confirm()}),h.TgZ(7,"mat-dialog-content",6),h.TgZ(8,"div",7),h.TgZ(9,"label",8),h._uU(10,"Name"),h.qZA(),h.TgZ(11,"input",9),h.NdJ("ngModelChange",function(t){return e.model.name=t}),h.qZA(),h.YNc(12,_,2,1,"div",10),h.qZA(),h.TgZ(13,"div",7),h.TgZ(14,"label",11),h._uU(15,"Shared"),h.qZA(),h.TgZ(16,"select",12),h.NdJ("ngModelChange",function(t){return e.model.shared=t}),h.TgZ(17,"option",13),h._uU(18,"Yes"),h.qZA(),h.TgZ(19,"option",13),h._uU(20,"No"),h.qZA(),h.qZA(),h.YNc(21,A,2,1,"div",10),h.qZA(),h.TgZ(22,"div",7),h.TgZ(23,"label",14),h._uU(24,"Canned Reply Body"),h.qZA(),h.TgZ(25,"text-editor",15,16),h.NdJ("onFileUpload",function(t){return e.uploadFiles(t)}),h.qZA(),h._UZ(27,"upload-progress-bar"),h.YNc(28,q,2,1,"div",10),h.YNc(29,M,2,1,"div",10),h.YNc(30,O,1,1,"reply-attachment-list",17),h.qZA(),h.qZA(),h.TgZ(31,"mat-dialog-actions"),h.TgZ(32,"button",18),h.NdJ("click",function(){return e.close()}),h._uU(33,"Cancel"),h.qZA(),h.TgZ(34,"button",19),h.YNc(35,T,2,0,"span",2),h.YNc(36,U,2,0,"span",2),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(2),h.Q6J("ngIf",e.model.id),h.xp6(1),h.Q6J("ngIf",!e.model.id),h.xp6(8),h.Q6J("ngModel",e.model.name),h.xp6(1),h.Q6J("ngIf",e.errors.name),h.xp6(4),h.Q6J("ngModel",e.model.shared),h.xp6(1),h.Q6J("ngValue",!0),h.xp6(2),h.Q6J("ngValue",!1),h.xp6(2),h.Q6J("ngIf",e.errors.shared),h.xp6(4),h.Q6J("minHeight",300),h.xp6(3),h.Q6J("ngIf",e.errors.body),h.xp6(1),h.Q6J("ngIf",e.errors.uploads),h.xp6(1),h.Q6J("ngIf",e.attachments.length),h.xp6(5),h.Q6J("ngIf",e.model.id),h.xp6(1),h.Q6J("ngIf",!e.model.id))},directives:[s.uh,p.O5,g.lW,m.Hw,v.JL,v.F,s.xY,y.P,v.Fj,v.JJ,v.On,v.EJ,v.YN,v.Kr,b.d,x.o,s.H8,Z.G],styles:[".crupdate-canned-reply-modal-container{width:580px}.crupdate-canned-reply-modal-container reply-attachment-list{margin-top:25px}\n"],encapsulation:2}),J)},35866:function(t,e,n){n.d(e,{y:function(){return Z}});var o=n(3679),a=n(54395),s=n(87519),c=n(43190),l=n(5304),u=n(26215),d=n(25917),h=n(37716),f=n(22238),p=n(73429),g=n(15515),m=n(76627),v=n(20616),y=n(38583);function b(t,e){if(1&t){var n=h.EpF();h.TgZ(0,"div",9),h.NdJ("click",function(){var t=h.CHM(n).$implicit;return h.oxw().close(t)}),h._UZ(1,"img",10),h.TgZ(2,"div",11),h.TgZ(3,"div",12),h._uU(4),h.qZA(),h.TgZ(5,"div",13),h._uU(6),h.qZA(),h.qZA(),h.qZA()}if(2&t){var i=e.$implicit;h.xp6(1),h.Q6J("src",i.avatar,h.LSH),h.xp6(3),h.Oqu(i.display_name),h.xp6(2),h.Oqu(i.email)}}var x,Z=((x=function(){function t(e,n){r(this,t),this.dialogRef=e,this.users=n,this.searchFormControl=new o.NI,this.loading$=new u.X(!1),this.users$=new u.X([])}return i(t,[{key:"ngOnInit",value:function(){var t=this;this.searchFormControl.valueChanges.pipe((0,a.b)(250),(0,s.x)(),(0,c.w)(function(e){return t.searchUsers(e)}),(0,l.K)(function(){return(0,d.of)([])})).subscribe(function(e){t.users$.next(e),t.loading$.next(!1)})}},{key:"close",value:function(t){this.dialogRef.close(this.normalizeUser(t))}},{key:"searchUsers",value:function(t){return this.loading$.next(!0),t?this.users.getAll({query:t}):(0,d.of)([])}},{key:"normalizeUser",value:function(t){return t?{id:t.id,name:t.display_name,image:t.avatar,model_type:t.model_type}:null}}]),t}()).\u0275fac=function(t){return new(t||x)(h.Y36(f.so),h.Y36(p.Q))},x.\u0275cmp=h.Xpm({type:x,selectors:[["find-user-modal"]],decls:13,vars:7,consts:[[1,"modal-header"],["mat-dialog-title","","trans",""],["type","button","tabindex","-1",1,"no-style","close-button",3,"click"],["svgIcon","close"],[1,"input-container","search-input-container"],["type","text","placeholder","Search for user by name or email...",3,"formControl"],[1,"small",3,"isVisible"],[1,"users"],["class","user",3,"click",4,"ngFor","ngForOf"],[1,"user",3,"click"],[3,"src"],[1,"meta","overflow-hidden"],[1,"name","overflow-hidden"],[1,"email","overflow-hidden"]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"h2",1),h._uU(2,"Find User"),h.qZA(),h.TgZ(3,"button",2),h.NdJ("click",function(){return e.close()}),h._UZ(4,"mat-icon",3),h.qZA(),h.qZA(),h.TgZ(5,"mat-dialog-content"),h.TgZ(6,"div",4),h._UZ(7,"input",5),h._UZ(8,"loading-indicator",6),h.ALo(9,"async"),h.qZA(),h.TgZ(10,"div",7),h.YNc(11,b,7,3,"div",8),h.ALo(12,"async"),h.qZA(),h.qZA()),2&t&&(h.xp6(7),h.Q6J("formControl",e.searchFormControl),h.xp6(1),h.Q6J("isVisible",h.lcZ(9,3,e.loading$)),h.xp6(3),h.Q6J("ngForOf",h.lcZ(12,5,e.users$)))},directives:[f.uh,g.P,m.Hw,f.xY,o.Fj,o.JJ,o.oH,v.Q,y.sg],pipes:[y.Ov],styles:["[_nghost-%COMP%]{display:block;width:500px;max-width:100%}.modal-header[_ngcontent-%COMP%]{margin-bottom:15px}.search-input-container[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;position:relative}loading-indicator[_ngcontent-%COMP%]{top:12px;right:12px}.users[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin:0 -15px}.user[_ngcontent-%COMP%]{display:flex;align-items:center;width:calc(50% - 10px);flex-shrink:0;min-width:0;padding:12px;border-radius:4px;cursor:pointer}.user[_ngcontent-%COMP%]:hover{background-color:var(--be-hover)}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;flex-shrink:0;margin-right:10px;border-radius:4px;overflow:hidden}.user[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:var(--be-text);font-size:1.5rem;margin-bottom:5px}.user[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.overflow-hidden[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}"],changeDetection:0}),x)},1303:function(t,e,n){n.d(e,{p:function(){return v}});var o,a=n(45435),s=n(36461),c=n(6966),l=n(37716),u=n(65987),d=n(19238),h=n(38583),f=n(76627),p=["columnName"],g=["table-sort-header",""],m=["*"],v=((o=function(){function t(e,n,i,o){r(this,t),this.datable=e,this.cd=n,this.focusMonitor=i,this.el=o,this.orderDir=null,this.arrowVisible=!1,this.arrowDirection="down"}return i(t,[{key:"sortDisabled",get:function(){var t;return null===(t=this.datable.config)||void 0===t?void 0:t.disableSort}},{key:"ngOnInit",value:function(){var t=this;this.orderBy||(this.orderBy=(0,c.V)(this.columnName.nativeElement.textContent,"_")),this.sortSub=this.datable.sort$.pipe((0,a.h)(function(e){return e.orderBy!==t.orderBy})).subscribe(function(){t.orderDir=null,t.onMouseLeave(),t.cd.markForCheck()})}},{key:"ngAfterViewInit",value:function(){this.focusMonitor.monitor(this.el).subscribe()}},{key:"ngOnDestroy",value:function(){this.sortSub.unsubscribe(),this.focusMonitor.stopMonitoring(this.el)}},{key:"changeSort",value:function(){this.datable.sort$.next({orderBy:this.orderBy,orderDir:this.getDirection(this.orderDir)})}},{key:"getDirection",value:function(t){switch(t){case"asc":return this.arrowVisible=!1,this.orderDir=null;case"desc":return this.arrowVisible=!0,this.arrowDirection="up",this.orderDir="asc";default:return this.arrowVisible=!0,this.arrowDirection="down",this.orderDir="desc"}}},{key:"onMouseEnter",value:function(){var t;(null===(t=this.datable.config)||void 0===t?void 0:t.disableSort)||(this.arrowVisible=!0)}},{key:"onMouseLeave",value:function(){this.arrowVisible=!1,this.orderDir||(this.arrowDirection="down")}},{key:"handleClick",value:function(){var t;(null===(t=this.datable.config)||void 0===t?void 0:t.disableSort)||this.changeSort()}},{key:"handleKeydown",value:function(t){var e;!(null===(e=this.datable.config)||void 0===e?void 0:e.disableSort)&&(t.keyCode===s.L_||t.keyCode===s.K5)&&(t.preventDefault(),this.changeSort())}}]),t}()).\u0275fac=function(t){return new(t||o)(l.Y36(u.x),l.Y36(l.sBO),l.Y36(d.tE),l.Y36(l.SBq))},o.\u0275cmp=l.Xpm({type:o,selectors:[["","table-sort-header",""]],viewQuery:function(t,e){var n;1&t&&l.Gf(p,7),2&t&&l.iGM(n=l.CRH())&&(e.columnName=n.first)},hostAttrs:["tabindex","0"],hostVars:4,hostBindings:function(t,e){1&t&&l.NdJ("click",function(){return e.handleClick()})("keydown",function(t){return e.handleKeydown(t)})("mouseenter",function(){return e.onMouseEnter()})("mouseleave",function(){return e.onMouseLeave()}),2&t&&l.ekj("active",e.orderDir)("sort-disabled",e.sortDisabled)},inputs:{orderBy:["table-sort-header","orderBy"]},attrs:g,ngContentSelectors:m,decls:5,vars:3,consts:[[1,"text"],["columnName",""],[1,"icon-wrapper",3,"ngClass"],["svgIcon","arrow-downward",1,"sort-icon"]],template:function(t,e){1&t&&(l.F$t(),l.TgZ(0,"span",0,1),l.Hsn(2),l.qZA(),l.TgZ(3,"span",2),l._UZ(4,"mat-icon",3),l.qZA()),2&t&&(l.xp6(3),l.Q6J("ngClass",e.arrowDirection),l.xp6(1),l.ekj("hint-visible",e.arrowVisible))},directives:[h.mk,f.Hw],styles:["[_nghost-%COMP%]{outline:none}[_nghost-%COMP%]:not(.sort-disabled){cursor:pointer}.active[_nghost-%COMP%]   .sort-icon[_ngcontent-%COMP%]{color:var(--be-text);opacity:1;transform:translate(0)}.cdk-keyboard-focused[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{border-bottom:solid 1px currentColor}.text[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;text-transform:capitalize}.sort-icon[_ngcontent-%COMP%]{width:15px;height:15px;vertical-align:middle;transition:all 225ms cubic-bezier(.4,0,.2,1);transform:translateY(25%);opacity:0}.icon-wrapper[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;transition:transform 225ms cubic-bezier(.4,0,.2,1)}.icon-wrapper[_ngcontent-%COMP%]:not(.down){transform:rotate(180deg)}.hint-visible[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}"],changeDetection:0}),o)}}])}();